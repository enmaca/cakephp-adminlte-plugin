var $jscomp={scope:{},findInternal:function(b,c,e){b instanceof String&&(b=String(b));for(var d=b.length,a=0;a<d;a++){var g=b[a];if(c.call(e,g,a,b))return{i:a,v:g}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=e.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,c,e,d){if(c){e=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var a=b[d];a in e||(e[a]={});e=e[a]}b=b[b.length-1];d=e[b];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(e,b,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,e){return $jscomp.findInternal(this,b,e).v}},"es6-impl","es3");
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof module&&module.exports?module.exports=b(require("jquery")):b(window.jQuery)})(function(b){var c=b.summernote.ui,e=b.summernote.dom;b.extend(!0,b.summernote,{plugins:{databasic:function(d){var a=this,g=d.options,h=g.langInfo;a.icon='<i class="fa fa-object-group"/>';d.memo("button.databasic",function(){return c.button({contents:a.icon,tooltip:h.databasic.insert,click:d.createInvokeHandler("databasic.showDialog")}).render()});
d.memo("button.databasicDialog",function(){return c.button({contents:a.icon,tooltip:h.databasic.edit,click:d.createInvokeHandler("databasic.showDialog")}).render()});d.memo("button.databasicSize100",function(){return c.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:h.image.resizeFull,click:d.createInvokeHandler("editor.resize","1")}).render()});d.memo("button.databasicSize50",function(){return c.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:h.image.resizeHalf,
click:d.createInvokeHandler("editor.resize","0.5")}).render()});d.memo("button.databasicSize25",function(){return c.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:h.image.resizeQuarter,click:d.createInvokeHandler("editor.resize","0.25")}).render()});a.events={"summernote.init":function(f,d){b("data.ext-databasic",d.editable).each(function(){a.setContent(b(this))})},"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){a.update()},"summernote.dialog.shown":function(){a.hidePopover()}};
a.initialize=function(){var f=g.dialogsInBody?b(document.body):d.layoutInfo.editor;a.$dialog=c.dialog({title:h.databasic.name,fade:g.dialogsFade,body:'<div class="form-group row-fluid"><label>'+h.databasic.testLabel+'</label><input class="ext-databasic-test form-control" type="text" /></div>',footer:'<button href="#" class="btn btn-primary ext-databasic-save">'+h.databasic.insert+"</button>"}).render().appendTo(f);a.$popover=c.popover({className:"ext-databasic-popover"}).render().appendTo("body");
f=a.$popover.find(".popover-content");d.invoke("buttons.build",f,g.popover.databasic)};a.destroy=function(){a.$popover.remove();a.$popover=null;a.$dialog.remove();a.$dialog=null};a.update=function(){if(d.invoke("editor.hasFocus")){var f=d.invoke("editor.createRange"),c=!1;f.isOnData()&&(f=b(f.sc).closest("data.ext-databasic"),f.length&&(c=e.posFromPlaceholder(f[0]),a.$popover.css({display:"block",left:c.left,top:c.top}),d.invoke("editor.saveTarget",f[0]),c=!0));c||a.hidePopover()}else a.hidePopover()};
a.hidePopover=function(){a.$popover.hide()};a.getInfo=function(){var a=d.invoke("editor.createRange");return a.isOnData()&&(a=b(a.sc).closest("data.ext-databasic"),a.length)?{node:a,test:a.attr("data-test")}:{}};a.setContent=function(b){b.html('<p contenteditable="false">'+a.icon+" "+h.databasic.name+": "+b.attr("data-test")+"</p>")};a.updateNode=function(b){a.setContent(b.node.attr("data-test",b.test))};a.createNode=function(a){var c=b('<data class="ext-databasic"></data>');c&&(a.node=c,d.invoke("editor.insertNode",
c[0]));return c};a.showDialog=function(){var f=a.getInfo(),e=!f.node;d.invoke("editor.saveRange");a.openDialog(f).then(function(h){c.hideDialog(a.$dialog);d.invoke("editor.restoreRange");e&&a.createNode(f);b.extend(f,h);a.updateNode(f)}).fail(function(){d.invoke("editor.restoreRange")})};a.openDialog=function(f){return b.Deferred(function(b){var e=a.$dialog.find(".ext-databasic-test"),g=a.$dialog.find(".ext-databasic-save"),k=function(a){13===a.keyCode&&g.trigger("click")};c.onDialogShown(a.$dialog,
function(){d.triggerEvent("dialog.shown");e.val(f.test).on("input",function(){c.toggleBtn(g,e.val())}).trigger("focus").on("keyup",k);g.text(f.node?h.databasic.edit:h.databasic.insert).click(function(a){a.preventDefault();b.resolve({test:e.val()})});c.toggleBtn(g,e.val())});c.onDialogHidden(a.$dialog,function(){e.off("input keyup");g.off("click");"pending"===b.state()&&b.reject()});c.showDialog(a.$dialog)})}}},options:{popover:{databasic:[["databasic",["databasicDialog","databasicSize100","databasicSize50",
"databasicSize25"]]]}},lang:{"en-US":{databasic:{name:"Basic Data Container",insert:"insert basic data container",edit:"edit basic data container",testLabel:"test input"}}}})});
