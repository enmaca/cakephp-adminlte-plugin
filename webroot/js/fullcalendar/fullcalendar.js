(function(g){"function"===typeof define&&define.amd?define(["jquery","moment"],g):g(jQuery,moment)})(function(g,n){function la(a){P(Q,a)}function P(a){function b(b,c){g.isPlainObject(c)&&g.isPlainObject(a[b])&&!/(Time|Duration)$/.test(b)?a[b]=P({},a[b],c):void 0!==c&&(a[b]=c)}for(var c=1;c<arguments.length;c++)g.each(arguments[c],b);return a}function ma(a){var b=n.localeData||n.langData;return b.call(n,a)||b.call(n,"en")}function na(a,b){b.left&&a.css({"border-left-width":1,"margin-left":b.left-1});
b.right&&a.css({"border-right-width":1,"margin-right":b.right-1})}function oa(a){a.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function U(){g("body").addClass("fc-not-allowed")}function F(){g("body").removeClass("fc-not-allowed")}function pa(a,b,c){var d=Math.floor(b/a.length),e=Math.floor(b-d*(a.length-1)),f=[],h=[],l=[],k=0;a.height("");a.each(function(b,c){var A=b===a.length-1?e:d,v=g(c).outerHeight(!0);v<A?(f.push(c),h.push(v),l.push(g(c).height())):
k+=v});c&&(b-=k,d=Math.floor(b/f.length),e=Math.floor(b-d*(f.length-1)));g(f).each(function(a,b){var c=a===f.length-1?e:d,k=h[a],m=c-(k-l[a]);k<c&&g(b).height(m)})}function qa(a){var b=0;a.find("> *").each(function(a,d){var e=g(d).outerWidth();e>b&&(b=e)});b++;a.width(b);return b}function ra(a,b){a.height(b).addClass("fc-scroller");if(a[0].scrollHeight-1>a[0].clientHeight)return!0;aa(a);return!1}function aa(a){a.height("").removeClass("fc-scroller")}function sa(a){var b=a.css("position"),c=a.parents().filter(function(){var a=
g(this);return/(auto|scroll)/.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==b&&c.length?c:g(a[0].ownerDocument||document)}function ta(a){var b=a.offset().left,c=b+a.width(),d=a.children();a=d.offset().left;d=a+d.outerWidth();return{left:a-b,right:c-d}}function ba(a,b){var c=a.start,d=a.end,e=b.start,f=b.end;if(d>e&&c<f)return c>=e?(c=c.clone(),e=!0):(c=e.clone(),e=!1),d<=f?(d=d.clone(),f=!0):(d=f.clone(),f=!1),{start:c,end:d,isStart:e,isEnd:f}}function S(a,
b){a=a||{};if(void 0!==a[b])return a[b];for(var c=b.split(/(?=[A-Z])/),d=c.length-1,e;0<=d;d--)if(e=a[c[d].toLowerCase()],void 0!==e)return e;return a["default"]}function T(a,b){return n.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days"),ms:a.time()-b.time()})}function Sa(a,b){return n.duration({days:a.clone().stripTime().diff(b.clone().stripTime(),"days")})}function ua(a,b){var c,d;for(c=0;c<va.length&&(d=va[c],!ca(d,a,b));c++);return d}function ca(a,b,c){a=null!=c?c.diff(b,
a,!0):n.isDuration(b)?b.as(a):b.end.diff(b.start,a,!0);return 1<=a&&0===a%1?a:!1}function wa(a){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a)}function V(a){var b=function(){};b.prototype=a;return new b}function da(a,b){for(var c in a)xa.call(a,c)&&(b[c]=a[c])}function W(a,b,c){g.isFunction(a)&&(a=[a]);if(a){var d,e;for(d=0;d<a.length;d++)e=a[d].apply(b,c)||e;return e}}function I(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]}function y(a){return(a+"").replace(/&/g,
"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function ya(a){return a.charAt(0).toUpperCase()+a.slice(1)}function Ta(a,b){return a-b}function ea(a,b){var c,d,e,f,h=function(){var g=+new Date-f;g<b&&0<g?c=setTimeout(h,b-g):(c=null,a.apply(e,d),c||(e=d=null))};return function(){e=this;d=arguments;f=+new Date;c||(c=setTimeout(h,b))}}function fa(a,b,c){var d=a[0],e=1==a.length&&"string"===typeof d,f,h,l;if(n.isMoment(d))a=n.apply(null,
a),za(d,a);else if(f=d,"[object Date]"===Object.prototype.toString.call(f)||f instanceof Date||void 0===d)a=n.apply(null,a);else{h=f=!1;if(e)if(Ua.test(d))d+="-01",a=[d],h=f=!0;else{if(l=Va.exec(d))f=!l[5],h=!0}else g.isArray(d)&&(h=!0);a=b||f?n.utc.apply(n,a):n.apply(null,a);f?(a._ambigTime=!0,a._ambigZone=!0):c&&(h?a._ambigZone=!0:e&&a.zone(d))}a._fullCalendar=!0;return a}function ga(a,b){var c=!1,d=!1,e=a.length,f=[],h,g;for(h=0;h<e;h++)g=a[h],n.isMoment(g)||(g=r.moment.parseZone(g)),c=c||g._ambigTime,
d=d||g._ambigZone,f.push(g);for(h=0;h<e;h++)g=f[h],b||!c||g._ambigTime?d&&!g._ambigZone&&(f[h]=g.clone().stripZone()):f[h]=g.clone().stripTime();return f}function za(a,b){a._ambigTime?b._ambigTime=!0:b._ambigTime&&(b._ambigTime=!1);a._ambigZone?b._ambigZone=!0:b._ambigZone&&(b._ambigZone=!1)}function Aa(a,b){a.year(b[0]||0).month(b[1]||0).date(b[2]||0).hours(b[3]||0).minutes(b[4]||0).seconds(b[5]||0).milliseconds(b[6]||0)}function J(a,b){return z.format.call(a,b)}function Ba(a,b){var c="",d;for(d=
0;d<b.length;d++)c+=ha(a,b[d]);return c}function ha(a,b){var c;return"string"===typeof b?b:(c=b.token)?Ca[c]?Ca[c](a):J(a,c):b.maybe&&(c=Ba(a,b.maybe),c.match(/[1-9]/))?c:""}function Da(a,b,c,d,e){a=r.moment.parseZone(a);b=r.moment.parseZone(b);c=(a.localeData||a.lang).call(a).longDateFormat(c)||c;d=d||" - ";c=Ea(c);var f,h,g="",k,p="",u="",A="",v="";for(h=0;h<c.length;h++){f=Fa(a,b,c[h]);if(!1===f)break;g+=f}for(k=c.length-1;k>h;k--){f=Fa(a,b,c[k]);if(!1===f)break;p=f+p}for(f=h;f<=k;f++)u+=ha(a,
c[f]),A+=ha(b,c[f]);if(u||A)v=e?A+d+u:u+d+A;return g+v+p}function Fa(a,b,c){var d;return"string"===typeof c?c:(c=c.token)&&(d=Wa[c.charAt(0)])&&a.isSame(b,d)?J(a,c):!1}function Ea(a){return a in ia?ia[a]:ia[a]=Ga(a)}function Ga(a){for(var b=[],c=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g,d;d=c.exec(a);)d[1]?b.push(d[1]):d[2]?b.push({maybe:Ga(d[2])}):d[3]?b.push({token:d[3]}):d[5]&&b.push(d[5]);return b}function G(){}function Ha(a,b){return a||b?a&&b?a.grid===b.grid&&a.row===b.row&&a.col===
b.col:!1:!0}function Ia(a){return I((a.source||{}).rendering,a.rendering)}function Xa(a){var b={},c,d;for(c=0;c<a.length;c++)d=a[c],(b[d._id]||(b[d._id]=[])).push(d);return b}function Ya(a,b){return a.eventStartMS-b.eventStartMS}function X(a,b){return a.eventStartMS-b.eventStartMS||b.eventDurationMS-a.eventDurationMS||b.event.allDay-a.event.allDay||(a.event.title||"").localeCompare(b.event.title)}function Za(a){var b=r.dataAttrPrefix,c,d,e,f;b&&(b+="-");if(c=a.data(b+"event")||null)c="object"===typeof c?
g.extend({},c):{},d=c.start,null==d&&(d=c.time),e=c.duration,f=c.stick,delete c.start,delete c.time,delete c.duration,delete c.stick;null==d&&(d=a.data(b+"start"));null==d&&(d=a.data(b+"time"));null==e&&(e=a.data(b+"duration"));null==f&&(f=a.data(b+"stick"));d=null!=d?n.duration(d):null;e=null!=e?n.duration(e):null;f=Boolean(f);return{eventProps:c,startTime:d,duration:e,stick:f}}function $a(a,b){return a.leftCol-b.leftCol}function Ja(a){var b=a.forwardSegs,c=0,d,e;if(void 0===a.forwardPressure){for(d=
0;d<b.length;d++)e=b[d],Ja(e),c=Math.max(c,1+e.forwardPressure);a.forwardPressure=c}}function ja(a,b,c){var d=a.forwardSegs;if(void 0===a.forwardCoord)for(d.length?(d.sort(ab),ja(d[0],b+1,c),a.forwardCoord=d[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),b=0;b<d.length;b++)ja(d[b],0,a.forwardCoord)}function Ka(a,b,c){c=c||[];for(var d=0;d<b.length;d++){var e=b[d];a.bottom>e.top&&a.top<e.bottom&&c.push(b[d])}return c}function ab(a,b){return b.forwardPressure-
a.forwardPressure||(a.backwardCoord||0)-(b.backwardCoord||0)||X(a,b)}function bb(a,b){function c(){return a.is(":visible")}function d(a){e(0,a)}function e(a,b){K++;t&&b&&t.type!==b&&(s.deactivateButton(t.type),A(),t.start&&t.destroyView(),t.el.remove(),t=null);if(!t&&b){var d=f(b);t=new d["class"](m,d.options,b);t.el=g("<div class='fc-view fc-"+b+"-view' />").appendTo(L);s.activateButton(b)}t&&(0>a?E=t.computePrevDate(E):0<a&&(E=t.computeNextDate(E)),t.start&&!a&&E.isWithin(t.intervalStart,t.intervalEnd)||
!c()||(A(),t.start&&t.destroyView(),t.setDate(E),t.renderView(),v(),s.updateTitle(t.computeTitle()),m.getNow().isWithin(t.intervalStart,t.intervalEnd)?s.disableButton("today"):s.enableButton("today"),!q.lazyFetching||y(t.start,t.end)?La(t.start,t.end):u()));v();K--}function f(a){function b(a){"function"===typeof a?p=a:"object"===typeof a&&g.extend(l,a)}var c=q.defaultButtonText||{},d=q.buttonText||{},e=q.views||{},f=a,h=[],l,p,k,m=!1;if(z[a])return z[a];for(;f&&!p;)l={},b(M[f]),b(e[f]),h.unshift(l),
f=l.type;h.unshift({});l=g.extend.apply(g,h);if(p){if(f=l.duration||p.duration)f=n.duration(f),k=ua(f),m=1===ca(k,f);m&&e[k]&&(l=g.extend({},e[k],l));c=d[a]||(m?d[k]:null)||c[a]||(m?c[k]:null)||l.buttonText||p.buttonText||(f?(f.locale||f.lang).call(f,q.lang).humanize():null)||a;return z[a]={"class":p,options:l,buttonText:c}}}function h(a){return Boolean(f(a))}function l(a){if(c())return a&&k(),K++,t.updateSize(!0),K--,!0}function k(){H="number"===typeof q.contentHeight?q.contentHeight:"number"===
typeof q.height?q.height-(x?x.outerHeight(!0):0):Math.round(L.width()/Math.max(q.aspectRatio,0.5))}function p(a){!K&&a.target===window&&t.start&&l(!0)&&t.trigger("windowResize",C)}function u(){c()&&(A(),t.destroyViewEvents(),t.renderViewEvents(I),v())}function A(){L.css({width:"100%",height:L.height(),overflow:"hidden"})}function v(){L.css({width:"",height:"",overflow:""})}var m=this;b=b||{};var q=P({},Q,b),R;(R=q.lang in O?O[q.lang]:O[Q.lang])&&(q=P({},Q,R,b));q.isRTL&&(q=P({},Q,cb,R||{},b));m.options=
q;m.render=function(b){L?c()&&(c()&&k(),e(b)):(a.addClass("fc"),q.isRTL?a.addClass("fc-rtl"):a.addClass("fc-ltr"),q.theme?a.addClass("ui-widget"):a.addClass("fc-unthemed"),L=g("<div class='fc-view-container'/>").prependTo(a),s=new db(m,q),(x=s.render())&&a.prepend(x),d(q.defaultView),q.handleWindowResize&&(B=ea(p,q.windowResizeDelay),g(window).resize(B)))};m.destroy=function(){t&&t.destroyView();s.destroy();L.remove();a.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");g(window).unbind("resize",
B)};m.refetchEvents=function(){A();t.destroyViewEvents();v();La(t.start,t.end)};m.reportEvents=function(a){I=a;u()};m.reportEventChange=function(){u()};m.rerenderEvents=u;m.changeView=d;m.select=function(a,b){a=m.moment(a);b=b?m.moment(b):a.hasTime()?a.clone().add(m.defaultTimedEventDuration):a.clone().add(m.defaultAllDayEventDuration);t.select({start:a,end:b})};m.unselect=function(){t&&t.unselect()};m.prev=function(){e(-1)};m.next=function(){e(1)};m.prevYear=function(){E.add(-1,"years");e()};m.nextYear=
function(){E.add(1,"years");e()};m.today=function(){E=m.getNow();e()};m.gotoDate=function(a){E=m.moment(a);e()};m.incrementDate=function(a){E.add(n.duration(a));e()};m.zoomTo=function(a,b){var c,e;b&&h(b)||(b=b||"day",c=s.getViewsWithButtons().join(" "),(e=c.match(new RegExp("\\w+"+ya(b))))||(e=c.match(/\w+Day/)),b=e?e[0]:"agendaDay");E=a;d(b)};m.getDate=function(){return E.clone()};m.getCalendar=function(){return m};m.getView=function(){return t};m.option=function(a,b){if(void 0===b)return q[a];
if("height"==a||"contentHeight"==a||"aspectRatio"==a)q[a]=b,l(!0)};m.trigger=function(a,b){if(q[a])return q[a].apply(b||C,Array.prototype.slice.call(arguments,2))};m.isValidViewType=h;m.getViewButtonText=function(a){if(a=f(a))return a.buttonText};var w=V(ma(q.lang));q.monthNames&&(w._months=q.monthNames);q.monthNamesShort&&(w._monthsShort=q.monthNamesShort);q.dayNames&&(w._weekdays=q.dayNames);q.dayNamesShort&&(w._weekdaysShort=q.dayNamesShort);null!=q.firstDay&&(R=V(w._week),R.dow=q.firstDay,w._week=
R);m.defaultAllDayEventDuration=n.duration(q.defaultAllDayEventDuration);m.defaultTimedEventDuration=n.duration(q.defaultTimedEventDuration);m.moment=function(){var a;"local"===q.timezone?(a=r.moment.apply(null,arguments),a.hasTime()&&a.local()):a="UTC"===q.timezone?r.moment.utc.apply(null,arguments):r.moment.parseZone.apply(null,arguments);"_locale"in a?a._locale=w:a._lang=w;return a};m.getIsAmbigTimezone=function(){return"local"!==q.timezone&&"UTC"!==q.timezone};m.rezoneDate=function(a){return m.moment(a.toArray())};
m.getNow=function(){var a=q.now;"function"===typeof a&&(a=a());return m.moment(a)};m.calculateWeekNumber=function(a){var b=q.weekNumberCalculation;if("function"===typeof b)return b(a);if("local"===b)return a.week();if("ISO"===b.toUpperCase())return a.isoWeek()};m.getEventEnd=function(a){return a.end?a.end.clone():m.getDefaultEventEnd(a.allDay,a.start)};m.getDefaultEventEnd=function(a,b){var c=b.clone();a?c.stripTime().add(m.defaultAllDayEventDuration):c.add(m.defaultTimedEventDuration);m.getIsAmbigTimezone()&&
c.stripZone();return c};eb.call(m,q);var y=m.isFetchNeeded,La=m.fetchEvents,C=a[0],s,x,L,z={},t,H,B,K=0,E,I=[];E=null!=q.defaultDate?m.moment(q.defaultDate):m.getNow();m.getSuggestedViewHeight=function(){void 0===H&&c()&&k();return H};m.isHeightAuto=function(){return"auto"===q.contentHeight||"auto"===q.height}}function db(a,b){function c(c){var d=g('<div class="fc-'+c+'"/>');(c=b.header[c])&&g.each(c.split(" "),function(c){var h=g(),u=!0;g.each(this.split(","),function(c,d){var l,k,n,w,r,x,C;"title"==
d?(h=h.add(g("<h2>&nbsp;</h2>")),u=!1):(a[d]?l=function(){a[d]()}:a.isValidViewType(d)&&(l=function(){a.changeView(d)},e.push(d),r=a.getViewButtonText(d)),l&&(k=S(b.themeButtonIcons,d),n=S(b.buttonIcons,d),w=S(b.defaultButtonText,d),x=S(b.buttonText,d),k=r||x?y(r||x):k&&b.theme?"<span class='ui-icon ui-icon-"+k+"'></span>":n&&!b.theme?"<span class='fc-icon fc-icon-"+n+"'></span>":y(w||d),n=["fc-"+d+"-button",f+"-button",f+"-state-default"],C=g('<button type="button" class="'+n.join(" ")+'">'+k+"</button>").click(function(){C.hasClass(f+
"-state-disabled")||(l(),(C.hasClass(f+"-state-active")||C.hasClass(f+"-state-disabled"))&&C.removeClass(f+"-state-hover"))}).mousedown(function(){C.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){C.removeClass(f+"-state-down")}).hover(function(){C.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},function(){C.removeClass(f+"-state-hover").removeClass(f+"-state-down")}),h=h.add(C)))});u&&h.first().addClass(f+
"-corner-left").end().last().addClass(f+"-corner-right").end();1<h.length?(c=g("<div/>"),u&&c.addClass("fc-button-group"),c.append(h),d.append(c)):d.append(h)});return d}this.render=function(){var a=b.header;f=b.theme?"ui":"fc";if(a)return d=g("<div class='fc-toolbar'/>").append(c("left")).append(c("right")).append(c("center")).append('<div class="fc-clear"/>')};this.destroy=function(){d.remove()};this.updateTitle=function(a){d.find("h2").text(a)};this.activateButton=function(a){d.find(".fc-"+a+"-button").addClass(f+
"-state-active")};this.deactivateButton=function(a){d.find(".fc-"+a+"-button").removeClass(f+"-state-active")};this.disableButton=function(a){d.find(".fc-"+a+"-button").attr("disabled","disabled").addClass(f+"-state-disabled")};this.enableButton=function(a){d.find(".fc-"+a+"-button").removeAttr("disabled").removeClass(f+"-state-disabled")};this.getViewsWithButtons=function(){return e};var d=g(),e=[],f}function eb(a){function b(a,b){c(a,function(c){var d=g.isArray(a.events),e,f;if(b==E){if(c)for(e=
0;e<c.length;e++)f=c[e],(f=d?f:u(f,a))&&D.push.apply(D,m(f));J--;J||G(D)}})}function c(b,d){var e,f=r.sourceFetchers,h;for(e=0;e<f.length;e++){h=f[e].call(s,b,F.clone(),K.clone(),a.timezone,d);if(!0===h)return;if("object"==typeof h){c(h,d);return}}if(e=b.events)g.isFunction(e)?(k(),e.call(s,F.clone(),K.clone(),a.timezone,function(a){d(a);p()})):g.isArray(e)?d(e):d();else if(b.url){var l=b.success,m=b.error,u=b.complete;e=g.isFunction(b.data)?b.data():b.data;e=g.extend({},e||{});f=I(b.startParam,a.startParam);
h=I(b.endParam,a.endParam);var q=I(b.timezoneParam,a.timezoneParam);f&&(e[f]=F.format());h&&(e[h]=K.format());a.timezone&&"local"!=a.timezone&&(e[q]=a.timezone);k();g.ajax(g.extend({},fb,b,{data:e,success:function(a){a=a||[];var b=W(l,this,arguments);g.isArray(b)&&(a=b);d(a)},error:function(){W(m,this,arguments);d()},complete:function(){W(u,this,arguments);p()}}))}else d()}function d(a){var b=r.sourceNormalizers,c;g.isFunction(a)||g.isArray(a)?c={events:a}:"string"===typeof a?c={url:a}:"object"===
typeof a&&(c=g.extend({},a));if(c){c.className?"string"===typeof c.className&&(c.className=c.className.split(/\s+/)):c.className=[];g.isArray(c.events)&&(c.origArray=c.events,c.events=g.map(c.events,function(a){return u(a,c)}));for(a=0;a<b.length;a++)b[a].call(s,c);return c}}function e(a,b){return a&&b&&f(a)==f(b)}function f(a){return("object"===typeof a?a.origArray||a.googleCalendarId||a.url||a.events:null)||a}function h(a){var b={};g.each(a,function(a,c){/^_|^(id|allDay|start|end)$/.test(a)||void 0!==
c&&/undefined|null|boolean|number|string/.test(g.type(c))&&(b[a]=c)});return b}function l(a){return g.isFunction(a)?g.grep(D,a):null!=a?(a+="",g.grep(D,function(b){return b._id==a})):D}function k(){M++||B("loading",null,!0,L())}function p(){--M||B("loading",null,!1,L())}function u(b,c){var d={},e,f,h;a.eventDataTransform&&(b=a.eventDataTransform(b));c&&c.eventDataTransform&&(b=c.eventDataTransform(b));g.extend(d,b);c&&(d.source=c);d._id=b._id||(void 0===b.id?"_fc"+gb++:b.id+"");d.className=b.className?
"string"==typeof b.className?b.className.split(/\s+/):b.className:[];e=b.start||b.date;f=b.end;wa(e)&&(e=n.duration(e));wa(f)&&(f=n.duration(f));if(b.dow||n.isDuration(e)||n.isDuration(f))d.start=e?n.duration(e):null,d.end=f?n.duration(f):null,d._recurring=!0;else{if(e&&(e=s.moment(e),!e.isValid()))return!1;f&&(f=s.moment(f),f.isValid()||(f=null));h=b.allDay;void 0===h&&(h=I(c?c.allDayDefault:void 0,a.allDayDefault));d.start=e;d.end=f;d.allDay=h;A(d);Y(d)}return d}function A(b){null==b.allDay&&(b.allDay=
!(b.start.hasTime()||b.end&&b.end.hasTime()));b.allDay?(b.start.stripTime(),b.end&&b.end.stripTime()):(b.start.hasTime()||(b.start=s.rezoneDate(b.start)),b.end&&!b.end.hasTime()&&(b.end=s.rezoneDate(b.end)));b.end&&!b.end.isAfter(b.start)&&(b.end=null);b.end||(b.end=a.forceEventDuration?s.getDefaultEventEnd(b.allDay,b.start):null)}function v(a){var b;a.end||(b=a.allDay,null==b&&(b=!a.start.hasTime()),a={start:a.start,end:s.getDefaultEventEnd(b,a.start)});return a}function m(a,b,c){var d=[],e,f,h,
l,k,p;b=b||F;c=c||K;if(a)if(a._recurring){if(f=a.dow)for(e={},h=0;h<f.length;h++)e[f[h]]=!0;for(b=b.clone().stripTime();b.isBefore(c);){if(!e||e[b.day()])l=a.start,k=a.end,f=b.clone(),p=null,l&&(f=f.time(l)),k&&(p=b.clone().time(k)),h=g.extend({},a),l=!l&&!k,k=h,k.start=f,k.end=p,k.allDay=l,A(k),Y(k),d.push(h);b.add(1,"days")}}else d.push(a);return d}function q(a,b){var c={},d,e,f;b=b||{};b.start||(b.start=a.start.clone());void 0===b.end&&(b.end=a.end?a.end.clone():null);null==b.allDay&&(b.allDay=
a.allDay);A(b);d=null!==a._end&&null===b.end;e=b.allDay?Sa(b.start,a._start):T(b.start,a._start);!d&&b.end&&(f=T(b.end,b.start).subtract(T(a._end||s.getDefaultEventEnd(a._allDay,a._start),a._start)));g.each(b,function(a,b){/^_|^(id|allDay|start|end)$/.test(a)||void 0!==b&&(c[a]=b)});d=x(l(a._id),d,b.allDay,e,f,c);return{dateDelta:e,durationDelta:f,undo:d}}function x(a,b,c,d,e,f){var h=s.getIsAmbigTimezone(),l=[];d&&!d.valueOf()&&(d=null);e&&!e.valueOf()&&(e=null);g.each(a,function(a,k){var p,m;p=
{start:k.start.clone(),end:k.end?k.end.clone():null,allDay:k.allDay};g.each(f,function(a){p[a]=k[a]});m={start:k._start,end:k._end,allDay:k._allDay};b&&(m.end=null);m.allDay=c;A(m);d&&(m.start.add(d),m.end&&m.end.add(d));e&&(m.end||(m.end=s.getDefaultEventEnd(m.allDay,m.start)),m.end.add(e));h&&!m.allDay&&(d||e)&&(m.start.stripZone(),m.end&&m.end.stripZone());g.extend(k,f,m);Y(k);l.push(function(){g.extend(k,p);Y(k)})});return function(){for(var a=0;a<l.length;a++)l[a]()}}function w(){var b=a.businessHours,
c={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},d=s.getView(),e;b&&(e="object"===typeof b?g.extend({},c,b):c);return e?m(u(e),d.start,d.end):[]}function y(b,c){var d=c.source||{},e=I(c.constraint,d.constraint,a.eventConstraint),d=I(c.overlap,d.overlap,a.eventOverlap);b=v(b);return C(b,e,d,c)}function z(b){return C(b,a.selectConstraint,a.selectOverlap)}function C(a,b,c,d){var e,f;a={start:a.start.clone().stripZone(),end:a.end.clone().stripZone()};
if(null!=b){e="businessHours"===b?w():"object"===typeof b?m(u(b)):l(b);f=!1;for(b=0;b<e.length;b++){var h=e[b],g=a,k=h.start.clone().stripZone(),h=s.getEventEnd(h).stripZone();if(g.start>=k&&g.end<=h){f=!0;break}}if(!f)return!1}for(b=0;b<D.length;b++)if(e=D[b],!d||d._id!==e._id)if(k=e,f=a,g=k.start.clone().stripZone(),k=s.getEventEnd(k).stripZone(),f.start<k&&f.end>g&&(!1===c||"function"===typeof c&&!c(e,d)||d&&(f=I(e.overlap,(e.source||{}).overlap),!1===f||"function"===typeof f&&!f(d,e))))return!1;
return!0}var s=this;s.isFetchNeeded=function(a,b){return!F||a.clone().stripZone()<F.clone().stripZone()||b.clone().stripZone()>K.clone().stripZone()};s.fetchEvents=function(a,c){F=a;K=c;D=[];var d=++E,e=H.length;J=e;for(var f=0;f<e;f++)b(H[f],d)};s.addEventSource=function(a){if(a=d(a))H.push(a),J++,b(a,E)};s.removeEventSource=function(a){H=g.grep(H,function(b){return!e(b,a)});D=g.grep(D,function(b){return!e(b.source,a)});G(D)};s.updateEvent=function(a){a.start=s.moment(a.start);a.end=a.end?s.moment(a.end):
null;q(a,h(a));G(D)};s.renderEvent=function(a,b){var c=u(a),d,e;if(c){c=m(c);for(d=0;d<c.length;d++)e=c[d],e.source||(b&&(t.events.push(e),e.source=t),D.push(e));G(D);return c}return[]};s.removeEvents=function(a){var b,c;null==a?a=function(){return!0}:g.isFunction(a)||(b=a+"",a=function(a){return a._id==b});D=g.grep(D,a,!0);for(c=0;c<H.length;c++)g.isArray(H[c].events)&&(H[c].events=g.grep(H[c].events,a,!0));G(D)};s.clientEvents=l;s.mutateEvent=q;s.normalizeEventDateProps=A;s.ensureVisibleEventRange=
v;var B=s.trigger,L=s.getView,G=s.reportEvents,t={events:[]},H=[t],F,K,E=0,J=0,M=0,D=[];g.each((a.events?[a.events]:[]).concat(a.eventSources||[]),function(a,b){var c=d(b);c&&H.push(c)});s.getBusinessHoursEvents=w;s.isEventRangeAllowed=y;s.isSelectionRangeAllowed=z;s.isExternalDropRangeAllowed=function(a,b){var c;b&&(c=g.extend({},b,a),c=m(u(c))[0]);if(c)return y(a,c);a=v(a);return z(a)}}function Y(a){a._allDay=a.allDay;a._start=a.start.clone();a._end=a.end?a.end.clone():null}var Q={titleRangeSeparator:" \u2014 ",
monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",
today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:0.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},
cb={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}},r=g.fullCalendar={version:"2.2.5"},M=r.views={};g.fn.fullCalendar=function(a){var b=Array.prototype.slice.call(arguments,1),c=this;this.each(function(d,e){var f=g(e),h=f.data("fullCalendar");"string"===typeof a?
h&&g.isFunction(h[a])&&(h=h[a].apply(h,b),d||(c=h),"destroy"===a&&f.removeData("fullCalendar")):h||(h=new bb(f,a),f.data("fullCalendar",h),h.render())});return c};var O=r.langs={};r.datepickerLang=function(a,b,c){var d=O[a]||(O[a]={});d.isRTL=c.isRTL;d.weekNumberTitle=c.weekHeader;g.each(hb,function(a,b){d[a]=b(c)});g.datepicker&&(g.datepicker.regional[b]=g.datepicker.regional[a]=c,g.datepicker.regional.en=g.datepicker.regional[""],g.datepicker.setDefaults(c))};r.lang=function(a,b){var c,d;c=O[a]||
(O[a]={});b&&P(c,b);d=ma(a);g.each(ib,function(a,b){void 0===c[a]&&(c[a]=b(d,c))});Q.lang=a};var hb={defaultButtonText:function(a){return{prev:a.prevText.replace(/&.*?;/g,""),next:a.nextText.replace(/&.*?;/g,""),today:a.currentText.replace(/&.*?;/g,"")}},monthYearFormat:function(a){return a.showMonthAfterYear?"YYYY["+a.yearSuffix+"] MMMM":"MMMM YYYY["+a.yearSuffix+"]"}},ib={dayOfMonthFormat:function(a,b){var c=a.longDateFormat("l"),c=c.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");return c=b.isRTL?c+" ddd":
"ddd "+c},smallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(a){return a.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},noMeridiemTimeFormat:function(a){return a.longDateFormat("LT").replace(/\s*a$/i,"")}};r.lang("en",{dayPopoverFormat:"dddd, MMMM D"});r.intersectionToSeg=ba;r.applyAll=W;r.debounce=ea;var Ma="sun mon tue wed thu fri sat".split(" "),
va="year month week day hour minute second millisecond".split(" "),xa={}.hasOwnProperty,Ua=/^\s*\d{4}-\d\d$/,Va=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,x=n.fn,z=g.extend({},x),Na,ka,Oa;r.moment=function(){return fa(arguments)};r.moment.utc=function(){var a=fa(arguments,!0);a.hasTime()&&a.utc();return a};r.moment.parseZone=function(){return fa(arguments,!0,!0)};x.clone=function(){var a=z.clone.apply(this,arguments);za(this,a);this._fullCalendar&&
(a._fullCalendar=!0);return a};x.time=function(a){if(!this._fullCalendar)return z.time.apply(this,arguments);if(null==a)return n.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1;n.isDuration(a)||n.isMoment(a)||(a=n.duration(a));var b=0;n.isDuration(a)&&(b=24*Math.floor(a.asDays()));return this.hours(b+a.hours()).minutes(a.minutes()).seconds(a.seconds()).milliseconds(a.milliseconds())};x.stripTime=function(){var a;this._ambigTime||
(a=this.toArray(),this.utc(),ka(this,a.slice(0,3)),this._ambigZone=this._ambigTime=!0);return this};x.hasTime=function(){return!this._ambigTime};x.stripZone=function(){var a,b;this._ambigZone||(a=this.toArray(),b=this._ambigTime,this.utc(),ka(this,a),b&&(this._ambigTime=!0),this._ambigZone=!0);return this};x.hasZone=function(){return!this._ambigZone};x.zone=function(a){null!=a&&(this._ambigZone=this._ambigTime=!1);return z.zone.apply(this,arguments)};x.local=function(){var a=this.toArray(),b=this._ambigZone;
z.local.apply(this,arguments);b&&Oa(this,a);return this};x.format=function(){return this._fullCalendar&&arguments[0]?Ba(this,Ea(arguments[0])):this._ambigTime?J(this,"YYYY-MM-DD"):this._ambigZone?J(this,"YYYY-MM-DD[T]HH:mm:ss"):z.format.apply(this,arguments)};x.toISOString=function(){return this._ambigTime?J(this,"YYYY-MM-DD"):this._ambigZone?J(this,"YYYY-MM-DD[T]HH:mm:ss"):z.toISOString.apply(this,arguments)};x.isWithin=function(a,b){var c=ga([this,a,b]);return c[0]>=c[1]&&c[0]<c[2]};x.isSame=function(a,
b){var c;if(!this._fullCalendar)return z.isSame.apply(this,arguments);if(b)return c=ga([this,a],!0),z.isSame.call(c[0],c[1],b);a=r.moment.parseZone(a);return z.isSame.call(this,a)&&Boolean(this._ambigTime)===Boolean(a._ambigTime)&&Boolean(this._ambigZone)===Boolean(a._ambigZone)};g.each(["isBefore","isAfter"],function(a,b){x[b]=function(a,d){var e;if(!this._fullCalendar)return z[b].apply(this,arguments);e=ga([this,a]);return z[b].call(e[0],e[1],d)}});ka=(Na="_d"in n()&&"updateOffset"in n)?function(a,
b){a._d.setTime(Date.UTC.apply(Date,b));n.updateOffset(a,!1)}:Aa;Oa=Na?function(a,b){a._d.setTime(+new Date(b[0]||0,b[1]||0,b[2]||0,b[3]||0,b[4]||0,b[5]||0,b[6]||0));n.updateOffset(a,!1)}:Aa;var Ca={t:function(a){return J(a,"a").charAt(0)},T:function(a){return J(a,"A").charAt(0)}};r.formatRange=Da;var Wa={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},ia={};r.Class=G;G.extend=function(a){var b=this,c;a=a||{};xa.call(a,"constructor")&&
(c=a.constructor);"function"!==typeof c&&(c=a.constructor=function(){b.apply(this,arguments)});c.prototype=V(b.prototype);da(a,c.prototype);da(b,c);return c};G.mixin=function(a){da(a.prototype||a,this.prototype)};var jb=G.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(a){this.options=a||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||
(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var a=this,b=this.options;this.el=g('<div class="fc-popover"/>').addClass(b.className||"").css({top:0,left:0}).append(b.content).appendTo(b.parentEl);this.el.on("click",".fc-close",function(){a.hide()});if(b.autoHide)g(document).on("mousedown",this.documentMousedownProxy=g.proxy(this,"documentMousedown"))},documentMousedown:function(a){this.el&&!g(a.target).closest(this.el).length&&this.hide()},destroy:function(){this.hide();
this.el&&(this.el.remove(),this.el=null);g(document).off("mousedown",this.documentMousedownProxy)},position:function(){var a=this.options,b=this.el.offsetParent().offset(),c=this.el.outerWidth(),d=this.el.outerHeight(),e=g(window),f=sa(this.el),h,l,k,p;k=a.top||0;p=void 0!==a.left?a.left:void 0!==a.right?a.right-c:0;f.is(window)||f.is(document)?(f=e,l=h=0):(l=f.offset(),h=l.top,l=l.left);h+=e.scrollTop();l+=e.scrollLeft();!1!==a.viewportConstrain&&(k=Math.min(k,h+f.outerHeight()-d-this.margin),k=
Math.max(k,h+this.margin),p=Math.min(p,l+f.outerWidth()-c-this.margin),p=Math.max(p,l+this.margin));this.el.css({top:k-b.top,left:p-b.left})},trigger:function(a){this.options[a]&&this.options[a].apply(this,Array.prototype.slice.call(arguments,1))}}),kb=G.extend({grid:null,rowCoords:null,colCoords:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,constructor:function(a){this.grid=a},build:function(){this.rowCoords=this.grid.computeRowCoords();this.colCoords=this.grid.computeColCoords();
this.computeBounds()},clear:function(){this.colCoords=this.rowCoords=null},getCell:function(a,b){var c=this.rowCoords,d=this.colCoords,e=null,f=null,h,g;if(this.inBounds(a,b)){for(h=0;h<c.length;h++)if(g=c[h],b>=g.top&&b<g.bottom){e=h;break}for(h=0;h<d.length;h++)if(g=d[h],a>=g.left&&a<g.right){f=h;break}if(null!==e&&null!==f)return c=this.grid.getCell(e,f),c.grid=this.grid,c}return null},computeBounds:function(){var a;this.containerEl&&(a=this.containerEl.offset(),this.minX=a.left,this.maxX=a.left+
this.containerEl.outerWidth(),this.minY=a.top,this.maxY=a.top+this.containerEl.outerHeight())},inBounds:function(a,b){return this.containerEl?a>=this.minX&&a<this.maxX&&b>=this.minY&&b<this.maxY:!0}}),lb=G.extend({coordMaps:null,constructor:function(a){this.coordMaps=a},build:function(){var a=this.coordMaps,b;for(b=0;b<a.length;b++)a[b].build()},getCell:function(a,b){var c=this.coordMaps,d=null,e;for(e=0;e<c.length&&!d;e++)d=c[e].getCell(a,b);return d},clear:function(){var a=this.coordMaps,b;for(b=
0;b<a.length;b++)a[b].clear()}}),Z=G.extend({coordMap:null,options:null,isListening:!1,isDragging:!1,origCell:null,cell:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(a,b){this.coordMap=a;this.options=b||{}},mousedown:function(a){1!=a.which||a.ctrlKey||(a.preventDefault(),this.startListening(a),
this.options.distance||this.startDrag(a))},startListening:function(a){var b;this.isListening||(a&&this.options.scroll&&(b=sa(g(a.target)),b.is(window)||b.is(document)||(this.scrollEl=b,this.scrollHandlerProxy=ea(g.proxy(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),this.computeCoords(),a&&(this.origCell=b=this.getCell(a),this.mouseX0=a.pageX,this.mouseY0=a.pageY),g(document).on("mousemove",this.mousemoveProxy=g.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=
g.proxy(this,"mouseup")).on("selectstart",this.preventDefault),this.isListening=!0,this.trigger("listenStart",a))},computeCoords:function(){this.coordMap.build();this.computeScrollBounds()},mousemove:function(a){var b,c;this.isDragging||(b=this.options.distance||1,c=Math.pow(a.pageX-this.mouseX0,2)+Math.pow(a.pageY-this.mouseY0,2),c>=b*b&&this.startDrag(a));this.isDragging&&this.drag(a)},startDrag:function(a){this.isListening||this.startListening();this.isDragging||(this.isDragging=!0,this.trigger("dragStart",
a),(a=this.getCell(a))&&this.cellOver(a))},drag:function(a){var b;this.isDragging&&(b=this.getCell(a),Ha(b,this.cell)||(this.cell&&this.cellOut(),b&&this.cellOver(b)),this.dragScroll(a))},cellOver:function(a){this.cell=a;this.trigger("cellOver",a,Ha(a,this.origCell))},cellOut:function(){this.cell&&(this.trigger("cellOut",this.cell),this.cell=null)},mouseup:function(a){this.stopDrag(a);this.stopListening(a)},stopDrag:function(a){this.isDragging&&(this.stopScrolling(),this.trigger("dragStop",a),this.isDragging=
!1)},stopListening:function(a){this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),g(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mouseupProxy=this.mousemoveProxy=null,this.isListening=!1,this.trigger("listenStop",a),this.origCell=this.cell=null,this.coordMap.clear())},getCell:function(a){return this.coordMap.getCell(a.pageX,a.pageY)},trigger:function(a){this.options[a]&&
this.options[a].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(a){a.preventDefault()},computeScrollBounds:function(){var a=this.scrollEl,b;a&&(b=a.offset(),this.scrollBounds={top:b.top,left:b.left,bottom:b.top+a.outerHeight(),right:b.left+a.outerWidth()})},dragScroll:function(a){var b=this.scrollSensitivity,c=this.scrollBounds,d,e,f,h=0,g=0;c&&(d=(b-(a.pageY-c.top))/b,e=(b-(c.bottom-a.pageY))/b,f=(b-(a.pageX-c.left))/b,a=(b-(c.right-a.pageX))/b,0<=d&&1>=d?h=d*this.scrollSpeed*
-1:0<=e&&1>=e&&(h=e*this.scrollSpeed),0<=f&&1>=f?g=f*this.scrollSpeed*-1:0<=a&&1>=a&&(g=a*this.scrollSpeed));this.setScrollVel(h,g)},setScrollVel:function(a,b){this.scrollTopVel=a;this.scrollLeftVel=b;this.constrainScrollVel();!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(g.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var a=this.scrollEl;0>this.scrollTopVel?0>=a.scrollTop()&&(this.scrollTopVel=0):0<this.scrollTopVel&&
a.scrollTop()+a[0].clientHeight>=a[0].scrollHeight&&(this.scrollTopVel=0);0>this.scrollLeftVel?0>=a.scrollLeft()&&(this.scrollLeftVel=0):0<this.scrollLeftVel&&a.scrollLeft()+a[0].clientWidth>=a[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var a=this.scrollEl,b=this.scrollIntervalMs/1E3;this.scrollTopVel&&a.scrollTop(a.scrollTop()+this.scrollTopVel*b);this.scrollLeftVel&&a.scrollLeft(a.scrollLeft()+this.scrollLeftVel*b);this.constrainScrollVel();this.scrollTopVel||this.scrollLeftVel||
this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.computeCoords())},scrollHandler:function(){this.scrollIntervalId||this.computeCoords()}}),mb=G.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(a,b){this.options=b=b||{};this.sourceEl=a;this.parentEl=
b.parentEl?g(b.parentEl):a.parent()},start:function(a){this.isFollowing||(this.isFollowing=!0,this.mouseY0=a.pageY,this.mouseX0=a.pageX,this.leftDelta=this.topDelta=0,this.isHidden||this.updatePosition(),g(document).on("mousemove",this.mousemoveProxy=g.proxy(this,"mousemove")))},stop:function(a,b){function c(){this.isAnimating=!1;d.destroyEl();this.top0=this.left0=null;b&&b()}var d=this,e=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,g(document).off("mousemove",
this.mousemoveProxy),a&&e&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:e,complete:c})):c())},getEl:function(){var a=this.el;a||(this.sourceEl.width(),a=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl));return a},destroyEl:function(){this.el&&
(this.el.remove(),this.el=null)},updatePosition:function(){var a,b;this.getEl();null===this.top0&&(this.sourceEl.width(),a=this.sourceEl.offset(),b=this.el.offsetParent().offset(),this.top0=a.top-b.top,this.left0=a.left-b.left);this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a){this.topDelta=a.pageY-this.mouseY0;this.leftDelta=a.pageX-this.mouseX0;this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},
show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),Pa=G.extend({view:null,isRTL:null,cellHtml:"<td/>",constructor:function(a){this.view=a;this.isRTL=a.opt("isRTL")},rowHtml:function(a,b){var c=this.getHtmlRenderer("cell",a),d="",e,f;b=b||0;for(e=0;e<this.colCnt;e++)f=this.getCell(b,e),d+=c(f);d=this.bookendCells(d,a,b);return"<tr>"+d+"</tr>"},bookendCells:function(a,b,c){var d=this.getHtmlRenderer("intro",b)(c||0);c=this.getHtmlRenderer("outro",b)(c||0);
b=this.isRTL?c:d;d=this.isRTL?d:c;return"string"===typeof a?b+a+d:a.prepend(b).append(d)},getHtmlRenderer:function(a,b){var c=this.view,d,e,f,h;d=a+"Html";b&&(e=b+ya(a)+"Html");if(e&&(h=c[e]))f=c;else if(e&&(h=this[e]))f=this;else if(h=c[d])f=c;else if(h=this[d])f=this;return"function"===typeof h?function(){return h.apply(f,arguments)||""}:function(){return h||""}}}),B=r.Grid=Pa.extend({start:null,end:null,rowCnt:0,colCnt:0,rowData:null,colData:null,el:null,coordMap:null,elsByFill:null,documentDragStartProxy:null,
colHeadFormat:null,eventTimeFormat:null,displayEventEnd:null,constructor:function(){Pa.apply(this,arguments);this.coordMap=new kb(this);this.elsByFill={};this.documentDragStartProxy=g.proxy(this,"documentDragStart")},render:function(){this.bindHandlers()},destroy:function(){this.unbindHandlers()},computeColHeadFormat:function(){},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventEnd:function(){return!1},setRange:function(a){var b=this.view;this.start=a.start.clone();
this.end=a.end.clone();this.rowData=[];this.colData=[];this.updateCells();this.colHeadFormat=b.opt("columnFormat")||this.computeColHeadFormat();this.eventTimeFormat=b.opt("timeFormat")||this.computeEventTimeFormat();this.displayEventEnd=b.opt("displayEventEnd");null==this.displayEventEnd&&(this.displayEventEnd=this.computeDisplayEventEnd())},updateCells:function(){},rangeToSegs:function(a){},getCell:function(a,b){var c;null==b&&("number"===typeof a?(b=a%this.colCnt,a=Math.floor(a/this.colCnt)):(b=
a.col,a=a.row));c={row:a,col:b};g.extend(c,this.getRowData(a),this.getColData(b));g.extend(c,this.computeCellRange(c));return c},computeCellRange:function(a){},getRowData:function(a){return this.rowData[a]||{}},getColData:function(a){return this.colData[a]||{}},getRowEl:function(a){},getColEl:function(a){},getCellDayEl:function(a){return this.getColEl(a.col)||this.getRowEl(a.row)},computeRowCoords:function(){var a=[],b,c,d;for(b=0;b<this.rowCnt;b++)c=this.getRowEl(b),d={top:c.offset().top},0<b&&(a[b-
1].bottom=d.top),a.push(d);d.bottom=d.top+c.outerHeight();return a},computeColCoords:function(){var a=[],b,c,d;for(b=0;b<this.colCnt;b++)c=this.getColEl(b),d={left:c.offset().left},0<b&&(a[b-1].right=d.left),a.push(d);d.right=d.left+c.outerWidth();return a},bindHandlers:function(){var a=this;this.el.on("mousedown",function(b){g(b.target).is(".fc-event-container *, .fc-more")||g(b.target).closest(".fc-popover").length||a.dayMousedown(b)});this.bindSegHandlers();g(document).on("dragstart",this.documentDragStartProxy)},
unbindHandlers:function(){g(document).off("dragstart",this.documentDragStartProxy)},dayMousedown:function(a){var b=this,c=this.view,d=c.opt("selectable"),e,f,h=new Z(this.coordMap,{scroll:c.opt("dragScroll"),dragStart:function(){c.unselect()},cellOver:function(a,c){var g=h.origCell;g&&(e=c?a:null,d&&((f=b.computeSelection(g,a))?b.renderSelection(f):U()))},cellOut:function(a){f=e=null;b.destroySelection();F()},listenStop:function(a){e&&c.trigger("dayClick",b.getCellDayEl(e),e.start,a);f&&c.reportSelection(f,
a);F()}});h.mousedown(a)},renderRangeHelper:function(a,b){var c;c=b?V(b.event):{};c.start=a.start.clone();c.end=a.end?a.end.clone():null;c.allDay=null;this.view.calendar.normalizeEventDateProps(c);c.className=(c.className||[]).concat("fc-helper");b||(c.editable=!1);this.renderHelper(c,b)},renderHelper:function(a,b){},destroyHelper:function(){},renderSelection:function(a){this.renderHighlight(a)},destroySelection:function(){this.destroyHighlight()},computeSelection:function(a,b){var c=[a.start,a.end,
b.start,b.end];c.sort(Ta);c={start:c[0].clone(),end:c[3].clone()};return this.view.calendar.isSelectionRangeAllowed(c)?c:null},renderHighlight:function(a){this.renderFill("highlight",this.rangeToSegs(a))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(a,b){},destroyFill:function(a){var b=this.elsByFill[a];b&&(b.remove(),delete this.elsByFill[a])},renderFillSegEls:function(a,b){var c=this,d=this[a+"SegEl"],e="",
f=[],h;if(b.length){for(h=0;h<b.length;h++)e+=this.fillSegHtml(a,b[h]);g(e).each(function(a,e){var h=b[a],u=g(e);d&&(u=d.call(c,h,u));u&&(u=g(u),u.is(c.fillSegTag)&&(h.el=u,f.push(h)))})}return f},fillSegTag:"div",fillSegHtml:function(a,b){var c=this[a+"SegClasses"],d=this[a+"SegStyles"],c=c?c.call(this,b):[],d=d?d.call(this,b):"";return"<"+this.fillSegTag+(c.length?' class="'+c.join(" ")+'"':"")+(d?' style="'+d+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+
'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(a){a=a.start;return'<th class="fc-day-header '+this.view.widgetHeaderClass+" fc-"+Ma[a.day()]+'">'+y(a.format(this.colHeadFormat))+"</th>"},bgCellHtml:function(a){var b=this.view;a=a.start;var c=this.getDayClasses(a);c.unshift("fc-day",b.widgetContentClass);return'<td class="'+c.join(" ")+'" data-date="'+a.format("YYYY-MM-DD")+'"></td>'},getDayClasses:function(a){var b=this.view,c=b.calendar.getNow().stripTime(),
d=["fc-"+Ma[a.day()]];"month"===b.name&&a.month()!=b.intervalStart.month()&&d.push("fc-other-month");a.isSame(c,"day")?d.push("fc-today",b.highlightStateClass):a<c?d.push("fc-past"):d.push("fc-future");return d}});B.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,segs:null,renderEvents:function(a){a=this.eventsToSegs(a);var b=[],c=[],d,e;for(d=0;d<a.length;d++){e=a[d];var f=Ia(e.event);"background"===f||"inverse-background"===f?b.push(e):c.push(e)}b=this.renderBgSegs(b)||b;c=this.renderFgSegs(c)||
c;this.segs=b.concat(c)},destroyEvents:function(){this.triggerSegMouseout();this.destroyFgSegs();this.destroyBgSegs();this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(a){},destroyFgSegs:function(){},renderFgSegEls:function(a,b){var c=this.view,d="",e=[],f;if(a.length){for(f=0;f<a.length;f++)d+=this.fgSegHtml(a[f],b);g(d).each(function(b,d){var f=a[b],p=c.resolveEventEl(f.event,g(d));p&&(p.data("fc-seg",f),f.el=p,e.push(f))})}return e},fgSegHtml:function(a,b){},renderBgSegs:function(a){return this.renderFill("bgEvent",
a)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(a,b){return this.view.resolveEventEl(a.event,b)},bgEventSegClasses:function(a){a=a.event;return["fc-bgevent"].concat(a.className,(a.source||{}).className||[])},bgEventSegStyles:function(a){var b=this.view;a=a.event;var c=a.source||{},d=a.color,e=c.color,f=b.opt("eventColor");return(b=a.backgroundColor||d||c.backgroundColor||e||b.opt("eventBackgroundColor")||f)?"background-color:"+b:""},businessHoursSegClasses:function(a){return["fc-nonbusiness",
"fc-bgevent"]},bindSegHandlers:function(){var a=this,b=this.view;g.each({mouseenter:function(b,d){a.triggerSegMouseover(b,d)},mouseleave:function(b,d){a.triggerSegMouseout(b,d)},click:function(a,d){return b.trigger("eventClick",this,a.event,d)},mousedown:function(c,d){g(d.target).is(".fc-resizer")&&b.isEventResizable(c.event)?a.segResizeMousedown(c,d):b.isEventDraggable(c.event)&&a.segDragMousedown(c,d)}},function(b,d){a.el.on(b,".fc-event-container > *",function(b){var c=g(this).data("fc-seg");if(c&&
!a.isDraggingSeg&&!a.isResizingSeg)return d.call(this,c,b)})})},triggerSegMouseover:function(a,b){this.mousedOverSeg||(this.mousedOverSeg=a,this.view.trigger("eventMouseover",a.el[0],a.event,b))},triggerSegMouseout:function(a,b){b=b||{};this.mousedOverSeg&&(a=a||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",a.el[0],a.event,b))},segDragMousedown:function(a,b){var c=this,d=this.view,e=a.el,f=a.event,h,g=new mb(a.el,{parentEl:d.el,opacity:d.opt("dragOpacity"),revertDuration:d.opt("dragRevertDuration"),
zIndex:2}),k=new Z(d.coordMap,{distance:5,scroll:d.opt("dragScroll"),listenStart:function(a){g.hide();g.start(a)},dragStart:function(b){c.triggerSegMouseout(a,b);c.isDraggingSeg=!0;d.hideEvent(f);d.trigger("eventDragStart",e[0],f,b,{})},cellOver:function(b,e){(h=c.computeEventDrop(a.cell||k.origCell,b,f))?(d.renderDrag(h,a)?g.hide():g.show(),e&&(h=null)):(g.show(),U())},cellOut:function(){h=null;d.destroyDrag();g.show();F()},dragStop:function(a){g.stop(!h,function(){c.isDraggingSeg=!1;d.destroyDrag();
d.showEvent(f);d.trigger("eventDragStop",e[0],f,a,{});h&&d.reportEventDrop(f,h,e,a)});F()},listenStop:function(){g.stop()}});k.mousedown(b)},computeEventDrop:function(a,b,c){var d=a.start;a=b.start;d.hasTime()===a.hasTime()?(a=T(a,d),b=c.start.clone().add(a),d=null===c.end?null:c.end.clone().add(a),a=c.allDay):(b=a.clone(),d=null,a=!a.hasTime());b={start:b,end:d,allDay:a};return this.view.calendar.isEventRangeAllowed(b,c)?b:null},documentDragStart:function(a,b){var c=this.view,d;c.opt("droppable")&&
(d=g(a.target),c=c.opt("dropAccept"),(g.isFunction(c)?c.call(d[0],d):d.is(c))&&this.startExternalDrag(d,a,b))},startExternalDrag:function(a,b,c){var d=this,e=Za(a),f;c=new Z(this.coordMap,{cellOver:function(a){(f=d.computeExternalDrop(a,e))?d.renderDrag(f):U()},cellOut:function(){f=null;d.destroyDrag();F()}});g(document).one("dragstop",function(b,c){d.destroyDrag();F();f&&d.view.reportExternalDrop(e,f,a,b,c)});c.startDrag(b)},computeExternalDrop:function(a,b){var c={start:a.start.clone(),end:null};
b.startTime&&!c.start.hasTime()&&c.start.time(b.startTime);b.duration&&(c.end=c.start.clone().add(b.duration));return this.view.calendar.isExternalDropRangeAllowed(c,b.eventProps)?c:null},renderDrag:function(a,b){},destroyDrag:function(){},segResizeMousedown:function(a,b){var c=this,d=this.view,e=d.calendar,f=a.el,h=a.event,g=h.start,k=e.getEventEnd(h),p;(new Z(this.coordMap,{distance:5,scroll:d.opt("dragScroll"),dragStart:function(b){c.triggerSegMouseout(a,b);c.isResizingSeg=!0;d.trigger("eventResizeStart",
f[0],h,b,{})},cellOver:function(b){p=b.end;p.isAfter(g)||(p=g.clone().add(T(b.end,b.start)));p.isSame(k)?p=null:e.isEventRangeAllowed({start:g,end:p},h)?(c.renderEventResize({start:g,end:p},a),d.hideEvent(h)):(p=null,U())},cellOut:function(){p=null;c.destroyEventResize();d.showEvent(h);F()},dragStop:function(a){c.isResizingSeg=!1;c.destroyEventResize();d.showEvent(h);F();d.trigger("eventResizeStop",f[0],h,a,{});p&&d.reportEventResize(h,p,f,a)}})).mousedown(b)},renderEventResize:function(a,b){},destroyEventResize:function(){},
getEventTimeText:function(a,b){b=b||this.eventTimeFormat;return a.end&&this.displayEventEnd?this.view.formatRange(a,b):a.start.format(b)},getSegClasses:function(a,b,c){var d=a.event;a=["fc-event",a.isStart?"fc-start":"fc-not-start",a.isEnd?"fc-end":"fc-not-end"].concat(d.className,d.source?d.source.className:[]);b&&a.push("fc-draggable");c&&a.push("fc-resizable");return a},getEventSkinCss:function(a){var b=this.view,c=a.source||{},d=a.color,e=c.color,f=b.opt("eventColor"),h=a.backgroundColor||d||
c.backgroundColor||e||b.opt("eventBackgroundColor")||f,d=a.borderColor||d||c.borderColor||e||b.opt("eventBorderColor")||f;a=a.textColor||c.textColor||b.opt("eventTextColor");b=[];h&&b.push("background-color:"+h);d&&b.push("border-color:"+d);a&&b.push("color:"+a);return b.join(";")},eventsToSegs:function(a,b){var c=this.eventsToRanges(a),d=[],e;for(e=0;e<c.length;e++)d.push.apply(d,this.eventRangeToSegs(c[e],b));return d},eventsToRanges:function(a){var b=this;a=Xa(a);var c=[];g.each(a,function(a,e){e.length&&
c.push.apply(c,"inverse-background"===Ia(e[0])?b.eventsToInverseRanges(e):b.eventsToNormalRanges(e))});return c},eventsToNormalRanges:function(a){var b=this.view.calendar,c=[],d,e,f,h;for(d=0;d<a.length;d++)e=a[d],f=e.start.clone().stripZone(),h=b.getEventEnd(e).stripZone(),c.push({event:e,start:f,end:h,eventStartMS:+f,eventDurationMS:h-f});return c},eventsToInverseRanges:function(a){var b=this.view,c=b.start.clone().stripZone(),b=b.end.clone().stripZone(),d=this.eventsToNormalRanges(a),e=[];a=a[0];
var f,h;d.sort(Ya);for(f=0;f<d.length;f++)h=d[f],h.start>c&&e.push({event:a,start:c,end:h.start}),c=h.end;c<b&&e.push({event:a,start:c,end:b});return e},eventRangeToSegs:function(a,b){var c,d,e;c=b?b(a):this.rangeToSegs(a);for(d=0;d<c.length;d++)e=c[d],e.event=a.event,e.eventStartMS=a.eventStartMS,e.eventDurationMS=a.eventDurationMS;return c}});r.compareSegs=X;r.dataAttrPrefix="";var $=B.extend({numbersVisible:!1,bottomCoordPadding:0,breakOnWeeks:null,cellDates:null,dayToCellOffsets:null,rowEls:null,
dayEls:null,helperEls:null,render:function(a){var b=this.view,c=this.rowCnt,d=c*this.colCnt,e="",f;for(f=0;f<c;f++)e+=this.dayRowHtml(f,a);this.el.html(e);this.rowEls=this.el.find(".fc-row");this.dayEls=this.el.find(".fc-day");for(a=0;a<d;a++)c=this.getCell(a),b.trigger("dayRender",null,c.start,this.dayEls.eq(a));B.prototype.render.call(this)},destroy:function(){this.destroySegPopover();B.prototype.destroy.call(this)},dayRowHtml:function(a,b){var c=["fc-row","fc-week",this.view.widgetContentClass];
b&&c.push("fc-rigid");return'<div class="'+c.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",a)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",a)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a){return this.bgCellHtml(a)},computeColHeadFormat:function(){return 1<this.rowCnt?"ddd":1<this.colCnt?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},
computeDisplayEventEnd:function(){return 1==this.colCnt},updateCells:function(){var a,b,c;this.updateCellDates();a=this.cellDates;if(this.breakOnWeeks){b=a[0].day();for(c=1;c<a.length&&a[c].day()!=b;c++);b=Math.ceil(a.length/c)}else b=1,c=a.length;this.rowCnt=b;this.colCnt=c},updateCellDates:function(){for(var a=this.view,b=this.start.clone(),c=[],d=-1,e=[];b.isBefore(this.end);)a.isHiddenDay(b)?e.push(d+0.5):(d++,e.push(d),c.push(b.clone())),b.add(1,"days");this.cellDates=c;this.dayToCellOffsets=
e},computeCellRange:function(a){var b=this.colCnt;a=this.cellDates[a.row*b+(this.isRTL?b-a.col-1:a.col)].clone();b=a.clone().add(1,"day");return{start:a,end:b}},getRowEl:function(a){return this.rowEls.eq(a)},getColEl:function(a){return this.dayEls.eq(a)},getCellDayEl:function(a){return this.dayEls.eq(a.row*this.colCnt+a.col)},computeRowCoords:function(){var a=B.prototype.computeRowCoords.call(this);a[a.length-1].bottom+=this.bottomCoordPadding;return a},rangeToSegs:function(a){var b=this.isRTL,c=
this.rowCnt,d=this.colCnt,e=[],f,h,g,k,p,u,n;a=this.view.computeDayRange(a);f=this.dateToCellOffset(a.start);a=this.dateToCellOffset(a.end.subtract(1,"days"));for(h=0;h<c;h++)g=h*d,k=g+d-1,n=Math.max(g,f),k=Math.min(k,a),n=Math.ceil(n),k=Math.floor(k),n<=k&&(p=n===f,u=k===a,n-=g,k-=g,g={row:h,isStart:p,isEnd:u},b?(g.leftCol=d-k-1,g.rightCol=d-n-1):(g.leftCol=n,g.rightCol=k),e.push(g));return e},dateToCellOffset:function(a){var b=this.dayToCellOffsets;a=a.diff(this.start,"days");return 0>a?b[0]-1:
a>=b.length?b[b.length-1]+1:b[a]},renderDrag:function(a,b){var c;this.renderHighlight(this.view.calendar.ensureVisibleEventRange(a));if(b&&!b.el.closest(this.el).length)return this.renderRangeHelper(a,b),c=this.view.opt("dragOpacity"),void 0!==c&&this.helperEls.css("opacity",c),!0},destroyDrag:function(){this.destroyHighlight();this.destroyHelper()},renderEventResize:function(a,b){this.renderHighlight(a);this.renderRangeHelper(a,b)},destroyEventResize:function(){this.destroyHighlight();this.destroyHelper()},
renderHelper:function(a,b){var c=[],d=this.eventsToSegs([a]),e,d=this.renderFgSegEls(d);e=this.renderSegRows(d);this.rowEls.each(function(a,d){var l=g(d),k=g('<div class="fc-helper-skeleton"><table/></div>'),p;p=b&&b.row===a?b.el.position().top:l.find(".fc-content-skeleton tbody").position().top;k.css("top",p).find("table").append(e[a].tbodyEl);l.append(k);c.push(k[0])});this.helperEls=g(c)},destroyHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(a,
b){var c=[],d,e,f;b=this.renderFillSegEls(a,b);for(d=0;d<b.length;d++)e=b[d],f=this.renderFillRow(a,e),this.rowEls.eq(e.row).append(f),c.push(f[0]);this.elsByFill[a]=g(c);return b},renderFillRow:function(a,b){var c=this.colCnt,d=b.leftCol,e=b.rightCol+1,f,h;f=g('<div class="fc-'+a.toLowerCase()+'-skeleton"><table><tr/></table></div>');h=f.find("tr");0<d&&h.append('<td colspan="'+d+'"/>');h.append(b.el.attr("colspan",e-d));e<c&&h.append('<td colspan="'+(c-e)+'"/>');this.bookendCells(h,a);return f}});
$.mixin({rowStructs:null,destroyEvents:function(){this.destroySegPopover();B.prototype.destroyEvents.apply(this,arguments)},getEventSegs:function(){return B.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(a){a=g.grep(a,function(a){return a.event.allDay});return B.prototype.renderBgSegs.call(this,a)},renderFgSegs:function(a){var b;a=this.renderFgSegEls(a);b=this.rowStructs=this.renderSegRows(a);this.rowEls.each(function(a,d){g(d).find(".fc-content-skeleton > table").append(b[a].tbodyEl)});
return a},destroyFgSegs:function(){for(var a=this.rowStructs||[],b;b=a.pop();)b.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(a){var b=[],c;a=this.groupSegRows(a);for(c=0;c<a.length;c++)b.push(this.renderSegRow(c,a[c]));return b},fgSegHtml:function(a,b){var c=this.view,d=a.event,e=c.isEventDraggable(d),c=!b&&d.allDay&&a.isEnd&&c.isEventResizable(d),e=this.getSegClasses(a,e,c),f=this.getEventSkinCss(d),h="",g;e.unshift("fc-day-grid-event");!d.allDay&&a.isStart&&(h='<span class="fc-time">'+
y(this.getEventTimeText(d))+"</span>");g='<span class="fc-title">'+(y(d.title||"")||"&nbsp;")+"</span>";return'<a class="'+e.join(" ")+'"'+(d.url?' href="'+y(d.url)+'"':"")+(f?' style="'+f+'"':"")+'><div class="fc-content">'+(this.isRTL?g+" "+h:h+" "+g)+"</div>"+(c?'<div class="fc-resizer"/>':"")+"</a>"},renderSegRow:function(a,b){function c(a){for(;v<a;)(w=(p[n-1]||[])[v])?w.attr("rowspan",parseInt(w.attr("rowspan")||1,10)+1):(w=g("<td/>"),m.append(w)),k[n][v]=w,p[n][v]=w,v++}var d=this.colCnt,e=
this.buildSegLevels(b),f=Math.max(1,e.length),h=g("<tbody/>"),l=[],k=[],p=[],n,A,v,m,q,r,w;for(n=0;n<f;n++){A=e[n];v=0;m=g("<tr/>");l.push([]);k.push([]);p.push([]);if(A)for(q=0;q<A.length;q++){r=A[q];c(r.leftCol);w=g('<td class="fc-event-container"/>').append(r.el);for(r.leftCol!=r.rightCol?w.attr("colspan",r.rightCol-r.leftCol+1):p[n][v]=w;v<=r.rightCol;)k[n][v]=w,l[n][v]=r,v++;m.append(w)}c(d);this.bookendCells(m,"eventSkeleton");h.append(m)}return{row:a,tbodyEl:h,cellMatrix:k,segMatrix:l,segLevels:e,
segs:b}},buildSegLevels:function(a){var b=[],c,d,e;a.sort(X);for(c=0;c<a.length;c++){d=a[c];for(e=0;e<b.length;e++){var f;a:{f=b[e];for(var g=void 0,l=void 0,g=0;g<f.length;g++)if(l=f[g],l.leftCol<=d.rightCol&&l.rightCol>=d.leftCol){f=!0;break a}f=!1}if(!f)break}d.level=e;(b[e]||(b[e]=[])).push(d)}for(e=0;e<b.length;e++)b[e].sort($a);return b},groupSegRows:function(a){var b=[],c;for(c=0;c<this.rowCnt;c++)b.push([]);for(c=0;c<a.length;c++)b[a[c].row].push(a[c]);return b}});$.mixin({segPopover:null,
popoverSegs:null,destroySegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(a){var b=this.rowStructs||[],c,d;for(c=0;c<b.length;c++)this.unlimitRow(c),d=a?"number"===typeof a?a:this.computeRowLevelLimit(c):!1,!1!==d&&this.limitRow(c,d)},computeRowLevelLimit:function(a){var b=this.rowEls.eq(a).height();a=this.rowStructs[a].tbodyEl.children();var c,d;for(c=0;c<a.length;c++)if(d=a.eq(c).removeClass("fc-limited"),d.position().top+d.outerHeight()>b)return c;return!1},limitRow:function(a,
b){function c(c){for(;h<c;)l=d.getCell(a,h),m=d.getCellSegs(l,b),m.length&&(w=p[b-1][h],B=d.renderMoreLink(l,m),s=g("<div/>").append(B),w.append(s),f.push(s[0])),h++}var d=this,e=this.rowStructs[a],f=[],h=0,l,k,p,n,r,v,m,q,x,w,y,z,C,s,B;if(b&&b<e.segLevels.length){k=e.segLevels[b-1];p=e.cellMatrix;n=e.tbodyEl.children().slice(b).addClass("fc-limited").get();for(r=0;r<k.length;r++){v=k[r];c(v.leftCol);x=[];for(q=0;h<=v.rightCol;)l=this.getCell(a,h),m=this.getCellSegs(l,b),x.push(m),q+=m.length,h++;
if(q){w=p[b-1][v.leftCol];q=w.attr("rowspan")||1;y=[];for(z=0;z<x.length;z++)C=g('<td class="fc-more-cell"/>').attr("rowspan",q),m=x[z],l=this.getCell(a,v.leftCol+z),B=this.renderMoreLink(l,[v].concat(m)),s=g("<div/>").append(B),C.append(s),y.push(C[0]),f.push(C[0]);w.addClass("fc-limited").after(g(y));n.push(w[0])}}c(this.colCnt);e.moreEls=g(f);e.limitedEls=g(n)}},unlimitRow:function(a){a=this.rowStructs[a];a.moreEls&&(a.moreEls.remove(),a.moreEls=null);a.limitedEls&&(a.limitedEls.removeClass("fc-limited"),
a.limitedEls=null)},renderMoreLink:function(a,b){var c=this,d=this.view;return g('<a class="fc-more"/>').text(this.getMoreLinkText(b.length)).on("click",function(e){var f=d.opt("eventLimitClick"),h=a.start,l=g(this),k=c.getCellDayEl(a),p=c.getCellSegs(a),p=c.resliceDaySegs(p,h),n=c.resliceDaySegs(b,h);"function"===typeof f&&(f=d.trigger("eventLimitClick",null,{date:h,dayEl:k,moreEl:l,segs:p,hiddenSegs:n},e));"popover"===f?c.showSegPopover(a,l,p):"string"===typeof f&&d.calendar.zoomTo(h,f)})},showSegPopover:function(a,
b,c){var d=this,e=this.view;b=b.parent();var f;f=1==this.rowCnt?e.el:this.rowEls.eq(a.row);a={className:"fc-more-popover",content:this.renderSegPopoverContent(a,c),parentEl:this.el,top:f.offset().top,autoHide:!0,viewportConstrain:e.opt("popoverViewportConstrain"),hide:function(){d.segPopover.destroy();d.segPopover=null;d.popoverSegs=null}};this.isRTL?a.right=b.offset().left+b.outerWidth()+1:a.left=b.offset().left-1;this.segPopover=new jb(a);this.segPopover.show()},renderSegPopoverContent:function(a,
b){var c=this.view,d=c.opt("theme"),e=a.start.format(c.opt("dayPopoverFormat")),c=g('<div class="fc-header '+c.widgetHeaderClass+'"><span class="fc-close '+(d?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+y(e)+'</span><div class="fc-clear"/></div><div class="fc-body '+c.widgetContentClass+'"><div class="fc-event-container"></div></div>'),d=c.find(".fc-event-container");this.popoverSegs=b=this.renderFgSegEls(b,!0);for(e=0;e<b.length;e++)b[e].cell=a,d.append(b[e].el);
return c},resliceDaySegs:function(a,b){var c=g.map(a,function(a){return a.event}),d=b.clone().stripTime(),e=d.clone().add(1,"days"),f={start:d,end:e};return this.eventsToSegs(c,function(a){return(a=ba(a,f))?[a]:[]})},getMoreLinkText:function(a){var b=this.view.opt("eventLimitText");return"function"===typeof b?b(a):"+"+a+" "+b},getCellSegs:function(a,b){for(var c=this.rowStructs[a.row].segMatrix,d=b||0,e=[],f;d<c.length;)(f=c[d][a.col])&&e.push(f),d++;return e}});var Qa=B.extend({slotDuration:null,
snapDuration:null,minTime:null,maxTime:null,axisFormat:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,constructor:function(){B.apply(this,arguments);this.processOptions()},render:function(){this.el.html(this.renderHtml());this.dayEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr");this.computeSlatTops();this.renderBusinessHours();B.prototype.render.call(this)},renderBusinessHours:function(){var a=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=
this.renderFill("businessHours",this.eventsToSegs(a),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a){return this.bgCellHtml(a)},slatRowHtml:function(){for(var a=this.view,b=this.isRTL,c="",d=0===this.slotDuration.asMinutes()%15,e=n.duration(+this.minTime),f,g;e<this.maxTime;)f=this.start.clone().time(e),g=f.minutes(),f='<td class="fc-axis fc-time '+
a.widgetContentClass+'" '+a.axisStyleAttr()+">"+(d&&g?"":"<span>"+y(f.format(this.axisFormat))+"</span>")+"</td>",c+="<tr "+(g?'class="fc-minor"':"")+">"+(b?"":f)+'<td class="'+a.widgetContentClass+'"/>'+(b?f:"")+"</tr>",e.add(this.slotDuration);return c},processOptions:function(){var a=this.view,b=a.opt("slotDuration"),c=a.opt("snapDuration"),b=n.duration(b),c=c?n.duration(c):b;this.slotDuration=b;this.snapDuration=c;this.minTime=n.duration(a.opt("minTime"));this.maxTime=n.duration(a.opt("maxTime"));
this.axisFormat=a.opt("axisFormat")||a.opt("smallTimeFormat")},computeColHeadFormat:function(){return 1<this.colCnt?this.view.opt("dayOfMonthFormat"):"dddd"},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},updateCells:function(){var a=this.view,b=[],c;for(c=this.start.clone();c.isBefore(this.end);)b.push({day:c.clone()}),c.add(1,"day"),c=a.skipHiddenDays(c);this.isRTL&&b.reverse();this.colData=b;this.colCnt=b.length;this.rowCnt=
Math.ceil((this.maxTime-this.minTime)/this.snapDuration)},computeCellRange:function(a){var b=this.computeSnapTime(a.row);a=this.view.calendar.rezoneDate(a.day).time(b);b=a.clone().add(this.snapDuration);return{start:a,end:b}},getColEl:function(a){return this.dayEls.eq(a)},computeSnapTime:function(a){return n.duration(this.minTime+this.snapDuration*a)},rangeToSegs:function(a){var b=this.colCnt,c=[],d,e;a={start:a.start.clone().stripZone(),end:a.end.clone().stripZone()};for(e=0;e<b;e++)if(d=this.colData[e].day,
d={start:d.clone().time(this.minTime),end:d.clone().time(this.maxTime)},d=ba(a,d))d.col=e,c.push(d);return c},resize:function(){this.computeSlatTops();this.updateSegVerticals()},computeRowCoords:function(){var a=this.el.offset().top,b=[],c,d;for(c=0;c<this.rowCnt;c++)d={top:a+this.computeTimeTop(this.computeSnapTime(c))},0<c&&(b[c-1].bottom=d.top),b.push(d);d.bottom=d.top+this.computeTimeTop(this.computeSnapTime(c));return b},computeDateTop:function(a,b){return this.computeTimeTop(n.duration(a.clone().stripZone()-
b.clone().stripTime()))},computeTimeTop:function(a){var b=(a-this.minTime)/this.slotDuration,c,b=Math.max(0,b),b=Math.min(this.slatEls.length,b);a=Math.floor(b);b-=a;c=this.slatTops[a];return b?(a=this.slatTops[a+1],c+(a-c)*b):c},computeSlatTops:function(){var a=[],b;this.slatEls.each(function(c,d){b=g(d).position().top;a.push(b)});a.push(b+this.slatEls.last().outerHeight());this.slatTops=a},renderDrag:function(a,b){var c;if(b)return this.renderRangeHelper(a,b),c=this.view.opt("dragOpacity"),void 0!==
c&&this.helperEl.css("opacity",c),!0;this.renderHighlight(this.view.calendar.ensureVisibleEventRange(a))},destroyDrag:function(){this.destroyHelper();this.destroyHighlight()},renderEventResize:function(a,b){this.renderRangeHelper(a,b)},destroyEventResize:function(){this.destroyHelper()},renderHelper:function(a,b){var c=this.eventsToSegs([a]),d,e,f,h,c=this.renderFgSegEls(c);d=this.renderSegTable(c);for(e=0;e<c.length;e++)f=c[e],b&&b.col===f.col&&(h=b.el,f.el.css({left:h.css("left"),right:h.css("right"),
"margin-left":h.css("margin-left"),"margin-right":h.css("margin-right")}));this.helperEl=g('<div class="fc-helper-skeleton"/>').append(d).appendTo(this.el)},destroyHelper:function(){this.helperEl&&(this.helperEl.remove(),this.helperEl=null)},renderSelection:function(a){this.view.opt("selectHelper")?this.renderRangeHelper(a):this.renderHighlight(a)},destroySelection:function(){this.destroyHelper();this.destroyHighlight()},renderFill:function(a,b,c){var d,e,f,h,l,k,p,n,r;if(b.length){b=this.renderFillSegEls(a,
b);d=this.groupSegCols(b);c=c||a.toLowerCase();e=g('<div class="fc-'+c+'-skeleton"><table><tr/></table></div>');f=e.find("tr");for(h=0;h<d.length;h++)if(l=d[h],k=g("<td/>").appendTo(f),l.length)for(k=g('<div class="fc-'+c+'-container"/>').appendTo(k),p=this.colData[h].day,n=0;n<l.length;n++)r=l[n],k.append(r.el.css({top:this.computeDateTop(r.start,p),bottom:-this.computeDateTop(r.end,p)}));this.bookendCells(f,a);this.el.append(e);this.elsByFill[a]=e}return b}});Qa.mixin({eventSkeletonEl:null,renderFgSegs:function(a){a=
this.renderFgSegEls(a);this.el.append(this.eventSkeletonEl=g('<div class="fc-content-skeleton"/>').append(this.renderSegTable(a)));return a},destroyFgSegs:function(a){this.eventSkeletonEl&&(this.eventSkeletonEl.remove(),this.eventSkeletonEl=null)},renderSegTable:function(a){var b=g("<table><tr/></table>"),c=b.find("tr"),d,e,f,h,l;d=this.groupSegCols(a);this.computeSegVerticals(a);for(a=0;a<d.length;a++){f=h=d[a];l=e=e=void 0;f.sort(X);e=f;f=[];var k=l=void 0,p=void 0;for(l=0;l<e.length;l++){k=e[l];
for(p=0;p<f.length&&Ka(k,f[p]).length;p++);k.level=p;(f[p]||(f[p]=[])).push(k)}f=e=f;var n=p=k=l=void 0,r=void 0;for(l=0;l<f.length;l++)for(k=f[l],p=0;p<k.length;p++)for(n=k[p],n.forwardSegs=[],r=l+1;r<f.length;r++)Ka(n,f[r],n.forwardSegs);if(e=e[0]){for(l=0;l<e.length;l++)Ja(e[l]);for(l=0;l<e.length;l++)ja(e[l],0,0)}l=g('<div class="fc-event-container"/>');for(e=0;e<h.length;e++)f=h[e],f.el.css(this.generateSegPositionCss(f)),30>f.bottom-f.top&&f.el.addClass("fc-short"),l.append(f.el);c.append(g("<td/>").append(l))}this.bookendCells(c,
"eventSkeleton");return b},updateSegVerticals:function(){var a=(this.segs||[]).concat(this.businessHourSegs||[]),b;this.computeSegVerticals(a);for(b=0;b<a.length;b++)a[b].el.css(this.generateSegVerticalCss(a[b]))},computeSegVerticals:function(a){var b,c;for(b=0;b<a.length;b++)c=a[b],c.top=this.computeDateTop(c.start,c.start),c.bottom=this.computeDateTop(c.end,c.start)},fgSegHtml:function(a,b){var c=this.view,d=a.event,e=c.isEventDraggable(d),f=!b&&a.isEnd&&c.isEventResizable(d),e=this.getSegClasses(a,
e,f),g=this.getEventSkinCss(d),l,k,n;e.unshift("fc-time-grid-event");if(c.isMultiDayEvent(d)){if(a.isStart||a.isEnd)l=this.getEventTimeText(a),k=this.getEventTimeText(a,"LT"),n=this.getEventTimeText({start:a.start})}else l=this.getEventTimeText(d),k=this.getEventTimeText(d,"LT"),n=this.getEventTimeText({start:d.start});return'<a class="'+e.join(" ")+'"'+(d.url?' href="'+y(d.url)+'"':"")+(g?' style="'+g+'"':"")+'><div class="fc-content">'+(l?'<div class="fc-time" data-start="'+y(n)+'" data-full="'+
y(k)+'"><span>'+y(l)+"</span></div>":"")+(d.title?'<div class="fc-title">'+y(d.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(f?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(a){var b=this.view.opt("slotEventOverlap"),c=a.backwardCoord,d=a.forwardCoord,e=this.generateSegVerticalCss(a),f;b&&(d=Math.min(1,c+2*(d-c)));this.isRTL?f=1-d:(f=c,c=1-d);e.zIndex=a.level+1;e.left=100*f+"%";e.right=100*c+"%";b&&a.forwardPressure&&(e[this.isRTL?"marginLeft":"marginRight"]=20);return e},
generateSegVerticalCss:function(a){return{top:a.top,bottom:-a.bottom}},groupSegCols:function(a){var b=[],c;for(c=0;c<this.colCnt;c++)b.push([]);for(c=0;c<a.length;c++)b[a[c].col].push(a[c]);return b}});var N=r.View=G.extend({type:null,name:null,calendar:null,options:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isSelected:!1,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,
nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,constructor:function(a,b,c){this.calendar=a;this.options=b;this.type=this.name=c;this.nextDayThreshold=n.duration(this.opt("nextDayThreshold"));this.initTheming();this.initHiddenDays();this.documentMousedownProxy=g.proxy(this,"documentMousedown");this.initialize()},initialize:function(){},opt:function(a){var b;b=this.options[a];if(void 0!==b)return b;b=this.calendar.options[a];return g.isPlainObject(b)&&!/(Time|Duration)$/.test(a)?
S(b,this.type):b},trigger:function(a,b){var c=this.calendar;return c.trigger.apply(c,[a,b||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(a){this.setRange(this.computeRange(a))},setRange:function(a){g.extend(this,a)},computeRange:function(a){var b=n.duration(this.opt("duration")||this.constructor.duration||{days:1}),c=ua(b);a=a.clone().startOf(c);var d=a.clone().add(b),e,f;ca("days",b)?(a.stripTime(),d.stripTime()):(a.hasTime()||(a=this.calendar.rezoneDate(a)),d.hasTime()||
(d=this.calendar.rezoneDate(d)));e=a.clone();e=this.skipHiddenDays(e);f=d.clone();f=this.skipHiddenDays(f,-1,!0);return{intervalDuration:b,intervalUnit:c,intervalStart:a,intervalEnd:d,start:e,end:f}},computePrevDate:function(a){return this.skipHiddenDays(a.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(a){return this.skipHiddenDays(a.clone().startOf(this.intervalUnit).add(this.intervalDuration))},computeTitle:function(){return this.formatRange({start:this.intervalStart,
end:this.intervalEnd},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):1<this.intervalDuration.as("days")?"ll":"LL"},formatRange:function(a,b,c){var d=a.end;d.hasTime()||(d=d.clone().subtract(1));return Da(a.start,d,b,c,this.opt("isRTL"))},renderView:function(){this.render();this.updateSize();this.initializeScroll();this.trigger("viewRender",
this,this,this.el);g(document).on("mousedown",this.documentMousedownProxy)},render:function(){},destroyView:function(){this.unselect();this.destroyViewEvents();this.destroy();this.trigger("viewDestroy",this,this,this.el);g(document).off("mousedown",this.documentMousedownProxy)},destroy:function(){this.el.empty()},initTheming:function(){var a=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a+"-widget-header";this.widgetContentClass=a+"-widget-content";this.highlightStateClass=a+"-state-highlight"},
updateSize:function(a){a&&this.recordScroll();this.updateHeight();this.updateWidth()},updateWidth:function(){},updateHeight:function(){var a=this.calendar;this.setHeight(a.getSuggestedViewHeight(),a.isHeightAuto())},setHeight:function(a,b){},computeScrollerHeight:function(a,b){var c,d;b=b||this.scrollerEl;c=this.el.add(b);c.css({position:"relative",left:-1});d=this.el.outerHeight()-b.height();c.css({position:"",left:""});return a-d},initializeScroll:function(){},recordScroll:function(){this.scrollerEl&&
(this.scrollTop=this.scrollerEl.scrollTop())},restoreScroll:function(){null!==this.scrollTop&&this.scrollerEl.scrollTop(this.scrollTop)},renderViewEvents:function(a){this.renderEvents(a);this.eventSegEach(function(a){this.trigger("eventAfterRender",a.event,a.event,a.el)});this.trigger("eventAfterAllRender")},renderEvents:function(){},destroyViewEvents:function(){this.eventSegEach(function(a){this.trigger("eventDestroy",a.event,a.event,a.el)});this.destroyEvents()},destroyEvents:function(){},resolveEventEl:function(a,
b){var c=this.trigger("eventRender",a,a,b);!1===c?b=null:c&&!0!==c&&(b=g(c));return b},showEvent:function(a){this.eventSegEach(function(a){a.el.css("visibility","")},a)},hideEvent:function(a){this.eventSegEach(function(a){a.el.css("visibility","hidden")},a)},eventSegEach:function(a,b){var c=this.getEventSegs(),d;for(d=0;d<c.length;d++)b&&c[d].event._id!==b._id||a.call(this,c[d])},getEventSegs:function(){return[]},isEventDraggable:function(a){var b=a.source||{};return I(a.startEditable,b.startEditable,
this.opt("eventStartEditable"),a.editable,b.editable,this.opt("editable"))},reportEventDrop:function(a,b,c,d){var e=this.calendar,f=e.mutateEvent(a,b);this.triggerEventDrop(a,f.dateDelta,function(){f.undo();e.reportEventChange()},c,d);e.reportEventChange()},triggerEventDrop:function(a,b,c,d,e){this.trigger("eventDrop",d[0],a,b,c,e,{})},reportExternalDrop:function(a,b,c,d,e){var f=a.eventProps,h;f&&(f=g.extend({},f,b),h=this.calendar.renderEvent(f,a.stick)[0]);this.triggerExternalDrop(h,b,c,d,e)},
triggerExternalDrop:function(a,b,c,d,e){this.trigger("drop",c[0],b.start,d,e);a&&this.trigger("eventReceive",null,a)},renderDrag:function(a,b){},destroyDrag:function(){},isEventResizable:function(a){var b=a.source||{};return I(a.durationEditable,b.durationEditable,this.opt("eventDurationEditable"),a.editable,b.editable,this.opt("editable"))},reportEventResize:function(a,b,c,d){var e=this.calendar,f=e.mutateEvent(a,{end:b});this.triggerEventResize(a,f.durationDelta,function(){f.undo();e.reportEventChange()},
c,d);e.reportEventChange()},triggerEventResize:function(a,b,c,d,e){this.trigger("eventResize",d[0],a,b,c,e,{})},select:function(a,b){this.unselect(b);this.renderSelection(a);this.reportSelection(a,b)},renderSelection:function(a){},reportSelection:function(a,b){this.isSelected=!0;this.trigger("select",null,a.start,a.end,b)},unselect:function(a){this.isSelected&&(this.isSelected=!1,this.destroySelection(),this.trigger("unselect",null,a))},destroySelection:function(){},documentMousedown:function(a){var b;
this.isSelected&&this.opt("unselectAuto")&&1==a.which&&!a.ctrlKey&&((b=this.opt("unselectCancel"))&&g(a.target).closest(b).length||this.unselect(a))},initHiddenDays:function(){var a=this.opt("hiddenDays")||[],b=[],c=0,d;!1===this.opt("weekends")&&a.push(0,6);for(d=0;7>d;d++)(b[d]=-1!==g.inArray(d,a))||c++;if(!c)throw"invalid hiddenDays";this.isHiddenDayHash=b},isHiddenDay:function(a){n.isMoment(a)&&(a=a.day());return this.isHiddenDayHash[a]},skipHiddenDays:function(a,b,c){a=a.clone();for(b=b||1;this.isHiddenDayHash[(a.day()+
(c?b:0)+7)%7];)a.add(b,"days");return a},computeDayRange:function(a){var b=a.start.clone().stripTime();a=a.end;var c=null,d;a&&(c=a.clone().stripTime(),(d=+a.time())&&d>=this.nextDayThreshold&&c.add(1,"days"));if(!a||c<=b)c=b.clone().add(1,"days");return{start:b,end:c}},isMultiDayEvent:function(a){a=this.computeDayRange(a);return 1<a.end.diff(a.start,"days")}});r.sourceNormalizers=[];r.sourceFetchers=[];var fb={dataType:"json",cache:!1},gb=1,Ra=M.basic=N.extend({dayGrid:null,dayNumbersVisible:!1,
weekNumbersVisible:!1,weekNumberWidth:null,headRowEl:null,initialize:function(){this.dayGrid=new $(this);this.coordMap=this.dayGrid.coordMap},setRange:function(a){N.prototype.setRange.call(this,a);this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit);this.dayGrid.setRange(a)},computeRange:function(a){a=N.prototype.computeRange.call(this,a);/year|month/.test(a.intervalUnit)&&(a.start.startOf("week"),a.start=this.skipHiddenDays(a.start),a.end.weekday()&&(a.end.add(1,"week").startOf("week"),
a.end=this.skipHiddenDays(a.end,-1,!0)));return a},render:function(){this.dayNumbersVisible=1<this.dayGrid.rowCnt;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderHtml());this.headRowEl=this.el.find("thead .fc-row");this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.coordMap.containerEl=this.scrollerEl;this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render(this.hasRigidRows())},
destroy:function(){this.dayGrid.destroy();N.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){if(this.weekNumbersVisible)return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+
y(this.opt("weekNumberTitle"))+"</span></th>"},numberIntroHtml:function(a){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.dayGrid.getCell(a,0).start)+"</span></td>"},dayIntroHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"},introHtml:function(){if(this.weekNumbersVisible)return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+
"></td>"},numberCellHtml:function(a){a=a.start;var b;if(!this.dayNumbersVisible)return"<td/>";b=this.dayGrid.getDayClasses(a);b.unshift("fc-day-number");return'<td class="'+b.join(" ")+'" data-date="'+a.format()+'">'+a.date()+"</td>"},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var a=this.opt("eventLimit");return a&&"number"!==typeof a},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=
qa(this.el.find(".fc-week-number")))},setHeight:function(a,b){var c=this.opt("eventLimit"),d;aa(this.scrollerEl);oa(this.headRowEl);this.dayGrid.destroySegPopover();c&&"number"===typeof c&&this.dayGrid.limitRows(c);d=this.computeScrollerHeight(a);this.setGridHeight(d,b);c&&"number"!==typeof c&&this.dayGrid.limitRows(c);!b&&ra(this.scrollerEl,d)&&(na(this.headRowEl,ta(this.scrollerEl)),d=this.computeScrollerHeight(a),this.scrollerEl.height(d),this.restoreScroll())},setGridHeight:function(a,b){b?this.dayGrid.rowEls.height(""):
pa(this.dayGrid.rowEls,a,!0)},renderEvents:function(a){this.dayGrid.renderEvents(a);this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},destroyEvents:function(){this.recordScroll();this.dayGrid.destroyEvents()},renderDrag:function(a,b){return this.dayGrid.renderDrag(a,b)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(a){this.dayGrid.renderSelection(a)},destroySelection:function(){this.dayGrid.destroySelection()}});la({fixedWeekCount:!0});
(M.month=Ra.extend({computeRange:function(a){a=Ra.prototype.computeRange.call(this,a);this.isFixedWeeks()&&a.end.add(6-a.end.diff(a.start,"weeks"),"weeks");return a},setGridHeight:function(a,b){(b=b||"variable"===this.opt("weekMode"))&&(a*=this.rowCnt/6);pa(this.dayGrid.rowEls,a,!b)},isFixedWeeks:function(){var a=this.opt("weekMode");return a?"fixed"===a:this.opt("fixedWeekCount")}})).duration={months:1};M.basicWeek={type:"basic",duration:{weeks:1}};M.basicDay={type:"basic",duration:{days:1}};la({allDaySlot:!0,
allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0});M.agenda=N.extend({timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=new Qa(this);this.opt("allDaySlot")?(this.dayGrid=new $(this),this.coordMap=new lb([this.dayGrid.coordMap,this.timeGrid.coordMap])):this.coordMap=this.timeGrid.coordMap},setRange:function(a){N.prototype.setRange.call(this,
a);this.timeGrid.setRange(a);this.dayGrid&&this.dayGrid.setRange(a)},render:function(){this.el.addClass("fc-agenda-view").html(this.renderHtml());this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.coordMap.containerEl=this.scrollerEl;this.timeGrid.el=this.el.find(".fc-time-grid");this.timeGrid.render();this.bottomRuleEl=g('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);this.dayGrid&&(this.dayGrid.el=this.el.find(".fc-day-grid"),this.dayGrid.render(),this.dayGrid.bottomCoordPadding=
this.dayGrid.el.next("hr").outerHeight());this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},destroy:function(){this.timeGrid.destroy();this.dayGrid&&this.dayGrid.destroy();N.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},
headIntroHtml:function(){var a,b;return this.opt("weekNumbers")?(a=this.timeGrid.getCell(0).start,a=this.calendar.calculateWeekNumber(a),b=this.opt("weekNumberTitle"),a=this.opt("isRTL")?a+b:b+a,'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+y(a)+"</span></th>"):'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+
(this.opt("allDayHtml")||y(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},updateSize:function(a){a&&this.timeGrid.resize();N.prototype.updateSize.call(this,a)},updateWidth:function(){this.axisWidth=qa(this.el.find(".fc-axis"))},
setHeight:function(a,b){var c;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight());this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");aa(this.scrollerEl);oa(this.noScrollRowEls);this.dayGrid&&(this.dayGrid.destroySegPopover(),(c=this.opt("eventLimit"))&&"number"!==typeof c&&(c=5),c&&this.dayGrid.limitRows(c));b||(c=this.computeScrollerHeight(a),ra(this.scrollerEl,c)?(na(this.noScrollRowEls,ta(this.scrollerEl)),c=this.computeScrollerHeight(a),this.scrollerEl.height(c),
this.restoreScroll()):(this.scrollerEl.height(c).css("overflow","hidden"),this.bottomRuleEl.show()))},initializeScroll:function(){function a(){b.scrollerEl.scrollTop(d)}var b=this,c=n.duration(this.opt("scrollTime")),d=this.timeGrid.computeTimeTop(c);(d=Math.ceil(d))&&d++;a();setTimeout(a,0)},renderEvents:function(a){var b=[],c=[],d;for(d=0;d<a.length;d++)a[d].allDay?b.push(a[d]):c.push(a[d]);this.timeGrid.renderEvents(c);this.dayGrid&&this.dayGrid.renderEvents(b);this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?
this.dayGrid.getEventSegs():[])},destroyEvents:function(){this.recordScroll();this.timeGrid.destroyEvents();this.dayGrid&&this.dayGrid.destroyEvents()},renderDrag:function(a,b){if(a.start.hasTime())return this.timeGrid.renderDrag(a,b);if(this.dayGrid)return this.dayGrid.renderDrag(a,b)},destroyDrag:function(){this.timeGrid.destroyDrag();this.dayGrid&&this.dayGrid.destroyDrag()},renderSelection:function(a){a.start.hasTime()||a.end.hasTime()?this.timeGrid.renderSelection(a):this.dayGrid&&this.dayGrid.renderSelection(a)},
destroySelection:function(){this.timeGrid.destroySelection();this.dayGrid&&this.dayGrid.destroySelection()}});M.agendaWeek={type:"agenda",duration:{weeks:1}};M.agendaDay={type:"agenda",duration:{days:1}}});
