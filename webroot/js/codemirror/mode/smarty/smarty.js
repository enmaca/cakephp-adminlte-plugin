(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],d):d(CodeMirror)})(function(d){d.defineMode("smarty",function(u,m){function e(a,c){n=c;return a}function l(a,c){for(var b=a.string,e=a.pos;;){var f=b.indexOf(k,e),e=f+k.length,d;(d=-1==f)||(d=f+k.length,null==d&&(d=a.pos),d=!(3===q&&"{"==k&&(d==a.string.length||/\s/.test(a.string.charAt(d)))));if(d)break}if(f==a.pos){a.match(k);if(a.eat("*"))return b=
v("comment","*"+p),c.tokenize=b,b(a,c);c.depth++;c.tokenize=r;n="startTag";return"tag"}-1<f&&(a.string=b.slice(0,f));e=h.token(a,c.base);-1<f&&(a.string=b);return e}function r(a,c){if(a.match(p,!0))return 3===q?(c.depth--,0>=c.depth&&(c.tokenize=l)):c.tokenize=l,e("tag",null);if(a.match(k,!0))return c.depth++,e("tag","startTag");var b=a.next();if("$"==b)return a.eatWhile(g.validIdentifier),e("variable-2","variable");if("|"==b)return e("operator","pipe");if("."==b)return e("operator","property");if(g.stringChar.test(b))return c.tokenize=
w(b),e("string","string");if(g.operatorChars.test(b))return a.eatWhile(g.operatorChars),e("operator","operator");if("["==b||"]"==b)return e("bracket","bracket");if("("==b||")"==b)return e("bracket","operator");if(/\d/.test(b))return a.eatWhile(/\d/),e("number","number");if("variable"==c.last){if("@"==b)return a.eatWhile(g.validIdentifier),e("property","property");if("|"==b)return a.eatWhile(g.validIdentifier),e("qualifier","modifier")}else{if("pipe"==c.last)return a.eatWhile(g.validIdentifier),e("qualifier",
"modifier");if("whitespace"==c.last)return a.eatWhile(g.validIdentifier),e("attribute","modifier")}if("property"==c.last)return a.eatWhile(g.validIdentifier),e("property",null);if(/\s/.test(b))return n="whitespace",null;var d="";"/"!=b&&(d+=b);for(var f;f=a.eat(g.validIdentifier);)d+=f;f=0;for(var h=t.length;f<h;f++)if(t[f]==d)return e("keyword","keyword");return/\s/.test(b)?null:e("tag","tag")}function w(a){return function(c,b){for(var d=null,e;!c.eol();){e=c.peek();if(c.next()==a&&"\\"!==d){b.tokenize=
r;break}d=e}return"string"}}function v(a,c){return function(b,d){for(;!b.eol();){if(b.match(c)){d.tokenize=l;break}b.next()}return a}}var p=m.rightDelimiter||"}",k=m.leftDelimiter||"{",q=m.version||2,h=d.getMode(u,m.baseMode||"null"),t=["debug","extends","function","include","literal"],g={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/},n;return{startState:function(){return{base:d.startState(h),tokenize:l,last:null,depth:0}},copyState:function(a){return{base:d.copyState(h,
a.base),tokenize:a.tokenize,last:a.last,depth:a.depth}},innerMode:function(a){if(a.tokenize==l)return{mode:h,state:a.base}},token:function(a,c){var b=c.tokenize(a,c);c.last=n;return b},indent:function(a,c){return a.tokenize==l&&h.indent?h.indent(a.base,c):d.Pass},blockCommentStart:k+"*",blockCommentEnd:"*"+p}});d.defineMIME("text/x-smarty","smarty")});
