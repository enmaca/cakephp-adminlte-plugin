(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){f.registerHelper("wordChars","r",/[\w.]/);f.defineMode("r",function(f){function g(a){a=a.split(" ");for(var c={},b=0;b<a.length;++b)c[a[b]]=!0;return c}function k(a,c){e=null;var b=a.next();if("#"==b)return a.skipToEnd(),"comment";if("0"==b&&a.eat("x"))return a.eatWhile(/[\da-f]/i),"number";if("."==b&&
a.eat(/\d/))return a.match(/\d*(?:e[+\-]?\d+)?/),"number";if(/\d/.test(b))return a.match(/\d*(?:\.\d+)?(?:e[+\-]\d+)?L?/),"number";if("'"==b||'"'==b)return c.tokenize=p(b),"string";if("`"==b)return a.match(/[^`]+`/),"variable-3";if("."==b&&a.match(/.[.\d]+/))return"keyword";if(/[\w\.]/.test(b)&&"_"!=b)return a.eatWhile(/[\w\.]/),b=a.current(),q.propertyIsEnumerable(b)?"atom":r.propertyIsEnumerable(b)?(t.propertyIsEnumerable(b)&&!a.match(/\s*if(\s+|$)/,!1)&&(e="block"),"keyword"):u.propertyIsEnumerable(b)?
"builtin":"variable";if("%"==b)return a.skipTo("%")&&a.next(),"operator variable-2";if("<"==b&&a.eat("-")||"<"==b&&a.match("<-")||"-"==b&&a.match(/>>?/))return"operator arrow";if("="==b&&c.ctx.argList)return"arg-is";if(m.test(b)){if("$"==b)return"operator dollar";a.eatWhile(m);return"operator"}return/[\(\){}\[\];]/.test(b)?(e=b,";"==b?"semi":null):null}function p(a){return function(c,b){if(c.eat("\\")){var d=c.next();"x"==d?c.match(/^[a-f0-9]{2}/i):("u"==d||"U"==d)&&c.eat("{")&&c.skipTo("}")?c.next():
"u"==d?c.match(/^[a-f0-9]{4}/i):"U"==d?c.match(/^[a-f0-9]{8}/i):/[0-7]/.test(d)&&c.match(/^[0-7]{1,2}/);return"string-2"}for(;null!=(d=c.next());){if(d==a){b.tokenize=k;break}if("\\"==d){c.backUp(1);break}}return"string"}}function h(a,c,b){a.ctx={type:c,indent:a.indent,flags:0,column:b.column(),prev:a.ctx}}function n(a,c){var b=a.ctx;a.ctx={type:b.type,indent:b.indent,flags:b.flags|c,column:b.column,prev:b.prev}}function l(a){a.indent=a.ctx.indent;a.ctx=a.ctx.prev}var q=g("NULL NA Inf NaN NA_integer_ NA_real_ NA_complex_ NA_character_"),
u=g("list quote bquote eval return call parse deparse"),r=g("if else repeat while function for in next break"),t=g("if else repeat while function for"),m=/[+\-*\/^<>=!&|~$:]/,e;return{startState:function(){return{tokenize:k,ctx:{type:"top",indent:-f.indentUnit,flags:2},indent:0,afterIdent:!1}},token:function(a,c){a.sol()&&(0==(c.ctx.flags&3)&&(c.ctx.flags|=2),c.ctx.flags&4&&l(c),c.indent=a.indentation());if(a.eatSpace())return null;var b=c.tokenize(a,c);"comment"!=b&&0==(c.ctx.flags&2)&&n(c,1);";"!=
e&&"{"!=e&&"}"!=e||"block"!=c.ctx.type||l(c);"{"==e?h(c,"}",a):"("==e?(h(c,")",a),c.afterIdent&&(c.ctx.argList=!0)):"["==e?h(c,"]",a):"block"==e?h(c,"block",a):e==c.ctx.type?l(c):"block"==c.ctx.type&&"comment"!=b&&n(c,4);c.afterIdent="variable"==b||"keyword"==b;return b},indent:function(a,c){if(a.tokenize!=k)return 0;var b=c&&c.charAt(0),d=a.ctx,e=b==d.type;d.flags&4&&(d=d.prev);return"block"==d.type?d.indent+("{"==b?0:f.indentUnit):d.flags&1?d.column+(e?0:1):d.indent+(e?0:f.indentUnit)},lineComment:"#"}});
f.defineMIME("text/x-rsrc","r")});
