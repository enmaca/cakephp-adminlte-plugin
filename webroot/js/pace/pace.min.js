(function(){var I,R,p,m,S,x,A,h,T,U,J,V,W,r,X,s,B,C,t,D,K,L,q,Y,u,k,E,M,Z,z,N,F,n,y,O,v,G,P,H,$,Q,aa,w=[].slice,ba={}.hasOwnProperty,ca=function(b,a){function d(){this.constructor=b}for(var c in a)ba.call(a,c)&&(b[c]=a[c]);return d.prototype=a.prototype,b.prototype=new d,b.__super__=a.prototype,b},da=[].indexOf||function(b){for(var a=0,d=this.length;d>a;a++)if(a in this&&this[a]===b)return a;return-1};p={catchupTime:100,initialRate:0.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,
startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}};u=function(){var b;return null!=(b="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?b:+new Date};E=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||
window.msRequestAnimationFrame;C=window.cancelAnimationFrame||window.mozCancelAnimationFrame;null==E&&(E=function(b){return setTimeout(b,50)},C=function(b){return clearTimeout(b)});Z=function(b){var a,d;return a=u(),(d=function(){var c;return c=u()-a,33<=c?(a=u(),b(c,function(){return E(d)})):setTimeout(d,33-c)})()};M=function(){var b,a,d;return d=arguments[0],a=arguments[1],b=3<=arguments.length?w.call(arguments,2):[],"function"==typeof d[a]?d[a].apply(d,b):d[a]};t=function(){var b,a,d,c,e,f,g;a=
arguments[0];c=2<=arguments.length?w.call(arguments,1):[];f=0;for(g=c.length;g>f;f++)if(d=c[f])for(b in d)ba.call(d,b)&&(e=d[b],null!=a[b]&&"object"==typeof a[b]&&null!=e&&"object"==typeof e?t(a[b],e):a[b]=e);return a};X=function(b){var a,d,c,e,f;e=d=a=0;for(f=b.length;f>e;e++)c=b[e],d+=Math.abs(c),a++;return d/a};m=function(){function b(){}return b.prototype.on=function(a,b,c,e){var f;return null==e&&(e=!1),null==this.bindings&&(this.bindings={}),null==(f=this.bindings)[a]&&(f[a]=[]),this.bindings[a].push({handler:b,
ctx:c,once:e})},b.prototype.once=function(a,b,c){return this.on(a,b,c,!0)},b.prototype.off=function(a,b){var c,e;if(null!=(null!=(c=this.bindings)?c[a]:void 0)){if(null==b)return delete this.bindings[a];c=0;for(e=[];c<this.bindings[a].length;)e.push(this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):c++);return e}},b.prototype.trigger=function(){var a,b,c,e,f,g,l;if(c=arguments[0],a=2<=arguments.length?w.call(arguments,1):[],null!=(b=this.bindings)?b[c]:void 0){f=0;for(l=[];f<this.bindings[c].length;)g=
this.bindings[c][f],e=g.handler,b=g.ctx,g=g.once,e.apply(null!=b?b:this,a),l.push(g?this.bindings[c].splice(f,1):f++);return l}},b}();h=window.Pace||{};window.Pace=h;t(h,m.prototype);k=h.options=t({},p,window.paceOptions,function(b,a){var d;if(null==b&&(b="options"),null==a&&(a=!0),d=document.querySelector("[data-pace-"+b+"]")){if(d=d.getAttribute("data-pace-"+b),!a)return d;try{return JSON.parse(d)}catch(c){return"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",
c):void 0}}}());Q=["ajax","document","eventLag","elements"];m=0;for(x=Q.length;x>m;m++)n=Q[m],!0===k[n]&&(k[n]=p[n]);A=function(b){function a(){return a.__super__.constructor.apply(this,arguments)}return ca(a,b),a}(Error);R=function(){function b(){this.progress=0}return b.prototype.getElement=function(){var a;if(null==this.el){if(a=document.querySelector(k.target),!a)throw new A;this.el=document.createElement("div");this.el.className="pace pace-active";document.body.className=document.body.className.replace(/pace-done/g,
"");document.body.className+=" pace-running";this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>';null!=a.firstChild?a.insertBefore(this.el,a.firstChild):a.appendChild(this.el)}return this.el},b.prototype.finish=function(){var a;return a=this.getElement(),a.className=a.className.replace("pace-active",""),a.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=
" pace-done"},b.prototype.update=function(a){return this.progress=a,this.render()},b.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(a){A=a}return this.el=void 0},b.prototype.render=function(){var a,b,c,e,f,g,l;if(null==document.querySelector(k.target))return!1;a=this.getElement();e="translate3d("+this.progress+"%, 0, 0)";l=["webkitTransform","msTransform","transform"];f=0;for(g=l.length;g>f;f++)b=l[f],a.children[0].style[b]=e;return(!this.lastRenderedProgress||
this.lastRenderedProgress|0!==this.progress|0)&&(a.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),100<=this.progress?c="99":(c=10>this.progress?"0":"",c+=0|this.progress),a.children[0].setAttribute("data-progress",""+c)),this.lastRenderedProgress=this.progress},b.prototype.done=function(){return 100<=this.progress},b}();p=function(){function b(){this.bindings={}}return b.prototype.trigger=function(a,b){var c,e,f,g,l;if(null!=this.bindings[a]){g=this.bindings[a];l=[];e=0;for(f=
g.length;f>e;e++)c=g[e],l.push(c.call(this,b));return l}},b.prototype.on=function(a,b){var c;return null==(c=this.bindings)[a]&&(c[a]=[]),this.bindings[a].push(b)},b}();P=window.XMLHttpRequest;G=window.XDomainRequest;v=window.WebSocket;D=function(b,a){var d,c;c=[];for(d in a.prototype)try{c.push(null==b[d]&&"function"!=typeof a[d]?"function"==typeof Object.defineProperty?Object.defineProperty(b,d,{get:function(){return a.prototype[d]},configurable:!0,enumerable:!0}):b[d]=a.prototype[d]:void 0)}catch(e){}return c};
q=[];h.ignore=function(){var b,a,d;return a=arguments[0],b=2<=arguments.length?w.call(arguments,1):[],q.unshift("ignore"),d=a.apply(null,b),q.shift(),d};h.track=function(){var b,a,d;return a=arguments[0],b=2<=arguments.length?w.call(arguments,1):[],q.unshift("track"),d=a.apply(null,b),q.shift(),d};F=function(b){var a;return(null==b&&(b="GET"),"track"===q[0])?"force":!q.length&&k.ajax&&("socket"===b&&k.ajax.trackWebSockets||(a=b.toUpperCase(),0<=da.call(k.ajax.trackMethods,a)))?!0:!1};T=function(b){function a(){var b,
c=this;a.__super__.constructor.apply(this,arguments);b=function(a){var b;return b=a.open,a.open=function(d,e){return F(d)&&c.trigger("request",{type:d,url:e,request:a}),b.apply(a,arguments)}};window.XMLHttpRequest=function(a){var c;return c=new P(a),b(c),c};try{D(window.XMLHttpRequest,P)}catch(e){}if(null!=G){window.XDomainRequest=function(){var a;return a=new G,b(a),a};try{D(window.XDomainRequest,G)}catch(f){}}if(null!=v&&k.ajax.trackWebSockets){window.WebSocket=function(a,b){var d;return d=null!=
b?new v(a,b):new v(a),F("socket")&&c.trigger("request",{type:"socket",url:a,protocols:b,request:d}),d};try{D(window.WebSocket,v)}catch(g){}}}return ca(a,b),a}(p);H=null;K=function(){return null==H&&(H=new T),H};N=function(b){var a,d,c,e;e=k.ajax.ignoreURLs;d=0;for(c=e.length;c>d;d++)if(a=e[d],"string"==typeof a){if(-1!==b.indexOf(a))return!0}else if(a.test(b))return!0;return!1};K().on("request",function(b){var a,d,c,e,f;return e=b.type,c=b.request,f=b.url,N(f)?void 0:h.running||!1===k.restartOnRequestAfter&&
"force"!==F(e)?void 0:(d=arguments,a=k.restartOnRequestAfter||0,"boolean"==typeof a&&(a=0),setTimeout(function(){var a,b,f,k;if("socket"===e?2>c.readyState:0<(a=c.readyState)&&4>a){h.restart();f=h.sources;k=[];a=0;for(b=f.length;b>a;a++){if(n=f[a],n instanceof I){n.watch.apply(n,d);break}k.push(void 0)}return k}},a))});I=function(){function b(){var a=this;this.elements=[];K().on("request",function(){return a.watch.apply(a,arguments)})}return b.prototype.watch=function(a){var b,c,e,f;return e=a.type,
b=a.request,f=a.url,N(f)?void 0:(c="socket"===e?new V(b):new W(b),this.elements.push(c))},b}();W=function(){return function(b){var a,d,c,e,f,g=this;if(this.progress=0,null!=window.ProgressEvent)for(b.addEventListener("progress",function(a){return g.progress=a.lengthComputable?100*a.loaded/a.total:g.progress+(100-g.progress)/2},!1),f=["load","abort","timeout","error"],d=0,c=f.length;c>d;d++)a=f[d],b.addEventListener(a,function(){return g.progress=100},!1);else e=b.onreadystatechange,b.onreadystatechange=
function(){var a;return 0===(a=b.readyState)||4===a?g.progress=100:3===b.readyState&&(g.progress=50),"function"==typeof e?e.apply(null,arguments):void 0}}}();V=function(){return function(b){var a,d,c,e,f=this;this.progress=0;e=["error","open"];d=0;for(c=e.length;c>d;d++)a=e[d],b.addEventListener(a,function(){return f.progress=100},!1)}}();m=function(){return function(b){var a,d,c;null==b&&(b={});this.elements=[];null==b.selectors&&(b.selectors=[]);c=b.selectors;a=0;for(d=c.length;d>a;a++)b=c[a],this.elements.push(new S(b))}}();
S=function(){function b(a){this.selector=a;this.progress=0;this.check()}return b.prototype.check=function(){var a=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return a.check()},k.elements.checkInterval)},b.prototype.done=function(){return this.progress=100},b}();p=function(){function b(){var a,b,c=this;this.progress=null!=(b=this.states[document.readyState])?b:100;a=document.onreadystatechange;document.onreadystatechange=function(){return null!=c.states[document.readyState]&&
(c.progress=c.states[document.readyState]),"function"==typeof a?a.apply(null,arguments):void 0}}return b.prototype.states={loading:0,interactive:50,complete:100},b}();x=function(){return function(){var b,a,d,c,e,f=this;b=this.progress=0;e=[];c=0;d=u();a=setInterval(function(){var g;return g=u()-d-50,d=u(),e.push(g),e.length>k.eventLag.sampleCount&&e.shift(),b=X(e),++c>=k.eventLag.minSamples&&b<k.eventLag.lagThreshold?(f.progress=100,clearInterval(a)):f.progress=3/(b+3)*100},50)}}();J=function(){function b(a){this.source=
a;this.last=this.sinceLastUpdate=0;this.rate=k.initialRate;this.progress=this.lastProgress=this.catchup=0;null!=this.source&&(this.progress=M(this.source,"progress"))}return b.prototype.tick=function(a,b){var c;return null==b&&(b=M(this.source,"progress")),100<=b&&(this.done=!0),b===this.last?this.sinceLastUpdate+=a:(this.sinceLastUpdate&&(this.rate=(b-this.last)/this.sinceLastUpdate),this.catchup=(b-this.progress)/k.catchupTime,this.sinceLastUpdate=0,this.last=b),b>this.progress&&(this.progress+=
this.catchup*a),c=1-Math.pow(this.progress/100,k.easeFactor),this.progress+=c*this.rate*a,this.progress=Math.min(this.lastProgress+k.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},b}();B=r=O=s=z=y=null;h.running=!1;L=function(){return k.restartOnPushState?h.restart():void 0};null!=window.history.pushState&&($=window.history.pushState,window.history.pushState=function(){return L(),$.apply(window.history,
arguments)});null!=window.history.replaceState&&(aa=window.history.replaceState,window.history.replaceState=function(){return L(),aa.apply(window.history,arguments)});U={ajax:I,elements:m,document:p,eventLag:x};(Y=function(){var b,a,d,c,e;h.sources=y=[];e=["ajax","elements","document","eventLag"];a=0;for(c=e.length;c>a;a++)b=e[a],!1!==k[b]&&y.push(new U[b](k[b]));b=null!=(d=k.extraSources)?d:[];d=0;for(a=b.length;a>d;d++)n=b[d],y.push(new n(k));return h.bar=s=new R,z=[],O=new J})();h.stop=function(){return h.trigger("stop"),
h.running=!1,s.destroy(),B=!0,null!=r&&("function"==typeof C&&C(r),r=null),Y()};h.restart=function(){return h.trigger("restart"),h.stop(),h.start()};h.go=function(){var b;return h.running=!0,s.render(),b=u(),B=!1,r=Z(function(a,d){var c,e,f,g,l,m,p,q,r,t,v,w,x;e=q=0;f=!0;l=r=0;for(v=y.length;v>r;l=++r)for(n=y[l],p=null!=z[l]?z[l]:z[l]=[],l=null!=(x=n.elements)?x:[n],m=t=0,w=l.length;w>t;m=++t)g=l[m],g=null!=p[m]?p[m]:p[m]=new J(g),f&=g.done,g.done||(e++,q+=g.tick(a));return c=q/e,s.update(O.tick(a,
c)),s.done()||f||B?(s.update(100),h.trigger("done"),setTimeout(function(){return s.finish(),h.running=!1,h.trigger("hide")},Math.max(k.ghostTime,Math.max(k.minTime-(u()-b),0)))):d()})};h.start=function(b){t(k,b);h.running=!0;try{s.render()}catch(a){A=a}return document.querySelector(".pace")?(h.trigger("start"),h.go()):setTimeout(h.start,50)};"function"==typeof define&&define.amd?define(["pace"],function(){return h}):"object"==typeof exports?module.exports=h:k.startOnPageLoad&&h.start()}).call(this);
