var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[e]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var e=0;return $jscomp.iteratorPrototype(function(){return e<a.length?{done:!1,value:a[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,e){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,d={next:function(){if(b<a.length){var c=b++;return{value:e(c,a[c]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,e,b,d){if(e){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var c=a[d];c in b||(b[c]={});b=b[c]}a=a[a.length-1];d=b[a];e=e(d);e!=d&&null!=e&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
"function"!=typeof Object.create&&function(){var a=function(){};Object.create=function(e){if(1<arguments.length)throw Error("Second argument not supported");if(null===e)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof e)throw TypeError("Argument must be an object");a.prototype=e;return new a}}();
CKEDITOR.plugins.add("toolbarconfiguratorarea",{afterInit:function(a){a.addMode("wysiwyg",function(e){var b=CKEDITOR.dom.element.createFromHtml('<div class="cke_wysiwyg_div cke_reset" hidefocus="true"></div>');a.ui.space("contents").append(b);b=a.editable(b);b.detach=CKEDITOR.tools.override(b.detach,function(a){return function(){a.apply(this,arguments);this.remove()}});a.setData(a.getData(1),e);a.fire("contentDom")});a.dataProcessor.toHtml=function(a){return a};a.dataProcessor.toDataFormat=function(a){return a}}});
Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),b="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),d=b.length;return function(c){if("object"!==typeof c&&("function"!==typeof c||null===c))throw new TypeError("Object.keys called on non-object");var g=[],f;for(f in c)a.call(c,f)&&g.push(f);if(e)for(f=0;f<d;f++)a.call(c,b[f])&&g.push(b[f]);return g}}());
(function(){function a(a,b){this.cfg=b||{};this.hidden=!1;this.editorId=a;this.fullToolbarEditor=new ToolbarConfigurator.FullToolbarEditor;this.actualConfig=this.originalConfig=this.mainContainer=null;this.isEditableVisible=this.waitForReady=!1;this.toolbarContainer=null;this.toolbarButtons=[]}ToolbarConfigurator.AbstractToolbarModifier=a;a.prototype.setConfig=function(a){this._onInit(void 0,a,!0)};a.prototype.init=function(a){var b=this;this.mainContainer=new CKEDITOR.dom.element("div");if(null!==
this.fullToolbarEditor.editorInstance)throw"Only one instance of ToolbarModifier is allowed";this.editorInstance||this._createEditor(!1);this.editorInstance.once("loaded",function(){b.fullToolbarEditor.init(function(){b._onInit(a);if("function"==typeof b.onRefresh)b.onRefresh()},b.editorInstance.config)});return this.mainContainer};a.prototype._onInit=function(a,b){this.originalConfig=this.editorInstance.config;this.actualConfig=b?JSON.parse(b):JSON.parse(JSON.stringify(this.originalConfig));if(!this.actualConfig.toolbarGroups&&
!this.actualConfig.toolbar){for(var e=this.actualConfig,c=this.editorInstance.toolbar,g=[],f=c.length,k=0;k<f;k++){var h=c[k];"string"==typeof h?g.push(h):g.push({name:h.name,groups:h.groups?h.groups.slice():[]})}e.toolbarGroups=g}"function"===typeof a&&a(this.mainContainer)};a.prototype._createModifier=function(){this.mainContainer.addClass("unselectable");this.modifyContainer&&this.modifyContainer.remove();this.modifyContainer=new CKEDITOR.dom.element("div");this.modifyContainer.addClass("toolbarModifier");
this.mainContainer.append(this.modifyContainer);return this.mainContainer};a.prototype.getEditableArea=function(){return this.editorInstance.container.findOne("#"+this.editorInstance.id+"_contents")};a.prototype._hideEditable=function(){var a=this.getEditableArea();this.isEditableVisible=!1;this.lastEditableAreaHeight=a.getStyle("height");a.setStyle("height","0")};a.prototype._showEditable=function(){this.isEditableVisible=!0;this.getEditableArea().setStyle("height",this.lastEditableAreaHeight||"auto")};
a.prototype._toggleEditable=function(){this.isEditableVisible?this._hideEditable():this._showEditable()};a.prototype._refreshEditor=function(){function a(){b.editorInstance.destroy();b._createEditor(!0,b.getActualConfig());b.waitForReady=!1}var b=this,d=this.editorInstance.status;this.waitForReady||("unloaded"==d||"loaded"==d?(this.waitForReady=!0,this.editorInstance.once("instanceReady",function(){a()},this)):a())};a.prototype._createEditor=function(e,b){function d(){}var c=this;this.editorInstance=
CKEDITOR.replace(this.editorId);this.editorInstance.on("configLoaded",function(){var e=c.editorInstance.config;b&&CKEDITOR.tools.extend(e,b,!0);a.extendPluginsConfig(e)});this.editorInstance.on("uiSpace",function(a){"top"!=a.data.space&&a.stop()},null,null,-999);this.editorInstance.once("loaded",function(){var a=c.editorInstance.ui.instances,b;for(b in a)a[b]&&(a[b].click=d,a[b].onClick=d);c.isEditableVisible||c._hideEditable();c.currentActive&&c.currentActive.name&&c._highlightGroup(c.currentActive.name);
c.hidden?c.hideUI():c.showUI();if(e&&"function"===typeof c.onRefresh)c.onRefresh()})};a.prototype.getActualConfig=function(){return JSON.parse(JSON.stringify(this.actualConfig))};a.prototype._createToolbar=function(){if(this.toolbarButtons.length){this.toolbarContainer=new CKEDITOR.dom.element("div");this.toolbarContainer.addClass("toolbar");for(var a=this.toolbarButtons.length,b=0;b<a;b+=1)this._createToolbarBtn(this.toolbarButtons[b])}};a.prototype._createToolbarBtn=function(a){var b=ToolbarConfigurator.FullToolbarEditor.createButton("string"===
typeof a.text?a.text:a.text.inactive,a.cssClass);this.toolbarContainer.append(b);b.data("group",a.group);b.addClass(a.position);b.on("click",function(){a.clickCallback.call(this,b,a)},this);return b};a.prototype._fixGroups=function(a){a=a.toolbarGroups||[];for(var b=a.length,d=0;d<b;d+=1){var c=a[d];"/"==c?(c=a[d]={},c.type="separator",c.name="separator"+CKEDITOR.tools.getNextNumber()):(c.groups=c.groups||[],-1==CKEDITOR.tools.indexOf(c.groups,c.name)&&(this.editorInstance.ui.addToolbarGroup(c.name,
c.groups[c.groups.length-1],c.name),c.groups.push(c.name)),this._fixSubgroups(c))}};a.prototype._fixSubgroups=function(a){a=a.groups;for(var b=a.length,d=0;d<b;d+=1){var c=a[d];a[d]={name:c,totalBtns:ToolbarConfigurator.ToolbarModifier.getTotalSubGroupButtonsNumber(c,this.fullToolbarEditor)}}};a.stringifyJSONintoOneLine=function(a,b){b=b||{};var d=JSON.stringify(a,null,""),d=d.replace(/\n/g,"");b.addSpaces&&(d=d.replace(/(\{|:|,|\[|\])/g,function(a){return a+" "}),d=d.replace(/(\])/g,function(a){return" "+
a}));b.noQuotesOnKey&&(d=d.replace(/"(\w*)":/g,function(a,b){return b+":"}));b.singleQuotes&&(d=d.replace(/\"/g,"'"));return d};a.prototype.hideUI=function(){this.hidden=!0;this.mainContainer.hide();this.editorInstance.container&&this.editorInstance.container.hide()};a.prototype.showUI=function(){this.hidden=!1;this.mainContainer.show();this.editorInstance.container&&this.editorInstance.container.show()};a.extendPluginsConfig=function(a){var b=a.extraPlugins;a.extraPlugins=(b?b+",":"")+"toolbarconfiguratorarea"}})();
