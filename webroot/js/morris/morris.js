(function(){var r,k,v,z,B=[].slice,t=function(d,b){return function(){return d.apply(b,arguments)}},C={}.hasOwnProperty,A=function(d,b){function a(){this.constructor=d}for(var c in b)C.call(b,c)&&(d[c]=b[c]);a.prototype=b.prototype;d.prototype=new a;d.__super__=b.prototype;return d},D=[].indexOf||function(d){for(var b=0,a=this.length;b<a;b++)if(b in this&&this[b]===d)return b;return-1};k=window.Morris={};r=jQuery;k.EventEmitter=function(){function d(){}d.prototype.on=function(b,a){null==this.handlers&&
(this.handlers={});null==this.handlers[b]&&(this.handlers[b]=[]);this.handlers[b].push(a);return this};d.prototype.fire=function(){var b,a,c,g,e,f;a=arguments[0];b=2<=arguments.length?B.call(arguments,1):[];if(null!=this.handlers&&null!=this.handlers[a]){e=this.handlers[a];f=[];c=0;for(g=e.length;c<g;c++)a=e[c],f.push(a.apply(null,b));return f}};return d}();k.commas=function(d){var b,a;return null!=d?(a=0>d?"-":"",b=Math.abs(d),d=Math.floor(b).toFixed(0),a+=d.replace(/(?=(?:\d{3})+$)(?!^)/g,","),
b=b.toString(),b.length>d.length&&(a+=b.slice(d.length)),a):"-"};k.pad2=function(d){return(10>d?"0":"")+d};k.Grid=function(d){function b(a){this.resizeHandler=t(this.resizeHandler,this);var c=this;this.el="string"===typeof a.element?r(document.getElementById(a.element)):r(a.element);if(null==this.el||0===this.el.length)throw Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative");this.options=r.extend({},this.gridDefaults,this.defaults||{},
a);"string"===typeof this.options.units&&(this.options.postUnits=a.units);this.raphael=new Raphael(this.el[0]);this.elementHeight=this.elementWidth=null;this.dirty=!1;this.selectFrom=null;this.init&&this.init();this.setData(this.options.data);this.el.bind("mousemove",function(a){var e,f;e=c.el.offset();f=a.pageX-e.left;return c.selectFrom?(a=c.data[c.hitTest(Math.min(f,c.selectFrom))]._x,f=c.data[c.hitTest(Math.max(f,c.selectFrom))]._x,c.selectionRect.attr({x:a,width:f-a})):c.fire("hovermove",f,a.pageY-
e.top)});this.el.bind("mouseleave",function(a){c.selectFrom&&(c.selectionRect.hide(),c.selectFrom=null);return c.fire("hoverout")});this.el.bind("touchstart touchmove touchend",function(a){var e;e=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];a=c.el.offset();return c.fire("hovermove",e.pageX-a.left,e.pageY-a.top)});this.el.bind("click",function(a){var e;e=c.el.offset();return c.fire("gridclick",a.pageX-e.left,a.pageY-e.top)});this.options.rangeSelect&&(this.selectionRect=this.raphael.rect(0,
0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(a){var e;e=c.el.offset();return c.startRange(a.pageX-e.left)}),this.el.bind("mouseup",function(a){var e;e=c.el.offset();c.endRange(a.pageX-e.left);return c.fire("hovermove",a.pageX-e.left,a.pageY-e.top)}));this.options.resize&&r(window).bind("resize",function(a){null!=c.timeoutId&&window.clearTimeout(c.timeoutId);return c.timeoutId=window.setTimeout(c.resizeHandler,100)});
this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)");this.postInit&&this.postInit()}A(b,d);b.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:0.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],
eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1};b.prototype.setData=function(a,c){var g,e,f,b,d,h,q,m,p,s,w,x,y,u,r;null==c&&(c=!0);this.options.data=a;if(null==a||0===a.length)this.data=[],this.raphael.clear(),null!=this.hover&&this.hover.hide();else{x=this.cumulative?0:null;y=this.cumulative?0:null;0<this.options.goals.length&&(d=Math.min.apply(Math,this.options.goals),b=Math.max.apply(Math,this.options.goals),y=null!=
y?Math.min(y,d):d,x=null!=x?Math.max(x,b):b);this.data=function(){var c,g,b;b=[];f=c=0;for(g=a.length;c<g;f=++c){q=a[f];h={src:q};h.label=q[this.options.xkey];this.options.parseTime?(h.x=k.parseDate(h.label),this.options.dateFormat?h.label=this.options.dateFormat(h.x):"number"===typeof h.label&&(h.label=(new Date(h.label)).toString())):(h.x=f,this.options.xLabelFormat&&(h.label=this.options.xLabelFormat(h)));p=0;var d=h,l=void 0,n=void 0,m=void 0,s=void 0,m=this.options.ykeys,s=[];e=l=0;for(n=m.length;l<
n;e=++l)w=m[e],u=q[w],"string"===typeof u&&(u=parseFloat(u)),null!=u&&"number"!==typeof u&&(u=null),null!=u&&(this.cumulative?p+=u:null!=x?(x=Math.max(u,x),y=Math.min(u,y)):x=y=u),this.cumulative&&null!=p&&(x=Math.max(p,x),y=Math.min(p,y)),s.push(u);d.y=s;b.push(h)}return b}.call(this);this.options.parseTime&&(this.data=this.data.sort(function(a,c){return(a.x>c.x)-(c.x>a.x)}));this.xmin=this.data[0].x;this.xmax=this.data[this.data.length-1].x;this.events=[];0<this.options.events.length&&(this.events=
this.options.parseTime?function(){var a,c,e,f;e=this.options.events;f=[];a=0;for(c=e.length;a<c;a++)g=e[a],f.push(k.parseDate(g));return f}.call(this):this.options.events,this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events)));this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1);this.ymin=this.yboundary("min",y);this.ymax=this.yboundary("max",x);this.ymin===this.ymax&&(y&&(this.ymin-=1),this.ymax+=1);if(!0===(r=this.options.axes)||
"both"===r||"y"===r||!0===this.options.grid)this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(m=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var a,c,g;g=[];s=a=this.ymin;for(c=this.ymax;0<m?a<=c:a>=c;s=a+=m)g.push(s);return g}.call(this));this.dirty=!0;if(c)return this.redraw()}};
b.prototype.yboundary=function(a,c){var g;g=this.options["y"+a];return"string"===typeof g?"auto"===g.slice(0,4)?5<g.length?(g=parseInt(g.slice(5),10),null==c?g:Math[a](c,g)):null!=c?c:0:parseInt(g,10):g};b.prototype.autoGridLines=function(a,c,g){var e,f,b,d,h,q;h=Math.floor(Math.log(c-a)/Math.log(10));h=Math.pow(10,h);f=Math.floor(a/h)*h;e=Math.ceil(c/h)*h;d=(e-f)/(g-1);1===h&&1<d&&Math.ceil(d)!==d&&(d=Math.ceil(d),e=f+d*(g-1));0>f&&0<e&&(f=Math.floor(a/d)*d,e=Math.ceil(c/d)*d);1>d?(b=Math.floor(Math.log(d)/
Math.log(10)),a=function(){var a,c;c=[];for(q=a=f;0<d?a<=e:a>=e;q=a+=d)c.push(parseFloat(q.toFixed(1-b)));return c}()):a=function(){var a,c;c=[];for(q=a=f;0<d?a<=e:a>=e;q=a+=d)c.push(q);return c}();return a};b.prototype._calc=function(){var a,c,g,e,f,b;f=this.el.width();g=this.el.height();if(this.elementWidth!==f||this.elementHeight!==g||this.dirty){this.elementWidth=f;this.elementHeight=g;this.dirty=!1;this.left=this.options.padding;this.right=this.elementWidth-this.options.padding;this.top=this.options.padding;
this.bottom=this.elementHeight-this.options.padding;if(!0===(b=this.options.axes)||"both"===b||"y"===b)g=function(){var a,g,e,b;e=this.grid;b=[];a=0;for(g=e.length;a<g;a++)c=e[a],b.push(this.measureText(this.yAxisFormat(c)).width);return b}.call(this),this.left+=Math.max.apply(Math,g);if(!0===(a=this.options.axes)||"both"===a||"x"===a)a=function(){var a,c,g;g=[];e=a=0;for(c=this.data.length;0<=c?a<c:a>c;e=0<=c?++a:--a)g.push(this.measureText(this.data[e].text,-this.options.xLabelAngle).height);return g}.call(this),
this.bottom-=Math.max.apply(Math,a);this.width=Math.max(1,this.right-this.left);this.height=Math.max(1,this.bottom-this.top);this.dx=this.width/(this.xmax-this.xmin);this.dy=this.height/(this.ymax-this.ymin);if(this.calc)return this.calc()}};b.prototype.transY=function(a){return this.bottom-(a-this.ymin)*this.dy};b.prototype.transX=function(a){return 1===this.data.length?(this.left+this.right)/2:this.left+(a-this.xmin)*this.dx};b.prototype.redraw=function(){this.raphael.clear();this._calc();this.drawGrid();
this.drawGoals();this.drawEvents();if(this.draw)return this.draw()};b.prototype.measureText=function(a,c){var g,e;null==c&&(c=0);e=this.raphael.text(100,100,a).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(c);g=e.getBBox();e.remove();return g};b.prototype.yAxisFormat=function(a){return this.yLabelFormat(a)};b.prototype.yLabelFormat=function(a){return"function"===typeof this.options.yLabelFormat?this.options.yLabelFormat(a):
""+this.options.preUnits+k.commas(a)+this.options.postUnits};b.prototype.drawGrid=function(){var a,c,g,e,b,d,l;if(!1!==this.options.grid||!0===(a=this.options.axes)||"both"===a||"y"===a){b=this.grid;l=[];g=0;for(e=b.length;g<e;g++)a=b[g],c=this.transY(a),!0!==(d=this.options.axes)&&"both"!==d&&"y"!==d||this.drawYAxisLabel(this.left-this.options.padding/2,c,this.yAxisFormat(a)),this.options.grid?l.push(this.drawGridLine("M"+this.left+","+c+"H"+(this.left+this.width))):l.push(void 0);return l}};b.prototype.drawGoals=
function(){var a,c,g,e,b,d;b=this.options.goals;d=[];a=g=0;for(e=b.length;g<e;a=++g)c=b[a],a=this.options.goalLineColors[a%this.options.goalLineColors.length],d.push(this.drawGoal(c,a));return d};b.prototype.drawEvents=function(){var a,c,g,e,b,d;b=this.events;d=[];a=g=0;for(e=b.length;g<e;a=++g)c=b[a],a=this.options.eventLineColors[a%this.options.eventLineColors.length],d.push(this.drawEvent(c,a));return d};b.prototype.drawGoal=function(a,c){return this.raphael.path("M"+this.left+","+this.transY(a)+
"H"+this.right).attr("stroke",c).attr("stroke-width",this.options.goalStrokeWidth)};b.prototype.drawEvent=function(a,c){return this.raphael.path("M"+this.transX(a)+","+this.bottom+"V"+this.top).attr("stroke",c).attr("stroke-width",this.options.eventStrokeWidth)};b.prototype.drawYAxisLabel=function(a,c,g){return this.raphael.text(a,c,g).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor",
"end")};b.prototype.drawGridLine=function(a){return this.raphael.path(a).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)};b.prototype.startRange=function(a){this.hover.hide();this.selectFrom=a;return this.selectionRect.attr({x:a,width:0}).show()};b.prototype.endRange=function(a){var c;if(this.selectFrom)return c=Math.min(this.selectFrom,a),a=Math.max(this.selectFrom,a),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(c)].x,end:this.data[this.hitTest(a)].x}),
this.selectFrom=null};b.prototype.resizeHandler=function(){this.timeoutId=null;this.raphael.setSize(this.el.width(),this.el.height());return this.redraw()};return b}(k.EventEmitter);k.parseDate=function(d){var b,a,c,g,e,f;if("number"===typeof d)return d;a=d.match(/^(\d+) Q(\d)$/);g=d.match(/^(\d+)-(\d+)$/);e=d.match(/^(\d+)-(\d+)-(\d+)$/);b=d.match(/^(\d+) W(\d+)$/);c=d.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/);f=d.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/);
return a?(new Date(parseInt(a[1],10),3*parseInt(a[2],10)-1,1)).getTime():g?(new Date(parseInt(g[1],10),parseInt(g[2],10)-1,1)).getTime():e?(new Date(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10))).getTime():b?(f=new Date(parseInt(b[1],10),0,1),4!==f.getDay()&&f.setMonth(0,1+(4-f.getDay()+7)%7),f.getTime()+6048E5*parseInt(b[2],10)):c?c[6]?(d=0,"Z"!==c[6]&&(d=60*parseInt(c[8],10)+parseInt(c[9],10),"+"===c[7]&&(d=0-d)),Date.UTC(parseInt(c[1],10),parseInt(c[2],10)-1,parseInt(c[3],10),parseInt(c[4],
10),parseInt(c[5],10)+d)):(new Date(parseInt(c[1],10),parseInt(c[2],10)-1,parseInt(c[3],10),parseInt(c[4],10),parseInt(c[5],10))).getTime():f?(c=parseFloat(f[6]),b=Math.floor(c),c=Math.round(1E3*(c-b)),f[8]?(d=0,"Z"!==f[8]&&(d=60*parseInt(f[10],10)+parseInt(f[11],10),"+"===f[9]&&(d=0-d)),Date.UTC(parseInt(f[1],10),parseInt(f[2],10)-1,parseInt(f[3],10),parseInt(f[4],10),parseInt(f[5],10)+d,b,c)):(new Date(parseInt(f[1],10),parseInt(f[2],10)-1,parseInt(f[3],10),parseInt(f[4],10),parseInt(f[5],10),b,
c)).getTime()):(new Date(parseInt(d,10),0,1)).getTime()};k.Hover=function(){function d(b){null==b&&(b={});this.options=r.extend({},k.Hover.defaults,b);this.el=r("<div class='"+this.options["class"]+"'></div>");this.el.hide();this.options.parent.append(this.el)}d.defaults={"class":"morris-hover morris-default-style"};d.prototype.update=function(b,a,c){return b?(this.html(b),this.show(),this.moveTo(a,c)):this.hide()};d.prototype.html=function(b){return this.el.html(b)};d.prototype.moveTo=function(b,
a){var c,g,e,f;f=this.options.parent.innerWidth();e=this.options.parent.innerHeight();g=this.el.outerWidth();c=this.el.outerHeight();g=Math.min(Math.max(0,b-g/2),f-g);null!=a?(f=a-c-10,0>f&&(f=a+10,f+c>e&&(f=e/2-c/2))):f=e/2-c/2;return this.el.css({left:g+"px",top:parseInt(f)+"px"})};d.prototype.show=function(){return this.el.show()};d.prototype.hide=function(){return this.el.hide()};return d}();k.Line=function(d){function b(a){this.hilight=t(this.hilight,this);this.onHoverOut=t(this.onHoverOut,this);
this.onHoverMove=t(this.onHoverMove,this);this.onGridClick=t(this.onGridClick,this);if(!(this instanceof k.Line))return new k.Line(a);b.__super__.constructor.call(this,a)}A(b,d);b.prototype.init=function(){if("always"!==this.options.hideHover)return this.hover=new k.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)};b.prototype.defaults={lineWidth:3,pointSize:4,lineColors:"#0b62a4 #7A92A3 #4da74d #afd8f8 #edc240 #cb4b4b #9440ed".split(" "),
pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1};b.prototype.calc=function(){this.calcPoints();return this.generatePaths()};b.prototype.calcPoints=function(){var a,c,g,e,b,d;b=this.data;d=[];g=0;for(e=b.length;g<e;g++)a=b[g],a._x=this.transX(a.x),a._y=function(){var g,e,b,f;b=a.y;f=[];g=0;for(e=b.length;g<e;g++)c=b[g],null!=c?f.push(this.transY(c)):f.push(c);return f}.call(this),d.push(a._ymax=Math.min.apply(Math,
[this.bottom].concat(function(){var g,e,b,f;b=a._y;f=[];g=0;for(e=b.length;g<e;g++)c=b[g],null!=c&&f.push(c);return f}())));return d};b.prototype.hitTest=function(a){var c,g,e,b,d;if(0===this.data.length)return null;d=this.data.slice(1);c=e=0;for(b=d.length;e<b&&!(g=d[c],a<(g._x+this.data[c]._x)/2);c=++e);return c};b.prototype.onGridClick=function(a,c){var g;g=this.hitTest(a);return this.fire("click",g,this.data[g].src,a,c)};b.prototype.onHoverMove=function(a,c){var g;g=this.hitTest(a);return this.displayHoverForRow(g)};
b.prototype.onHoverOut=function(){if(!1!==this.options.hideHover)return this.displayHoverForRow(null)};b.prototype.displayHoverForRow=function(a){var c;if(null!=a)return(c=this.hover).update.apply(c,this.hoverContentForRow(a)),this.hilight(a);this.hover.hide();return this.hilight()};b.prototype.hoverContentForRow=function(a){var c,g,e,b,d,l,h;e=this.data[a];c="<div class='morris-hover-row-label'>"+e.label+"</div>";h=e.y;g=d=0;for(l=h.length;d<l;g=++d)b=h[g],c+="<div class='morris-hover-point' style='color: "+
this.colorFor(e,g,"label")+"'>\n  "+this.options.labels[g]+":\n  "+this.yLabelFormat(b)+"\n</div>";"function"===typeof this.options.hoverCallback&&(c=this.options.hoverCallback(a,this.options,c,e.src));return[c,e._x,e._ymax]};b.prototype.generatePaths=function(){var a,c,g,e,b,d,l;l=[];a=e=0;for(b=this.options.ykeys.length;0<=b?e<b:e>b;a=0<=b?++e:--e){g="boolean"===typeof this.options.smooth?this.options.smooth:(d=this.options.ykeys[a],0<=D.call(this.options.smooth,d));for(var h=void 0,q=void 0,m=
void 0,p=void 0,m=this.data,p=[],h=0,q=m.length;h<q;h++)c=m[h],void 0!==c._y[a]&&p.push({x:c._x,y:c._y[a]});a=p;1<a.length?l.push(k.Line.createPath(a,g,this.bottom)):l.push(null)}return this.paths=l};b.prototype.draw=function(){var a;!0!==(a=this.options.axes)&&"both"!==a&&"x"!==a||this.drawXAxis();this.drawSeries();if(!1===this.options.hideHover)return this.displayHoverForRow(this.data.length-1)};b.prototype.drawXAxis=function(){var a,c,g,e,b,d,l,h,q,m,p=this;l=this.bottom+this.options.padding/2;
e=b=null;a=function(a,c){var g,d,h;g=p.drawXAxisLabel(p.transX(c),l,a);h=g.getBBox();g.transform("r"+-p.options.xLabelAngle);d=g.getBBox();g.transform("t0,"+d.height/2+"...");0!==p.options.xLabelAngle&&(d=-0.5*h.width*Math.cos(p.options.xLabelAngle*Math.PI/180),g.transform("t"+d+",0..."));d=g.getBBox();return(null==b||b>=d.x+d.width||null!=e&&e>=d.x)&&0<=d.x&&d.x+d.width<p.el.width()?(0!==p.options.xLabelAngle&&(g=1.25*p.options.gridTextSize/Math.sin(p.options.xLabelAngle*Math.PI/180),e=d.x-g),b=
d.x-p.options.xLabelMargin):g.remove()};g=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:k.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var a,c,g,b;g=this.data;b=[];a=0;for(c=g.length;a<c;a++)d=g[a],b.push([d.label,d.x]);return b}.call(this);g.reverse();m=[];h=0;for(q=g.length;h<q;h++)c=g[h],m.push(a(c[0],c[1]));return m};b.prototype.drawSeries=function(){var a,c,g,b;this.seriesPoints=
[];for(a=c=g=this.options.ykeys.length-1;0>=g?0>=c:0<=c;a=0>=g?++c:--c)this._drawLineFor(a);b=[];for(a=c=g=this.options.ykeys.length-1;0>=g?0>=c:0<=c;a=0>=g?++c:--c)b.push(this._drawPointFor(a));return b};b.prototype._drawPointFor=function(a){var c,g,b,d,n,l;this.seriesPoints[a]=[];n=this.data;l=[];b=0;for(d=n.length;b<d;b++)g=n[b],c=null,null!=g._y[a]&&(c=this.drawLinePoint(g._x,g._y[a],this.colorFor(g,a,"point"),a)),l.push(this.seriesPoints[a].push(c));return l};b.prototype._drawLineFor=function(a){var c;
c=this.paths[a];if(null!==c)return this.drawLinePath(c,this.colorFor(null,a,"line"),a)};b.createPath=function(a,c,g){var b,d,n,l,h,q,m,p,s,w;m="";c&&(n=k.Line.gradients(a));p={y:null};l=s=0;for(w=a.length;s<w;l=++s)b=a[l],null!=b.y&&(null!=p.y?c?(d=n[l],q=n[l-1],h=(b.x-p.x)/4,l=p.x+h,q=Math.min(g,p.y+h*q),p=b.x-h,d=Math.min(g,b.y-h*d),m+="C"+l+","+q+","+p+","+d+","+b.x+","+b.y):m+="L"+b.x+","+b.y:c&&null==n[l]||(m+="M"+b.x+","+b.y)),p=b;return m};b.gradients=function(a){var c,b,e,d,n,l,h;b=function(a,
c){return(a.y-c.y)/(a.x-c.x)};h=[];e=n=0;for(l=a.length;n<l;e=++n)c=a[e],null!=c.y?(d=a[e+1]||{y:null},e=a[e-1]||{y:null},null!=e.y&&null!=d.y?h.push(b(e,d)):null!=e.y?h.push(b(e,c)):null!=d.y?h.push(b(c,d)):h.push(null)):h.push(null);return h};b.prototype.hilight=function(a){var c,b,e;if(null!==this.prevHilight&&this.prevHilight!==a)for(c=b=0,e=this.seriesPoints.length-1;0<=e?b<=e:b>=e;c=0<=e?++b:--b)this.seriesPoints[c][this.prevHilight]&&this.seriesPoints[c][this.prevHilight].animate(this.pointShrinkSeries(c));
if(null!==a&&this.prevHilight!==a)for(c=b=0,e=this.seriesPoints.length-1;0<=e?b<=e:b>=e;c=0<=e?++b:--b)this.seriesPoints[c][a]&&this.seriesPoints[c][a].animate(this.pointGrowSeries(c));return this.prevHilight=a};b.prototype.colorFor=function(a,c,b){return"function"===typeof this.options.lineColors?this.options.lineColors.call(this,a,c,b):"point"===b?this.options.pointFillColors[c%this.options.pointFillColors.length]||this.options.lineColors[c%this.options.lineColors.length]:this.options.lineColors[c%
this.options.lineColors.length]};b.prototype.drawXAxisLabel=function(a,c,b){return this.raphael.text(a,c,b).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)};b.prototype.drawLinePath=function(a,c,b){return this.raphael.path(a).attr("stroke",c).attr("stroke-width",this.lineWidthForSeries(b))};b.prototype.drawLinePoint=function(a,c,b,e){return this.raphael.circle(a,c,this.pointSizeForSeries(e)).attr("fill",
b).attr("stroke-width",this.pointStrokeWidthForSeries(e)).attr("stroke",this.pointStrokeColorForSeries(e))};b.prototype.pointStrokeWidthForSeries=function(a){return this.options.pointStrokeWidths[a%this.options.pointStrokeWidths.length]};b.prototype.pointStrokeColorForSeries=function(a){return this.options.pointStrokeColors[a%this.options.pointStrokeColors.length]};b.prototype.lineWidthForSeries=function(a){return this.options.lineWidth instanceof Array?this.options.lineWidth[a%this.options.lineWidth.length]:
this.options.lineWidth};b.prototype.pointSizeForSeries=function(a){return this.options.pointSize instanceof Array?this.options.pointSize[a%this.options.pointSize.length]:this.options.pointSize};b.prototype.pointGrowSeries=function(a){return Raphael.animation({r:this.pointSizeForSeries(a)+3},25,"linear")};b.prototype.pointShrinkSeries=function(a){return Raphael.animation({r:this.pointSizeForSeries(a)},25,"linear")};return b}(k.Grid);k.labelSeries=function(d,b,a,c,g){var e,f,n,l,h;e=200*(b-d)/a;a=new Date(d);
c=k.LABEL_SPECS[c];if(void 0===c)for(h=k.AUTO_LABEL_ORDER,n=0,l=h.length;n<l;n++)if(f=h[n],f=k.LABEL_SPECS[f],e>=f.span){c=f;break}void 0===c&&(c=k.LABEL_SPECS.second);g&&(c=r.extend({},c,{fmt:g}));g=c.start(a);for(a=[];(e=g.getTime())<=b;)e>=d&&a.push([c.fmt(g),e]),c.incr(g);return a};v=function(d){return{span:6E4*d,start:function(b){return new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours())},fmt:function(b){return""+k.pad2(b.getHours())+":"+k.pad2(b.getMinutes())},incr:function(b){return b.setUTCMinutes(b.getUTCMinutes()+
d)}}};z=function(d){return{span:1E3*d,start:function(b){return new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes())},fmt:function(b){return""+k.pad2(b.getHours())+":"+k.pad2(b.getMinutes())+":"+k.pad2(b.getSeconds())},incr:function(b){return b.setUTCSeconds(b.getUTCSeconds()+d)}}};k.LABEL_SPECS={decade:{span:1728E8,start:function(d){return new Date(d.getFullYear()-d.getFullYear()%10,0,1)},fmt:function(d){return""+d.getFullYear()},incr:function(d){return d.setFullYear(d.getFullYear()+
10)}},year:{span:1728E7,start:function(d){return new Date(d.getFullYear(),0,1)},fmt:function(d){return""+d.getFullYear()},incr:function(d){return d.setFullYear(d.getFullYear()+1)}},month:{span:24192E5,start:function(d){return new Date(d.getFullYear(),d.getMonth(),1)},fmt:function(d){return""+d.getFullYear()+"-"+k.pad2(d.getMonth()+1)},incr:function(d){return d.setMonth(d.getMonth()+1)}},week:{span:6048E5,start:function(d){return new Date(d.getFullYear(),d.getMonth(),d.getDate())},fmt:function(d){return""+
d.getFullYear()+"-"+k.pad2(d.getMonth()+1)+"-"+k.pad2(d.getDate())},incr:function(d){return d.setDate(d.getDate()+7)}},day:{span:864E5,start:function(d){return new Date(d.getFullYear(),d.getMonth(),d.getDate())},fmt:function(d){return""+d.getFullYear()+"-"+k.pad2(d.getMonth()+1)+"-"+k.pad2(d.getDate())},incr:function(d){return d.setDate(d.getDate()+1)}},hour:v(60),"30min":v(30),"15min":v(15),"10min":v(10),"5min":v(5),minute:v(1),"30sec":z(30),"15sec":z(15),"10sec":z(10),"5sec":z(5),second:z(1)};k.AUTO_LABEL_ORDER=
"decade year month week day hour 30min 15min 10min 5min minute 30sec 15sec 10sec 5sec second".split(" ");k.Area=function(d){function b(c){if(!(this instanceof k.Area))return new k.Area(c);c=r.extend({},a,c);this.cumulative=!c.behaveLikeLine;"auto"===c.fillOpacity&&(c.fillOpacity=c.behaveLikeLine?0.8:1);b.__super__.constructor.call(this,c)}var a;A(b,d);a={fillOpacity:"auto",behaveLikeLine:!1};b.prototype.calcPoints=function(){var a,b,e,d,n,l,h;l=this.data;h=[];d=0;for(n=l.length;d<n;d++){a=l[d];a._x=
this.transX(a.x);b=0;for(var k=a,m=void 0,p=void 0,s=void 0,w=void 0,s=a.y,w=[],m=0,p=s.length;m<p;m++)e=s[m],this.options.behaveLikeLine?w.push(this.transY(e)):(b+=e||0,w.push(this.transY(b)));k._y=w;h.push(a._ymax=Math.max.apply(Math,a._y))}return h};b.prototype.drawSeries=function(){var a,b,e,d,n,l,h,k;this.seriesPoints=[];b=this.options.behaveLikeLine?function(){l=[];for(var a=0,c=this.options.ykeys.length-1;0<=c?a<=c:a>=c;0<=c?a++:a--)l.push(a);return l}.apply(this):function(){h=[];for(var a=
n=this.options.ykeys.length-1;0>=n?0>=a:0<=a;0>=n?a++:a--)h.push(a);return h}.apply(this);k=[];e=0;for(d=b.length;e<d;e++)a=b[e],this._drawFillFor(a),this._drawLineFor(a),k.push(this._drawPointFor(a));return k};b.prototype._drawFillFor=function(a){var b;b=this.paths[a];if(null!==b)return b+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(b,this.fillForSeries(a))};b.prototype.fillForSeries=function(a){a=Raphael.rgb2hsl(this.colorFor(this.data[a],
a,"line"));return Raphael.hsl(a.h,this.options.behaveLikeLine?0.9*a.s:0.75*a.s,Math.min(0.98,this.options.behaveLikeLine?1.2*a.l:1.25*a.l))};b.prototype.drawFilledPath=function(a,b){return this.raphael.path(a).attr("fill",b).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")};return b}(k.Line);k.Bar=function(d){function b(a){this.onHoverOut=t(this.onHoverOut,this);this.onHoverMove=t(this.onHoverMove,this);this.onGridClick=t(this.onGridClick,this);if(!(this instanceof k.Bar))return new k.Bar(a);
b.__super__.constructor.call(this,r.extend({},a,{parseTime:!1}))}A(b,d);b.prototype.init=function(){this.cumulative=this.options.stacked;if("always"!==this.options.hideHover)return this.hover=new k.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)};b.prototype.defaults={barSizeRatio:0.75,barGap:3,barColors:"#0b62a4 #7a92a3 #4da74d #afd8f8 #edc240 #cb4b4b #9440ed".split(" "),barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50};
b.prototype.calc=function(){var a;this.calcBars();if(!1===this.options.hideHover)return(a=this.hover).update.apply(a,this.hoverContentForRow(this.data.length-1))};b.prototype.calcBars=function(){var a,c,b,e,d,n,l;n=this.data;l=[];a=e=0;for(d=n.length;e<d;a=++e)c=n[a],c._x=this.left+this.width*(a+0.5)/this.data.length,l.push(c._y=function(){var a,e,d,f;d=c.y;f=[];a=0;for(e=d.length;a<e;a++)b=d[a],null!=b?f.push(this.transY(b)):f.push(null);return f}.call(this));return l};b.prototype.draw=function(){var a;
!0!==(a=this.options.axes)&&"both"!==a&&"x"!==a||this.drawXAxis();return this.drawSeries()};b.prototype.drawXAxis=function(){var a,c,b,e,d,n,l,h,k;n=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2);b=d=null;k=[];a=l=0;for(h=this.data.length;0<=h?l<h:l>h;a=0<=h?++l:--l)a=this.data[this.data.length-1-a],c=this.drawXAxisLabel(a._x,n,a.label),e=c.getBBox(),c.transform("r"+-this.options.xLabelAngle),a=c.getBBox(),c.transform("t0,"+a.height/2+"..."),0!==this.options.xLabelAngle&&
(e=-0.5*e.width*Math.cos(this.options.xLabelAngle*Math.PI/180),c.transform("t"+e+",0...")),(null==d||d>=a.x+a.width||null!=b&&b>=a.x)&&0<=a.x&&a.x+a.width<this.el.width()?(0!==this.options.xLabelAngle&&(b=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),b=a.x-b),k.push(d=a.x-this.options.xLabelMargin)):k.push(c.remove());return k};b.prototype.drawSeries=function(){var a,c,b,d,f,n,l,h,k,m,p,s,w,r;b=this.width/this.options.data.length;h=this.options.stacked?1:this.options.ykeys.length;
a=(b*this.options.barSizeRatio-this.options.barGap*(h-1))/h;this.options.barSize&&(a=Math.min(a,this.options.barSize));l=(b-a*h-this.options.barGap*(h-1))/2;r=0>=this.ymin&&0<=this.ymax?this.transY(0):null;return this.bars=function(){var h,u,t,v;t=this.data;v=[];d=h=0;for(u=t.length;h<u;d=++h)k=t[d],f=0,v.push(function(){var h,t,u,v;u=k._y;v=[];m=h=0;for(t=u.length;h<t;m=++h)w=u[m],null!==w?(r?(s=Math.min(w,r),c=Math.max(w,r)):(s=w,c=this.bottom),n=this.left+d*b+l,this.options.stacked||(n+=m*(a+this.options.barGap)),
p=c-s,this.options.verticalGridCondition&&this.options.verticalGridCondition(k.x)&&this.drawBar(this.left+d*b,this.top,b,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius),this.options.stacked&&(s-=f),this.drawBar(n,s,a,p,this.colorFor(k,m,"bar"),this.options.barOpacity,this.options.barRadius),v.push(f+=p)):v.push(null);return v}.call(this));return v}.call(this)};b.prototype.colorFor=function(a,c,b){return"function"===typeof this.options.barColors?
(a={x:a.x,y:a.y[c],label:a.label},c={index:c,key:this.options.ykeys[c],label:this.options.labels[c]},this.options.barColors.call(this,a,c,b)):this.options.barColors[c%this.options.barColors.length]};b.prototype.hitTest=function(a){if(0===this.data.length)return null;a=Math.max(Math.min(a,this.right),this.left);return Math.min(this.data.length-1,Math.floor((a-this.left)/(this.width/this.data.length)))};b.prototype.onGridClick=function(a,c){var b;b=this.hitTest(a);return this.fire("click",b,this.data[b].src,
a,c)};b.prototype.onHoverMove=function(a,c){var b,d;b=this.hitTest(a);return(d=this.hover).update.apply(d,this.hoverContentForRow(b))};b.prototype.onHoverOut=function(){if(!1!==this.options.hideHover)return this.hover.hide()};b.prototype.hoverContentForRow=function(a){var c,b,d,f,k,l,h;d=this.data[a];c="<div class='morris-hover-row-label'>"+d.label+"</div>";h=d.y;b=k=0;for(l=h.length;k<l;b=++k)f=h[b],c+="<div class='morris-hover-point' style='color: "+this.colorFor(d,b,"label")+"'>\n  "+this.options.labels[b]+
":\n  "+this.yLabelFormat(f)+"\n</div>";"function"===typeof this.options.hoverCallback&&(c=this.options.hoverCallback(a,this.options,c,d.src));return[c,this.left+(a+0.5)*this.width/this.data.length]};b.prototype.drawXAxisLabel=function(a,c,b){return this.raphael.text(a,c,b).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)};b.prototype.drawBar=function(a,c,b,d,f,k,l){var h;
h=Math.max.apply(Math,l);return(0===h||h>d?this.raphael.rect(a,c,b,d):this.raphael.path(this.roundedRect(a,c,b,d,l))).attr("fill",f).attr("fill-opacity",k).attr("stroke","none")};b.prototype.roundedRect=function(a,c,b,d,f){null==f&&(f=[0,0,0,0]);return["M",a,f[0]+c,"Q",a,c,a+f[0],c,"L",a+b-f[1],c,"Q",a+b,c,a+b,c+f[1],"L",a+b,c+d-f[2],"Q",a+b,c+d,a+b-f[2],c+d,"L",a+f[3],c+d,"Q",a,c+d,a,c+d-f[3],"Z"]};return b}(k.Grid);k.Donut=function(d){function b(a){this.resizeHandler=t(this.resizeHandler,this);
this.select=t(this.select,this);this.click=t(this.click,this);var b=this;if(!(this instanceof k.Donut))return new k.Donut(a);this.options=r.extend({},this.defaults,a);this.el="string"===typeof a.element?r(document.getElementById(a.element)):r(a.element);if(null===this.el||0===this.el.length)throw Error("Graph placeholder not found.");void 0!==a.data&&0!==a.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&r(window).bind("resize",function(a){null!=b.timeoutId&&window.clearTimeout(b.timeoutId);
return b.timeoutId=window.setTimeout(b.resizeHandler,100)}),this.setData(a.data))}A(b,d);b.prototype.defaults={colors:"#0B62A4 #3980B5 #679DC6 #95BBD7 #B0CCE1 #095791 #095085 #083E67 #052C48 #042135".split(" "),backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:k.commas,resize:!1};b.prototype.redraw=function(){var a,b,d,e,f,n,l,h,q,m,p,s,r;this.raphael.clear();b=this.el.width()/2;d=this.el.height()/2;m=(Math.min(b,d)-10)/3;q=0;l=this.values;f=0;for(a=l.length;f<a;f++)h=l[f],q+=h;l=5/(2*m);a=
1.9999*Math.PI-l*this.data.length;f=n=0;this.segments=[];r=this.values;e=p=0;for(s=r.length;p<s;e=++p)h=r[e],h=n+l+h/q*a,e=new k.DonutSegment(b,d,2*m,m,n,h,this.data[e].color||this.options.colors[f%this.options.colors.length],this.options.backgroundColor,f,this.raphael),e.render(),this.segments.push(e),e.on("hover",this.select),e.on("click",this.click),n=h,f+=1;this.text1=this.drawEmptyDonutLabel(b,d-10,this.options.labelColor,15,800);this.text2=this.drawEmptyDonutLabel(b,d+10,this.options.labelColor,
14);b=Math.max.apply(Math,this.values);f=0;m=this.values;a=[];d=0;for(q=m.length;d<q;d++){h=m[d];if(h===b){this.select(f);break}a.push(f+=1)}return a};b.prototype.setData=function(a){this.data=a;var b,d,e,f;e=this.data;f=[];b=0;for(d=e.length;b<d;b++)a=e[b],f.push(parseFloat(a.value));this.values=f;return this.redraw()};b.prototype.click=function(a){return this.fire("click",a,this.data[a])};b.prototype.select=function(a){var b,d,e,f;f=this.segments;d=0;for(e=f.length;d<e;d++)b=f[d],b.deselect();this.segments[a].select();
a=this.data[a];return this.setLabels(a.label,this.options.formatter(a.value,a))};b.prototype.setLabels=function(a,b){var d,e,f,k;d=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3;f=1.8*d;e=d/2;d/=3;this.text1.attr({text:a,transform:""});k=this.text1.getBBox();e=Math.min(f/k.width,e/k.height);this.text1.attr({transform:"S"+e+","+e+","+(k.x+k.width/2)+","+(k.y+k.height)});this.text2.attr({text:b,transform:""});e=this.text2.getBBox();f=Math.min(f/e.width,d/e.height);return this.text2.attr({transform:"S"+
f+","+f+","+(e.x+e.width/2)+","+e.y})};b.prototype.drawEmptyDonutLabel=function(a,b,d,e,f){a=this.raphael.text(a,b,"").attr("font-size",e).attr("fill",d);null!=f&&a.attr("font-weight",f);return a};b.prototype.resizeHandler=function(){this.timeoutId=null;this.raphael.setSize(this.el.width(),this.el.height());return this.redraw()};return b}(k.EventEmitter);k.DonutSegment=function(d){function b(a,b,d,e,f,k,l,h,q,m){this.cx=a;this.cy=b;this.inner=d;this.outer=e;this.color=l;this.backgroundColor=h;this.index=
q;this.raphael=m;this.deselect=t(this.deselect,this);this.select=t(this.select,this);this.sin_p0=Math.sin(f);this.cos_p0=Math.cos(f);this.sin_p1=Math.sin(k);this.cos_p1=Math.cos(k);this.is_long=k-f>Math.PI?1:0;this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5);this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer);this.hilight=this.calcArc(this.inner)}A(b,d);b.prototype.calcArcPoints=function(a){return[this.cx+a*this.sin_p0,this.cy+a*this.cos_p0,this.cx+a*this.sin_p1,
this.cy+a*this.cos_p1]};b.prototype.calcSegment=function(a,b){var d,e,f,k,l;k=this.calcArcPoints(a);d=k[0];f=k[1];e=k[2];k=k[3];l=this.calcArcPoints(b);return"M"+d+","+f+("A"+a+","+a+",0,"+this.is_long+",0,"+e+","+k)+("L"+l[2]+","+l[3])+("A"+b+","+b+",0,"+this.is_long+",1,"+l[0]+","+l[1])+"Z"};b.prototype.calcArc=function(a){var b;b=this.calcArcPoints(a);return"M"+b[0]+","+b[1]+("A"+a+","+a+",0,"+this.is_long+",0,"+b[2]+","+b[3])};b.prototype.render=function(){var a=this;this.arc=this.drawDonutArc(this.hilight,
this.color);return this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return a.fire("hover",a.index)},function(){return a.fire("click",a.index)})};b.prototype.drawDonutArc=function(a,b){return this.raphael.path(a).attr({stroke:b,"stroke-width":2,opacity:0})};b.prototype.drawDonutSegment=function(a,b,d,e,f){return this.raphael.path(a).attr({fill:b,stroke:d,"stroke-width":3}).hover(e).click(f)};b.prototype.select=function(){if(!this.selected)return this.seg.animate({path:this.selectedPath},
150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0};b.prototype.deselect=function(){if(this.selected)return this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1};return b}(k.EventEmitter)}).call(this);
