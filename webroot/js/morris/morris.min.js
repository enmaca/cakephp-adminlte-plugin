(function(){var r,m,x,y,B=[].slice,s=function(c,b){return function(){return c.apply(b,arguments)}},C={}.hasOwnProperty,z=function(c,b){function a(){this.constructor=c}for(var d in b)C.call(b,d)&&(c[d]=b[d]);return a.prototype=b.prototype,c.prototype=new a,c.__super__=b.prototype,c},D=[].indexOf||function(c){for(var b=0,a=this.length;a>b;b++)if(b in this&&this[b]===c)return b;return-1};m=window.Morris={};r=jQuery;m.EventEmitter=function(){function c(){}return c.prototype.on=function(b,a){return null==
this.handlers&&(this.handlers={}),null==this.handlers[b]&&(this.handlers[b]=[]),this.handlers[b].push(a),this},c.prototype.fire=function(){var b,a,d,f,e,l;if(a=arguments[0],b=2<=arguments.length?B.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[a]){e=this.handlers[a];l=[];d=0;for(f=e.length;f>d;d++)a=e[d],l.push(a.apply(null,b));return l}},c}();m.commas=function(c){var b,a,d,f;return null!=c?(d=0>c?"-":"",b=Math.abs(c),a=Math.floor(b).toFixed(0),d+=a.replace(/(?=(?:\d{3})+$)(?!^)/g,
","),f=b.toString(),f.length>a.length&&(d+=f.slice(a.length)),d):"-"};m.pad2=function(c){return(10>c?"0":"")+c};m.Grid=function(c){function b(a){this.resizeHandler=s(this.resizeHandler,this);var d=this;if(this.el="string"==typeof a.element?r(document.getElementById(a.element)):r(a.element),null==this.el||0===this.el.length)throw Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative");this.options=r.extend({},this.gridDefaults,this.defaults||
{},a);"string"==typeof this.options.units&&(this.options.postUnits=a.units);this.raphael=new Raphael(this.el[0]);this.elementHeight=this.elementWidth=null;this.dirty=!1;this.selectFrom=null;this.init&&this.init();this.setData(this.options.data);this.el.bind("mousemove",function(a){var e,l,b,g,h;return l=d.el.offset(),h=a.pageX-l.left,d.selectFrom?(e=d.data[d.hitTest(Math.min(h,d.selectFrom))]._x,b=d.data[d.hitTest(Math.max(h,d.selectFrom))]._x,g=b-e,d.selectionRect.attr({x:e,width:g})):d.fire("hovermove",
h,a.pageY-l.top)});this.el.bind("mouseleave",function(){return d.selectFrom&&(d.selectionRect.hide(),d.selectFrom=null),d.fire("hoverout")});this.el.bind("touchstart touchmove touchend",function(a){var e,b;return b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0],e=d.el.offset(),d.fire("hovermove",b.pageX-e.left,b.pageY-e.top)});this.el.bind("click",function(a){var e;return e=d.el.offset(),d.fire("gridclick",a.pageX-e.left,a.pageY-e.top)});this.options.rangeSelect&&(this.selectionRect=
this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(a){var e;return e=d.el.offset(),d.startRange(a.pageX-e.left)}),this.el.bind("mouseup",function(a){var e;return e=d.el.offset(),d.endRange(a.pageX-e.left),d.fire("hovermove",a.pageX-e.left,a.pageY-e.top)}));this.options.resize&&r(window).bind("resize",function(){return null!=d.timeoutId&&window.clearTimeout(d.timeoutId),d.timeoutId=window.setTimeout(d.resizeHandler,
100)});this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)");this.postInit&&this.postInit()}return z(b,c),b.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:0.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666",
"#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1},b.prototype.setData=function(a,d){var f,e,b,k,g,h,n,c,p,w,A,t,v,u,r;return null==d&&(d=!0),this.options.data=a,null==a||0===a.length?(this.data=[],this.raphael.clear(),null!=this.hover&&this.hover.hide(),void 0):(t=this.cumulative?0:null,v=this.cumulative?0:null,0<this.options.goals.length&&(g=Math.min.apply(Math,this.options.goals),k=Math.max.apply(Math,
this.options.goals),v=null!=v?Math.min(v,g):g,t=null!=t?Math.max(t,k):k),this.data=function(){var d,f,g;g=[];b=d=0;for(f=a.length;f>d;b=++d){n=a[b];h={src:n};h.label=n[this.options.xkey];this.options.parseTime?(h.x=m.parseDate(h.label),this.options.dateFormat?h.label=this.options.dateFormat(h.x):"number"==typeof h.label&&(h.label=(new Date(h.label)).toString())):(h.x=b,this.options.xLabelFormat&&(h.label=this.options.xLabelFormat(h)));p=0;var k=h,c=void 0,q=void 0,w=void 0,r=void 0,w=this.options.ykeys,
r=[];e=c=0;for(q=w.length;q>c;e=++c)A=w[e],u=n[A],"string"==typeof u&&(u=parseFloat(u)),null!=u&&"number"!=typeof u&&(u=null),null!=u&&(this.cumulative?p+=u:null!=t?(t=Math.max(u,t),v=Math.min(u,v)):t=v=u),this.cumulative&&null!=p&&(t=Math.max(p,t),v=Math.min(p,v)),r.push(u);k.y=r;g.push(h)}return g}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(a,d){return(a.x>d.x)-(d.x>a.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],0<this.options.events.length&&
(this.events=this.options.parseTime?function(){var a,d,e,b;e=this.options.events;b=[];a=0;for(d=e.length;d>a;a++)f=e[a],b.push(m.parseDate(f));return b}.call(this):this.options.events,this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",v),this.ymax=this.yboundary("max",t),this.ymin===this.ymax&&(v&&(this.ymin-=1),this.ymax+=1),(!0===(r=this.options.axes)||
"both"===r||"y"===r||!0===this.options.grid)&&(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(c=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var a,d,f;f=[];w=a=this.ymin;for(d=this.ymax;0<c?d>=a:a>=d;w=a+=c)f.push(w);return f}.call(this))),this.dirty=!0,d?this.redraw():
void 0)},b.prototype.yboundary=function(a,d){var f,e;return f=this.options["y"+a],"string"==typeof f?"auto"===f.slice(0,4)?5<f.length?(e=parseInt(f.slice(5),10),null==d?e:Math[a](d,e)):null!=d?d:0:parseInt(f,10):f},b.prototype.autoGridLines=function(a,d,f){var e,b,k,g,h,c,q,p,m;return h=d-a,m=Math.floor(Math.log(h)/Math.log(10)),q=Math.pow(10,m),b=Math.floor(a/q)*q,e=Math.ceil(d/q)*q,c=(e-b)/(f-1),1===q&&1<c&&Math.ceil(c)!==c&&(c=Math.ceil(c),e=b+c*(f-1)),0>b&&0<e&&(b=Math.floor(a/c)*c,e=Math.ceil(d/
c)*c),1>c?(g=Math.floor(Math.log(c)/Math.log(10)),k=function(){var a,d;d=[];for(p=a=b;0<c?e>=a:a>=e;p=a+=c)d.push(parseFloat(p.toFixed(1-g)));return d}()):k=function(){var a,d;d=[];for(p=a=b;0<c?e>=a:a>=e;p=a+=c)d.push(p);return d}(),k},b.prototype._calc=function(){var a,d,f,e,b,c,g,h;return b=this.el.width(),f=this.el.height(),(this.elementWidth!==b||this.elementHeight!==f||this.dirty)&&(this.elementWidth=b,this.elementHeight=f,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-
this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,(!0===(g=this.options.axes)||"both"===g||"y"===g)&&(c=function(){var a,f,e,b;e=this.grid;b=[];a=0;for(f=e.length;f>a;a++)d=e[a],b.push(this.measureText(this.yAxisFormat(d)).width);return b}.call(this),this.left+=Math.max.apply(Math,c)),(!0===(h=this.options.axes)||"both"===h||"x"===h)&&(a=function(){var a,d,f;f=[];e=a=0;for(d=this.data.length;0<=d?d>a:a>d;e=0<=d?++a:--a)f.push(this.measureText(this.data[e].text,
-this.options.xLabelAngle).height);return f}.call(this),this.bottom-=Math.max.apply(Math,a)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.calc)?this.calc():void 0},b.prototype.transY=function(a){return this.bottom-(a-this.ymin)*this.dy},b.prototype.transX=function(a){return 1===this.data.length?(this.left+this.right)/2:this.left+(a-this.xmin)*this.dx},b.prototype.redraw=
function(){return this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw?this.draw():void 0},b.prototype.measureText=function(a,d){var f,e;return null==d&&(d=0),e=this.raphael.text(100,100,a).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(d),f=e.getBBox(),e.remove(),f},b.prototype.yAxisFormat=function(a){return this.yLabelFormat(a)},b.prototype.yLabelFormat=function(a){return"function"==
typeof this.options.yLabelFormat?this.options.yLabelFormat(a):""+this.options.preUnits+m.commas(a)+this.options.postUnits},b.prototype.drawGrid=function(){var a,d,f,e,b,c,g;if(!1!==this.options.grid||!0===(a=this.options.axes)||"both"===a||"y"===a){b=this.grid;g=[];f=0;for(e=b.length;e>f;f++)a=b[f],d=this.transY(a),!0!==(c=this.options.axes)&&"both"!==c&&"y"!==c||this.drawYAxisLabel(this.left-this.options.padding/2,d,this.yAxisFormat(a)),this.options.grid?g.push(this.drawGridLine("M"+this.left+","+
d+"H"+(this.left+this.width))):g.push(void 0);return g}},b.prototype.drawGoals=function(){var a,d,f,e,b,c;b=this.options.goals;c=[];a=f=0;for(e=b.length;e>f;a=++f)d=b[a],a=this.options.goalLineColors[a%this.options.goalLineColors.length],c.push(this.drawGoal(d,a));return c},b.prototype.drawEvents=function(){var a,d,f,e,b,c;b=this.events;c=[];a=f=0;for(e=b.length;e>f;a=++f)d=b[a],a=this.options.eventLineColors[a%this.options.eventLineColors.length],c.push(this.drawEvent(d,a));return c},b.prototype.drawGoal=
function(a,d){return this.raphael.path("M"+this.left+","+this.transY(a)+"H"+this.right).attr("stroke",d).attr("stroke-width",this.options.goalStrokeWidth)},b.prototype.drawEvent=function(a,d){return this.raphael.path("M"+this.transX(a)+","+this.bottom+"V"+this.top).attr("stroke",d).attr("stroke-width",this.options.eventStrokeWidth)},b.prototype.drawYAxisLabel=function(a,d,f){return this.raphael.text(a,d,f).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",
this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},b.prototype.drawGridLine=function(a){return this.raphael.path(a).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},b.prototype.startRange=function(a){return this.hover.hide(),this.selectFrom=a,this.selectionRect.attr({x:a,width:0}).show()},b.prototype.endRange=function(a){var d,f;return this.selectFrom?(f=Math.min(this.selectFrom,a),d=Math.max(this.selectFrom,
a),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(f)].x,end:this.data[this.hitTest(d)].x}),this.selectFrom=null):void 0},b.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},b}(m.EventEmitter);m.parseDate=function(c){var b,a,d,f,e,l,k,g,h,n,q;return"number"==typeof c?c:(a=c.match(/^(\d+) Q(\d)$/),f=c.match(/^(\d+)-(\d+)$/),e=c.match(/^(\d+)-(\d+)-(\d+)$/),k=c.match(/^(\d+) W(\d+)$/),g=c.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),
h=c.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),a?(new Date(parseInt(a[1],10),3*parseInt(a[2],10)-1,1)).getTime():f?(new Date(parseInt(f[1],10),parseInt(f[2],10)-1,1)).getTime():e?(new Date(parseInt(e[1],10),parseInt(e[2],10)-1,parseInt(e[3],10))).getTime():k?(n=new Date(parseInt(k[1],10),0,1),4!==n.getDay()&&n.setMonth(0,1+(4-n.getDay()+7)%7),n.getTime()+6048E5*parseInt(k[2],10)):g?g[6]?(l=0,"Z"!==g[6]&&(l=60*parseInt(g[8],10)+parseInt(g[9],10),"+"===g[7]&&
(l=0-l)),Date.UTC(parseInt(g[1],10),parseInt(g[2],10)-1,parseInt(g[3],10),parseInt(g[4],10),parseInt(g[5],10)+l)):(new Date(parseInt(g[1],10),parseInt(g[2],10)-1,parseInt(g[3],10),parseInt(g[4],10),parseInt(g[5],10))).getTime():h?(q=parseFloat(h[6]),b=Math.floor(q),d=Math.round(1E3*(q-b)),h[8]?(l=0,"Z"!==h[8]&&(l=60*parseInt(h[10],10)+parseInt(h[11],10),"+"===h[9]&&(l=0-l)),Date.UTC(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10)+l,b,d)):(new Date(parseInt(h[1],
10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10),b,d)).getTime()):(new Date(parseInt(c,10),0,1)).getTime())};m.Hover=function(){function c(b){null==b&&(b={});this.options=r.extend({},m.Hover.defaults,b);this.el=r("<div class='"+this.options["class"]+"'></div>");this.el.hide();this.options.parent.append(this.el)}return c.defaults={"class":"morris-hover morris-default-style"},c.prototype.update=function(b,a,d){return b?(this.html(b),this.show(),this.moveTo(a,d)):this.hide()},
c.prototype.html=function(b){return this.el.html(b)},c.prototype.moveTo=function(b,a){var d,f,e,c,k,g;return k=this.options.parent.innerWidth(),c=this.options.parent.innerHeight(),f=this.el.outerWidth(),d=this.el.outerHeight(),e=Math.min(Math.max(0,b-f/2),k-f),null!=a?(g=a-d-10,0>g&&(g=a+10,g+d>c&&(g=c/2-d/2))):g=c/2-d/2,this.el.css({left:e+"px",top:parseInt(g)+"px"})},c.prototype.show=function(){return this.el.show()},c.prototype.hide=function(){return this.el.hide()},c}();m.Line=function(c){function b(a){return this.hilight=
s(this.hilight,this),this.onHoverOut=s(this.onHoverOut,this),this.onHoverMove=s(this.onHoverMove,this),this.onGridClick=s(this.onGridClick,this),this instanceof m.Line?(b.__super__.constructor.call(this,a),void 0):new m.Line(a)}return z(b,c),b.prototype.init=function(){return"always"!==this.options.hideHover?(this.hover=new m.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},b.prototype.defaults={lineWidth:3,
pointSize:4,lineColors:"#0b62a4 #7A92A3 #4da74d #afd8f8 #edc240 #cb4b4b #9440ed".split(" "),pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1},b.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},b.prototype.calcPoints=function(){var a,d,f,e,b,c;b=this.data;c=[];f=0;for(e=b.length;e>f;f++)a=b[f],a._x=this.transX(a.x),a._y=function(){var f,b,e,c;e=a.y;c=[];f=0;for(b=e.length;b>f;f++)d=
e[f],null!=d?c.push(this.transY(d)):c.push(d);return c}.call(this),c.push(a._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var f,b,e,c;e=a._y;c=[];f=0;for(b=e.length;b>f;f++)d=e[f],null!=d&&c.push(d);return c}())));return c},b.prototype.hitTest=function(a){var d,f,b,c,k;if(0===this.data.length)return null;k=this.data.slice(1);d=b=0;for(c=k.length;c>b&&(f=k[d],!(a<(f._x+this.data[d]._x)/2));d=++b);return d},b.prototype.onGridClick=function(a,d){var f;return f=this.hitTest(a),this.fire("click",
f,this.data[f].src,a,d)},b.prototype.onHoverMove=function(a){var d;return d=this.hitTest(a),this.displayHoverForRow(d)},b.prototype.onHoverOut=function(){return!1!==this.options.hideHover?this.displayHoverForRow(null):void 0},b.prototype.displayHoverForRow=function(a){var d;return null!=a?((d=this.hover).update.apply(d,this.hoverContentForRow(a)),this.hilight(a)):(this.hover.hide(),this.hilight())},b.prototype.hoverContentForRow=function(a){var d,f,b,c,k,g,h;b=this.data[a];d="<div class='morris-hover-row-label'>"+
b.label+"</div>";h=b.y;f=k=0;for(g=h.length;g>k;f=++k)c=h[f],d+="<div class='morris-hover-point' style='color: "+this.colorFor(b,f,"label")+"'>\n  "+this.options.labels[f]+":\n  "+this.yLabelFormat(c)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(d=this.options.hoverCallback(a,this.options,d,b.src)),[d,b._x,b._ymax]},b.prototype.generatePaths=function(){var a,d,f,b,c,k,g;g=[];a=b=0;for(c=this.options.ykeys.length;0<=c?c>b:b>c;a=0<=c?++b:--b){f="boolean"==typeof this.options.smooth?
this.options.smooth:(k=this.options.ykeys[a],0<=D.call(this.options.smooth,k));for(var h=void 0,n=void 0,q=void 0,p=void 0,q=this.data,p=[],h=0,n=q.length;n>h;h++)d=q[h],void 0!==d._y[a]&&p.push({x:d._x,y:d._y[a]});a=p;1<a.length?g.push(m.Line.createPath(a,f,this.bottom)):g.push(null)}return this.paths=g},b.prototype.draw=function(){var a;return(!0===(a=this.options.axes)||"both"===a||"x"===a)&&this.drawXAxis(),this.drawSeries(),!1===this.options.hideHover?this.displayHoverForRow(this.data.length-
1):void 0},b.prototype.drawXAxis=function(){var a,d,f,b,c,k,g,h,n,q,p=this;g=this.bottom+this.options.padding/2;b=c=null;a=function(a,d){var f,h,k,q,n;return f=p.drawXAxisLabel(p.transX(d),g,a),n=f.getBBox(),f.transform("r"+-p.options.xLabelAngle),h=f.getBBox(),f.transform("t0,"+h.height/2+"..."),0!==p.options.xLabelAngle&&(q=-0.5*n.width*Math.cos(p.options.xLabelAngle*Math.PI/180),f.transform("t"+q+",0...")),h=f.getBBox(),(null==c||c>=h.x+h.width||null!=b&&b>=h.x)&&0<=h.x&&h.x+h.width<p.el.width()?
(0!==p.options.xLabelAngle&&(k=1.25*p.options.gridTextSize/Math.sin(p.options.xLabelAngle*Math.PI/180),b=h.x-k),c=h.x-p.options.xLabelMargin):f.remove()};f=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:m.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var a,d,f,b;f=this.data;b=[];a=0;for(d=f.length;d>a;a++)k=f[a],b.push([k.label,k.x]);return b}.call(this);f.reverse();q=[];h=0;for(n=
f.length;n>h;h++)d=f[h],q.push(a(d[0],d[1]));return q},b.prototype.drawSeries=function(){var a,d,f,b;this.seriesPoints=[];for(a=d=f=this.options.ykeys.length-1;0>=f?0>=d:0<=d;a=0>=f?++d:--d)this._drawLineFor(a);b=[];for(a=d=f=this.options.ykeys.length-1;0>=f?0>=d:0<=d;a=0>=f?++d:--d)b.push(this._drawPointFor(a));return b},b.prototype._drawPointFor=function(a){var d,f,b,c,k,g;this.seriesPoints[a]=[];k=this.data;g=[];b=0;for(c=k.length;c>b;b++)f=k[b],d=null,null!=f._y[a]&&(d=this.drawLinePoint(f._x,
f._y[a],this.colorFor(f,a,"point"),a)),g.push(this.seriesPoints[a].push(d));return g},b.prototype._drawLineFor=function(a){var d;return d=this.paths[a],null!==d?this.drawLinePath(d,this.colorFor(null,a,"line"),a):void 0},b.createPath=function(a,d,f){var b,c,k,g,h,n,q,p,w,r,t,v,u,s;q="";d&&(k=m.Line.gradients(a));p={y:null};g=u=0;for(s=a.length;s>u;g=++u)b=a[g],null!=b.y&&(null!=p.y?d?(c=k[g],n=k[g-1],h=(b.x-p.x)/4,w=p.x+h,t=Math.min(f,p.y+h*n),r=b.x-h,v=Math.min(f,b.y-h*c),q+="C"+w+","+t+","+r+","+
v+","+b.x+","+b.y):q+="L"+b.x+","+b.y:d&&null==k[g]||(q+="M"+b.x+","+b.y)),p=b;return q},b.gradients=function(a){var d,b,c,l,k,g,h,n;b=function(a,d){return(a.y-d.y)/(a.x-d.x)};n=[];c=g=0;for(h=a.length;h>g;c=++g)d=a[c],null!=d.y?(l=a[c+1]||{y:null},k=a[c-1]||{y:null},null!=k.y&&null!=l.y?n.push(b(k,l)):null!=k.y?n.push(b(k,d)):null!=l.y?n.push(b(d,l)):n.push(null)):n.push(null);return n},b.prototype.hilight=function(a){var d,b,c;if(null!==this.prevHilight&&this.prevHilight!==a)for(d=b=0,c=this.seriesPoints.length-
1;0<=c?c>=b:b>=c;d=0<=c?++b:--b)this.seriesPoints[d][this.prevHilight]&&this.seriesPoints[d][this.prevHilight].animate(this.pointShrinkSeries(d));if(null!==a&&this.prevHilight!==a)for(d=b=0,c=this.seriesPoints.length-1;0<=c?c>=b:b>=c;d=0<=c?++b:--b)this.seriesPoints[d][a]&&this.seriesPoints[d][a].animate(this.pointGrowSeries(d));return this.prevHilight=a},b.prototype.colorFor=function(a,d,b){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,a,d,b):"point"===b?this.options.pointFillColors[d%
this.options.pointFillColors.length]||this.options.lineColors[d%this.options.lineColors.length]:this.options.lineColors[d%this.options.lineColors.length]},b.prototype.drawXAxisLabel=function(a,d,b){return this.raphael.text(a,d,b).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},b.prototype.drawLinePath=function(a,d,b){return this.raphael.path(a).attr("stroke",d).attr("stroke-width",
this.lineWidthForSeries(b))},b.prototype.drawLinePoint=function(a,d,b,c){return this.raphael.circle(a,d,this.pointSizeForSeries(c)).attr("fill",b).attr("stroke-width",this.pointStrokeWidthForSeries(c)).attr("stroke",this.pointStrokeColorForSeries(c))},b.prototype.pointStrokeWidthForSeries=function(a){return this.options.pointStrokeWidths[a%this.options.pointStrokeWidths.length]},b.prototype.pointStrokeColorForSeries=function(a){return this.options.pointStrokeColors[a%this.options.pointStrokeColors.length]},
b.prototype.lineWidthForSeries=function(a){return this.options.lineWidth instanceof Array?this.options.lineWidth[a%this.options.lineWidth.length]:this.options.lineWidth},b.prototype.pointSizeForSeries=function(a){return this.options.pointSize instanceof Array?this.options.pointSize[a%this.options.pointSize.length]:this.options.pointSize},b.prototype.pointGrowSeries=function(a){return Raphael.animation({r:this.pointSizeForSeries(a)+3},25,"linear")},b.prototype.pointShrinkSeries=function(a){return Raphael.animation({r:this.pointSizeForSeries(a)},
25,"linear")},b}(m.Grid);m.labelSeries=function(c,b,a,d,f){var e,l,k,g,h,n;if(e=200*(b-c)/a,a=new Date(c),g=m.LABEL_SPECS[d],void 0===g)for(n=m.AUTO_LABEL_ORDER,d=0,h=n.length;h>d;d++)if(l=n[d],k=m.LABEL_SPECS[l],e>=k.span){g=k;break}void 0===g&&(g=m.LABEL_SPECS.second);f&&(g=r.extend({},g,{fmt:f}));f=g.start(a);for(l=[];(k=f.getTime())<=b;)k>=c&&l.push([g.fmt(f),k]),g.incr(f);return l};x=function(c){return{span:6E4*c,start:function(b){return new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours())},
fmt:function(b){return""+m.pad2(b.getHours())+":"+m.pad2(b.getMinutes())},incr:function(b){return b.setUTCMinutes(b.getUTCMinutes()+c)}}};y=function(c){return{span:1E3*c,start:function(b){return new Date(b.getFullYear(),b.getMonth(),b.getDate(),b.getHours(),b.getMinutes())},fmt:function(b){return""+m.pad2(b.getHours())+":"+m.pad2(b.getMinutes())+":"+m.pad2(b.getSeconds())},incr:function(b){return b.setUTCSeconds(b.getUTCSeconds()+c)}}};m.LABEL_SPECS={decade:{span:1728E8,start:function(c){return new Date(c.getFullYear()-
c.getFullYear()%10,0,1)},fmt:function(c){return""+c.getFullYear()},incr:function(c){return c.setFullYear(c.getFullYear()+10)}},year:{span:1728E7,start:function(c){return new Date(c.getFullYear(),0,1)},fmt:function(c){return""+c.getFullYear()},incr:function(c){return c.setFullYear(c.getFullYear()+1)}},month:{span:24192E5,start:function(c){return new Date(c.getFullYear(),c.getMonth(),1)},fmt:function(c){return""+c.getFullYear()+"-"+m.pad2(c.getMonth()+1)},incr:function(c){return c.setMonth(c.getMonth()+
1)}},week:{span:6048E5,start:function(c){return new Date(c.getFullYear(),c.getMonth(),c.getDate())},fmt:function(c){return""+c.getFullYear()+"-"+m.pad2(c.getMonth()+1)+"-"+m.pad2(c.getDate())},incr:function(c){return c.setDate(c.getDate()+7)}},day:{span:864E5,start:function(c){return new Date(c.getFullYear(),c.getMonth(),c.getDate())},fmt:function(c){return""+c.getFullYear()+"-"+m.pad2(c.getMonth()+1)+"-"+m.pad2(c.getDate())},incr:function(c){return c.setDate(c.getDate()+1)}},hour:x(60),"30min":x(30),
"15min":x(15),"10min":x(10),"5min":x(5),minute:x(1),"30sec":y(30),"15sec":y(15),"10sec":y(10),"5sec":y(5),second:y(1)};m.AUTO_LABEL_ORDER="decade year month week day hour 30min 15min 10min 5min minute 30sec 15sec 10sec 5sec second".split(" ");m.Area=function(c){function b(d){var f;return this instanceof m.Area?(f=r.extend({},a,d),this.cumulative=!f.behaveLikeLine,"auto"===f.fillOpacity&&(f.fillOpacity=f.behaveLikeLine?0.8:1),b.__super__.constructor.call(this,f),void 0):new m.Area(d)}var a;return z(b,
c),a={fillOpacity:"auto",behaveLikeLine:!1},b.prototype.calcPoints=function(){var a,b,c,l,k,g,h;g=this.data;h=[];l=0;for(k=g.length;k>l;l++){a=g[l];a._x=this.transX(a.x);b=0;for(var n=a,q=void 0,p=void 0,m=void 0,r=void 0,m=a.y,r=[],q=0,p=m.length;p>q;q++)c=m[q],this.options.behaveLikeLine?r.push(this.transY(c)):(b+=c||0,r.push(this.transY(b)));n._y=r;h.push(a._ymax=Math.max.apply(Math,a._y))}return h},b.prototype.drawSeries=function(){var a,b,c,l,k,g,h,n;this.seriesPoints=[];b=this.options.behaveLikeLine?
function(){g=[];for(var a=0,d=this.options.ykeys.length-1;0<=d?d>=a:a>=d;0<=d?a++:a--)g.push(a);return g}.apply(this):function(){h=[];for(var a=k=this.options.ykeys.length-1;0>=k?0>=a:0<=a;0>=k?a++:a--)h.push(a);return h}.apply(this);n=[];c=0;for(l=b.length;l>c;c++)a=b[c],this._drawFillFor(a),this._drawLineFor(a),n.push(this._drawPointFor(a));return n},b.prototype._drawFillFor=function(a){var b;return b=this.paths[a],null!==b?(b+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+
","+this.bottom+"Z",this.drawFilledPath(b,this.fillForSeries(a))):void 0},b.prototype.fillForSeries=function(a){var b;return b=Raphael.rgb2hsl(this.colorFor(this.data[a],a,"line")),Raphael.hsl(b.h,this.options.behaveLikeLine?0.9*b.s:0.75*b.s,Math.min(0.98,this.options.behaveLikeLine?1.2*b.l:1.25*b.l))},b.prototype.drawFilledPath=function(a,b){return this.raphael.path(a).attr("fill",b).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")},b}(m.Line);m.Bar=function(c){function b(a){return this.onHoverOut=
s(this.onHoverOut,this),this.onHoverMove=s(this.onHoverMove,this),this.onGridClick=s(this.onGridClick,this),this instanceof m.Bar?(b.__super__.constructor.call(this,r.extend({},a,{parseTime:!1})),void 0):new m.Bar(a)}return z(b,c),b.prototype.init=function(){return this.cumulative=this.options.stacked,"always"!==this.options.hideHover?(this.hover=new m.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},b.prototype.defaults=
{barSizeRatio:0.75,barGap:3,barColors:"#0b62a4 #7a92a3 #4da74d #afd8f8 #edc240 #cb4b4b #9440ed".split(" "),barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50},b.prototype.calc=function(){var a;return this.calcBars(),!1===this.options.hideHover?(a=this.hover).update.apply(a,this.hoverContentForRow(this.data.length-1)):void 0},b.prototype.calcBars=function(){var a,d,b,c,l,k,g;k=this.data;g=[];a=c=0;for(l=k.length;l>c;a=++c)d=k[a],d._x=this.left+this.width*(a+0.5)/this.data.length,g.push(d._y=function(){var a,
c,e,g;e=d.y;g=[];a=0;for(c=e.length;c>a;a++)b=e[a],null!=b?g.push(this.transY(b)):g.push(null);return g}.call(this));return g},b.prototype.draw=function(){var a;return(!0===(a=this.options.axes)||"both"===a||"x"===a)&&this.drawXAxis(),this.drawSeries()},b.prototype.drawXAxis=function(){var a,b,c,e,l,k,g,h,n,q,m;h=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2);l=k=null;m=[];a=n=0;for(q=this.data.length;0<=q?q>n:n>q;a=0<=q?++n:--n)a=this.data[this.data.length-1-a],a=this.drawXAxisLabel(a._x,
h,a.label),g=a.getBBox(),a.transform("r"+-this.options.xLabelAngle),b=a.getBBox(),a.transform("t0,"+b.height/2+"..."),0!==this.options.xLabelAngle&&(e=-0.5*g.width*Math.cos(this.options.xLabelAngle*Math.PI/180),a.transform("t"+e+",0...")),(null==k||k>=b.x+b.width||null!=l&&l>=b.x)&&0<=b.x&&b.x+b.width<this.el.width()?(0!==this.options.xLabelAngle&&(c=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),l=b.x-c),m.push(k=b.x-this.options.xLabelMargin)):m.push(a.remove());return m},
b.prototype.drawSeries=function(){var a,b,c,e,l,k,g,h,n,m,p,r,s,t,v;return c=this.width/this.options.data.length,h=this.options.stacked?1:this.options.ykeys.length,a=(c*this.options.barSizeRatio-this.options.barGap*(h-1))/h,this.options.barSize&&(a=Math.min(a,this.options.barSize)),r=c-a*h-this.options.barGap*(h-1),g=r/2,v=0>=this.ymin&&0<=this.ymax?this.transY(0):null,this.bars=function(){var h,r,w,x;w=this.data;x=[];e=h=0;for(r=w.length;r>h;e=++h)n=w[e],l=0,x.push(function(){var h,r,w,u;w=n._y;
u=[];m=h=0;for(r=w.length;r>h;m=++h)t=w[m],null!==t?(v?(s=Math.min(t,v),b=Math.max(t,v)):(s=t,b=this.bottom),k=this.left+e*c+g,this.options.stacked||(k+=m*(a+this.options.barGap)),p=b-s,this.options.verticalGridCondition&&this.options.verticalGridCondition(n.x)&&this.drawBar(this.left+e*c,this.top,c,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius),this.options.stacked&&(s-=l),this.drawBar(k,s,a,p,this.colorFor(n,m,"bar"),this.options.barOpacity,
this.options.barRadius),u.push(l+=p)):u.push(null);return u}.call(this));return x}.call(this)},b.prototype.colorFor=function(a,b,c){var e,l;return"function"==typeof this.options.barColors?(e={x:a.x,y:a.y[b],label:a.label},l={index:b,key:this.options.ykeys[b],label:this.options.labels[b]},this.options.barColors.call(this,e,l,c)):this.options.barColors[b%this.options.barColors.length]},b.prototype.hitTest=function(a){return 0===this.data.length?null:(a=Math.max(Math.min(a,this.right),this.left),Math.min(this.data.length-
1,Math.floor((a-this.left)/(this.width/this.data.length))))},b.prototype.onGridClick=function(a,b){var c;return c=this.hitTest(a),this.fire("click",c,this.data[c].src,a,b)},b.prototype.onHoverMove=function(a){var b,c;return b=this.hitTest(a),(c=this.hover).update.apply(c,this.hoverContentForRow(b))},b.prototype.onHoverOut=function(){return!1!==this.options.hideHover?this.hover.hide():void 0},b.prototype.hoverContentForRow=function(a){var b,c,e,l,k,g,h,n;e=this.data[a];b="<div class='morris-hover-row-label'>"+
e.label+"</div>";n=e.y;c=g=0;for(h=n.length;h>g;c=++g)k=n[c],b+="<div class='morris-hover-point' style='color: "+this.colorFor(e,c,"label")+"'>\n  "+this.options.labels[c]+":\n  "+this.yLabelFormat(k)+"\n</div>";return"function"==typeof this.options.hoverCallback&&(b=this.options.hoverCallback(a,this.options,b,e.src)),l=this.left+(a+0.5)*this.width/this.data.length,[b,l]},b.prototype.drawXAxisLabel=function(a,b,c){return this.raphael.text(a,b,c).attr("font-size",this.options.gridTextSize).attr("font-family",
this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},b.prototype.drawBar=function(a,b,c,e,l,k,g){var h,n;return h=Math.max.apply(Math,g),n=0===h||h>e?this.raphael.rect(a,b,c,e):this.raphael.path(this.roundedRect(a,b,c,e,g)),n.attr("fill",l).attr("fill-opacity",k).attr("stroke","none")},b.prototype.roundedRect=function(a,b,c,e,l){return null==l&&(l=[0,0,0,0]),["M",a,l[0]+b,"Q",a,b,a+l[0],b,"L",a+c-l[1],b,"Q",a+c,b,a+c,b+l[1],"L",a+c,
b+e-l[2],"Q",a+c,b+e,a+c-l[2],b+e,"L",a+l[3],b+e,"Q",a,b+e,a,b+e-l[3],"Z"]},b}(m.Grid);m.Donut=function(c){function b(a){this.resizeHandler=s(this.resizeHandler,this);this.select=s(this.select,this);this.click=s(this.click,this);var b=this;if(!(this instanceof m.Donut))return new m.Donut(a);if(this.options=r.extend({},this.defaults,a),this.el="string"==typeof a.element?r(document.getElementById(a.element)):r(a.element),null===this.el||0===this.el.length)throw Error("Graph placeholder not found.");
void 0!==a.data&&0!==a.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&r(window).bind("resize",function(){return null!=b.timeoutId&&window.clearTimeout(b.timeoutId),b.timeoutId=window.setTimeout(b.resizeHandler,100)}),this.setData(a.data))}return z(b,c),b.prototype.defaults={colors:"#0B62A4 #3980B5 #679DC6 #95BBD7 #B0CCE1 #095791 #095085 #083E67 #052C48 #042135".split(" "),backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:m.commas,resize:!1},b.prototype.redraw=function(){var a,
b,c,e,l,k,g,h,n,q,p,r,s,t;this.raphael.clear();b=this.el.width()/2;c=this.el.height()/2;p=(Math.min(b,c)-10)/3;n=0;g=this.values;l=0;for(a=g.length;a>l;l++)q=g[l],n+=q;g=5/(2*p);a=1.9999*Math.PI-g*this.data.length;l=k=0;this.segments=[];t=this.values;e=r=0;for(s=t.length;s>r;e=++r)q=t[e],h=k+g+q/n*a,e=new m.DonutSegment(b,c,2*p,p,k,h,this.data[e].color||this.options.colors[l%this.options.colors.length],this.options.backgroundColor,l,this.raphael),e.render(),this.segments.push(e),e.on("hover",this.select),
e.on("click",this.click),k=h,l+=1;this.text1=this.drawEmptyDonutLabel(b,c-10,this.options.labelColor,15,800);this.text2=this.drawEmptyDonutLabel(b,c+10,this.options.labelColor,14);b=Math.max.apply(Math,this.values);l=0;p=this.values;a=[];c=0;for(n=p.length;n>c;c++){if(q=p[c],q===b){this.select(l);break}a.push(l+=1)}return a},b.prototype.setData=function(a){this.data=a;var b,c,e,l;e=this.data;l=[];b=0;for(c=e.length;c>b;b++)a=e[b],l.push(parseFloat(a.value));return this.values=l,this.redraw()},b.prototype.click=
function(a){return this.fire("click",a,this.data[a])},b.prototype.select=function(a){var b,c,e,l,k,g;g=this.segments;l=0;for(k=g.length;k>l;l++)c=g[l],c.deselect();return e=this.segments[a],e.select(),b=this.data[a],this.setLabels(b.label,this.options.formatter(b.value,b))},b.prototype.setLabels=function(a,b){var c,e,l,k,g,h,n,m;return c=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3,k=1.8*c,l=c/2,e=c/3,this.text1.attr({text:a,transform:""}),g=this.text1.getBBox(),h=Math.min(k/g.width,l/
g.height),this.text1.attr({transform:"S"+h+","+h+","+(g.x+g.width/2)+","+(g.y+g.height)}),this.text2.attr({text:b,transform:""}),n=this.text2.getBBox(),m=Math.min(k/n.width,e/n.height),this.text2.attr({transform:"S"+m+","+m+","+(n.x+n.width/2)+","+n.y})},b.prototype.drawEmptyDonutLabel=function(a,b,c,e,l){var k;return k=this.raphael.text(a,b,"").attr("font-size",e).attr("fill",c),null!=l&&k.attr("font-weight",l),k},b.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),
this.el.height()),this.redraw()},b}(m.EventEmitter);m.DonutSegment=function(c){function b(a,b,c,e,l,k,g,h,n,m){this.cx=a;this.cy=b;this.inner=c;this.outer=e;this.color=g;this.backgroundColor=h;this.index=n;this.raphael=m;this.deselect=s(this.deselect,this);this.select=s(this.select,this);this.sin_p0=Math.sin(l);this.cos_p0=Math.cos(l);this.sin_p1=Math.sin(k);this.cos_p1=Math.cos(k);this.is_long=k-l>Math.PI?1:0;this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5);this.selectedPath=this.calcSegment(this.inner+
3,this.inner+this.outer);this.hilight=this.calcArc(this.inner)}return z(b,c),b.prototype.calcArcPoints=function(a){return[this.cx+a*this.sin_p0,this.cy+a*this.cos_p0,this.cx+a*this.sin_p1,this.cy+a*this.cos_p1]},b.prototype.calcSegment=function(a,b){var c,e,l,k,g,h,m,q,p,r;return p=this.calcArcPoints(a),c=p[0],l=p[1],e=p[2],k=p[3],r=this.calcArcPoints(b),g=r[0],m=r[1],h=r[2],q=r[3],"M"+c+","+l+("A"+a+","+a+",0,"+this.is_long+",0,"+e+","+k)+("L"+h+","+q)+("A"+b+","+b+",0,"+this.is_long+",1,"+g+","+
m)+"Z"},b.prototype.calcArc=function(a){var b,c,e,l,k;return k=this.calcArcPoints(a),b=k[0],e=k[1],c=k[2],l=k[3],"M"+b+","+e+("A"+a+","+a+",0,"+this.is_long+",0,"+c+","+l)},b.prototype.render=function(){var a=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return a.fire("hover",a.index)},function(){return a.fire("click",a.index)})},b.prototype.drawDonutArc=function(a,b){return this.raphael.path(a).attr({stroke:b,
"stroke-width":2,opacity:0})},b.prototype.drawDonutSegment=function(a,b,c,e,l){return this.raphael.path(a).attr({fill:b,stroke:c,"stroke-width":3}).hover(e).click(l)},b.prototype.select=function(){return this.selected?void 0:(this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0)},b.prototype.deselect=function(){return this.selected?(this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1):void 0},b}(m.EventEmitter)}).call(this);
