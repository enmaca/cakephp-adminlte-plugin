/*
   Copyright 2010-2014 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license/mit

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
 ColReorder 1.3.3
 ?2010-2015 SpryMedia Ltd - datatables.net/license
*/
var $jscomp={scope:{},findInternal:function(b,h,g){b instanceof String&&(b=String(b));for(var q=b.length,p=0;p<q;p++){var t=b[p];if(h.call(g,t,p,b))return{i:p,v:t}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,h,g){if(g.get||g.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[h]=g.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,h,g,q){if(h){g=$jscomp.global;b=b.split(".");for(q=0;q<b.length-1;q++){var p=b[q];p in g||(g[p]={});g=g[p]}b=b[b.length-1];q=g[b];h=h(q);h!=q&&null!=h&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,g){return $jscomp.findInternal(this,b,g).v}},"es6-impl","es3");
(function(b){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(h){return b(h,window,document)}):"object"===typeof exports?module.exports=function(h,g){h||(h=window);g&&g.fn.dataTable||(g=require("datatables.net")(h,g).$);return b(g,h,h.document)}:b(jQuery,window,document)})(function(b,h,g,q){function p(a){for(var c=[],b=0,e=a.length;b<e;b++)c[a[b]]=b;return c}function t(a,c,b){c=a.splice(c,1)[0];a.splice(b,0,c)}function v(a,c,b){for(var e=[],f=0,d=a.childNodes.length;f<
d;f++)1==a.childNodes[f].nodeType&&e.push(a.childNodes[f]);c=e[c];null!==b?a.insertBefore(c,e[b]):a.appendChild(c)}var w=b.fn.dataTable;b.fn.dataTableExt.oApi.fnColReorder=function(a,c,f,e,u){var d,k,l,g,h,n=a.aoColumns.length,m;h=function(a,b,c){if(a[b]&&"function"!==typeof a[b]){var d=a[b].split("."),e=d.shift();isNaN(1*e)||(a[b]=c[1*e]+"."+d.join("."))}};if(c!=f)if(0>c||c>=n)this.oApi._fnLog(a,1,"ColReorder 'from' index is out of bounds: "+c);else if(0>f||f>=n)this.oApi._fnLog(a,1,"ColReorder 'to' index is out of bounds: "+
f);else{l=[];d=0;for(k=n;d<k;d++)l[d]=d;t(l,c,f);var r=p(l);d=0;for(k=a.aaSorting.length;d<k;d++)a.aaSorting[d][0]=r[a.aaSorting[d][0]];if(null!==a.aaSortingFixed)for(d=0,k=a.aaSortingFixed.length;d<k;d++)a.aaSortingFixed[d][0]=r[a.aaSortingFixed[d][0]];d=0;for(k=n;d<k;d++){m=a.aoColumns[d];l=0;for(g=m.aDataSort.length;l<g;l++)m.aDataSort[l]=r[m.aDataSort[l]];m.idx=r[m.idx]}b.each(a.aLastSort,function(b,c){a.aLastSort[b].src=r[c.src]});d=0;for(k=n;d<k;d++)m=a.aoColumns[d],"number"==typeof m.mData?
m.mData=r[m.mData]:b.isPlainObject(m.mData)&&(h(m.mData,"_",r),h(m.mData,"filter",r),h(m.mData,"sort",r),h(m.mData,"type",r));if(a.aoColumns[c].bVisible){h=this.oApi._fnColumnIndexToVisible(a,c);g=null;for(d=f<c?f:f+1;null===g&&d<n;)g=this.oApi._fnColumnIndexToVisible(a,d),d++;l=a.nTHead.getElementsByTagName("tr");d=0;for(k=l.length;d<k;d++)v(l[d],h,g);if(null!==a.nTFoot)for(l=a.nTFoot.getElementsByTagName("tr"),d=0,k=l.length;d<k;d++)v(l[d],h,g);d=0;for(k=a.aoData.length;d<k;d++)null!==a.aoData[d].nTr&&
v(a.aoData[d].nTr,h,g)}t(a.aoColumns,c,f);d=0;for(k=n;d<k;d++)a.oApi._fnColumnOptions(a,d,{});t(a.aoPreSearchCols,c,f);d=0;for(k=a.aoData.length;d<k;d++){g=a.aoData[d];if(m=g.anCells)for(t(m,c,f),l=0,h=m.length;l<h;l++)m[l]&&m[l]._DT_CellIndex&&(m[l]._DT_CellIndex.column=l);"dom"!==g.src&&b.isArray(g._aData)&&t(g._aData,c,f)}d=0;for(k=a.aoHeader.length;d<k;d++)t(a.aoHeader[d],c,f);if(null!==a.aoFooter)for(d=0,k=a.aoFooter.length;d<k;d++)t(a.aoFooter[d],c,f);(u||u===q)&&b.fn.dataTable.Api(a).rows().invalidate();
d=0;for(k=n;d<k;d++)b(a.aoColumns[d].nTh).off("click.DT"),this.oApi._fnSortAttachListener(a,a.aoColumns[d].nTh,d);b(a.oInstance).trigger("column-reorder.dt",[a,{from:c,to:f,mapping:r,drop:e,iFrom:c,iTo:f,aiInvertMapping:r}])}};var n=function(a,c){var f=(new b.fn.dataTable.Api(a)).settings()[0];if(f._colReorder)return f._colReorder;!0===c&&(c={});var e=b.fn.dataTable.camelToHungarian;e&&(e(n.defaults,n.defaults,!0),e(n.defaults,c||{}));this.s={dt:null,init:b.extend(!0,{},n.defaults,c),fixed:0,fixedRight:0,
reorderCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]};this.dom={drag:null,pointer:null};this.s.dt=f;this.s.dt._colReorder=this;this._fnConstruct();return this};b.extend(n.prototype,{fnReset:function(){this._fnOrderColumns(this.fnOrder());return this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(a,c){var f=[],e,u,d=this.s.dt.aoColumns;if(a===q){e=0;for(u=d.length;e<u;e++)f.push(d[e]._ColReorder_iOrigCol);return f}if(c){d=
this.fnOrder();e=0;for(u=a.length;e<u;e++)f.push(b.inArray(a[e],d));a=f}this._fnOrderColumns(p(a));return this},fnTranspose:function(a,c){c||(c="toCurrent");var f=this.fnOrder(),e=this.s.dt.aoColumns;return"toCurrent"===c?b.isArray(a)?b.map(a,function(a){return b.inArray(a,f)}):b.inArray(a,f):b.isArray(a)?b.map(a,function(a){return e[a]._ColReorder_iOrigCol}):e[a]._ColReorder_iOrigCol},_fnConstruct:function(){var a=this,c=this.s.dt.aoColumns.length,f=this.s.dt.nTable,e;this.s.init.iFixedColumns&&
(this.s.fixed=this.s.init.iFixedColumns);this.s.init.iFixedColumnsLeft&&(this.s.fixed=this.s.init.iFixedColumnsLeft);this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0;this.s.init.fnReorderCallback&&(this.s.reorderCallback=this.s.init.fnReorderCallback);for(e=0;e<c;e++)e>this.s.fixed-1&&e<c-this.s.fixedRight&&this._fnMouseListener(e,this.s.dt.aoColumns[e].nTh),this.s.dt.aoColumns[e]._ColReorder_iOrigCol=e;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(b,
c){a._fnStateSave.call(a,c)},"ColReorder_State");var g=null;this.s.init.aiOrder&&(g=this.s.init.aiOrder.slice());this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(g=this.s.dt.oLoadedState.ColReorder);if(g)if(a.s.dt._bInitComplete)c=p(g),a._fnOrderColumns.call(a,c);else{var d=!1;b(f).on("draw.dt.colReorder",function(){if(!a.s.dt._bInitComplete&&!d){d=!0;var b=p(g);a._fnOrderColumns.call(a,b)}})}else this._fnSetColumnIndexes();
b(f).on("destroy.dt.colReorder",function(){b(f).off("destroy.dt.colReorder draw.dt.colReorder");b(a.s.dt.nTHead).find("*").off(".ColReorder");b.each(a.s.dt.aoColumns,function(a,c){b(c.nTh).removeAttr("data-column-index")});a.s.dt._colReorder=null;a.s=null})},_fnOrderColumns:function(a){var c=!1;if(a.length!=this.s.dt.aoColumns.length)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");else{for(var f=0,e=a.length;f<e;f++){var g=
b.inArray(f,a);f!=g&&(t(a,g,f),this.s.dt.oInstance.fnColReorder(g,f,!0,!1),c=!0)}b.fn.dataTable.Api(this.s.dt).rows().invalidate();this._fnSetColumnIndexes();c&&(""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))}},_fnStateSave:function(a){var c,f,e,g=this.s.dt.aoColumns;a.ColReorder=[];if(a.aaSorting){for(c=0;c<a.aaSorting.length;c++)a.aaSorting[c][0]=
g[a.aaSorting[c][0]]._ColReorder_iOrigCol;var d=b.extend(!0,[],a.aoSearchCols);c=0;for(f=g.length;c<f;c++)e=g[c]._ColReorder_iOrigCol,a.aoSearchCols[e]=d[c],a.abVisCols[e]=g[c].bVisible,a.ColReorder.push(e)}else if(a.order){for(c=0;c<a.order.length;c++)a.order[c][0]=g[a.order[c][0]]._ColReorder_iOrigCol;d=b.extend(!0,[],a.columns);c=0;for(f=g.length;c<f;c++)e=g[c]._ColReorder_iOrigCol,a.columns[e]=d[c],a.ColReorder.push(e)}},_fnMouseListener:function(a,c){var f=this;b(c).on("mousedown.ColReorder",
function(a){a.preventDefault();f._fnMouseDown.call(f,a,c)}).on("touchstart.ColReorder",function(a){f._fnMouseDown.call(f,a,c)})},_fnMouseDown:function(a,c){var f=this,e=b(a.target).closest("th, td").offset(),h=parseInt(b(c).attr("data-column-index"),10);h!==q&&(this.s.mouse.startX=this._fnCursorPosition(a,"pageX"),this.s.mouse.startY=this._fnCursorPosition(a,"pageY"),this.s.mouse.offsetX=this._fnCursorPosition(a,"pageX")-e.left,this.s.mouse.offsetY=this._fnCursorPosition(a,"pageY")-e.top,this.s.mouse.target=
this.s.dt.aoColumns[h].nTh,this.s.mouse.targetIndex=h,this.s.mouse.fromIndex=h,this._fnRegions(),b(g).on("mousemove.ColReorder touchmove.ColReorder",function(a){f._fnMouseMove.call(f,a)}).on("mouseup.ColReorder touchend.ColReorder",function(a){f._fnMouseUp.call(f,a)}))},_fnMouseMove:function(a){if(null===this.dom.drag){if(5>Math.pow(Math.pow(this._fnCursorPosition(a,"pageX")-this.s.mouse.startX,2)+Math.pow(this._fnCursorPosition(a,"pageY")-this.s.mouse.startY,2),.5))return;this._fnCreateDragNode()}this.dom.drag.css({left:this._fnCursorPosition(a,
"pageX")-this.s.mouse.offsetX,top:this._fnCursorPosition(a,"pageY")-this.s.mouse.offsetY});for(var b=!1,f=this.s.mouse.toIndex,e=1,g=this.s.aoTargets.length;e<g;e++)if(this._fnCursorPosition(a,"pageX")<this.s.aoTargets[e-1].x+(this.s.aoTargets[e].x-this.s.aoTargets[e-1].x)/2){this.dom.pointer.css("left",this.s.aoTargets[e-1].x);this.s.mouse.toIndex=this.s.aoTargets[e-1].to;b=!0;break}b||(this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x),this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-
1].to);this.s.init.bRealtime&&f!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!1),this.s.mouse.fromIndex=this.s.mouse.toIndex,this._fnRegions())},_fnMouseUp:function(a){b(g).off(".ColReorder");null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!0),this._fnSetColumnIndexes(),""===this.s.dt.oScroll.sX&&""===
this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))},_fnRegions:function(){var a=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length);this.s.aoTargets.push({x:b(this.s.dt.nTable).offset().left,to:0});for(var c=0,f=this.s.aoTargets[0].x,e=0,g=a.length;e<g;e++)e!=this.s.mouse.fromIndex&&c++,a[e].bVisible&&"none"!==a[e].nTh.style.display&&(f+=b(a[e].nTh).outerWidth(),
this.s.aoTargets.push({x:f,to:c}));0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight);0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var a=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,c=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,f=c.parentNode,e=f.parentNode,g=e.parentNode,d=b(c).clone();this.dom.drag=b(g.cloneNode(!1)).addClass("DTCR_clonedTable").append(b(e.cloneNode(!1)).append(b(f.cloneNode(!1)).append(d[0]))).css({position:"absolute",
top:0,left:0,width:b(c).outerWidth(),height:b(c).outerHeight()}).appendTo("body");this.dom.pointer=b("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:a?b("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:b(this.s.dt.nTable).offset().top,height:a?b("div.dataTables_scroll",this.s.dt.nTableWrapper).height():b(this.s.dt.nTable).height()}).appendTo("body")},_fnSetColumnIndexes:function(){b.each(this.s.dt.aoColumns,function(a,c){b(c.nTh).attr("data-column-index",a)})},_fnCursorPosition:function(a,
b){return-1!==a.type.indexOf("touch")?a.originalEvent.touches[0][b]:a[b]}});n.defaults={aiOrder:null,bRealtime:!0,iFixedColumnsLeft:0,iFixedColumnsRight:0,fnReorderCallback:null};n.version="1.3.3";b.fn.dataTable.ColReorder=n;b.fn.DataTable.ColReorder=n;"function"==typeof b.fn.dataTable&&"function"==typeof b.fn.dataTableExt.fnVersionCheck&&b.fn.dataTableExt.fnVersionCheck("1.10.8")?b.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInstance;a._colReorder?b.oApi._fnLog(a,1,"ColReorder attempted to initialise twice. Ignoring second"):
(b=a.oInit,new n(a,b.colReorder||b.oColReorder||{}));return null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.10.8 or greater - www.datatables.net/download");b(g).on("preInit.dt.colReorder",function(a,c){if("dt"===a.namespace){var f=c.oInit.colReorder,e=w.defaults.colReorder;if(f||e)e=b.extend({},f,e),!1!==f&&new n(c,e)}});b.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(a){a._colReorder.fnReset()})});b.fn.dataTable.Api.register("colReorder.order()",
function(a,b){return a?this.iterator("table",function(c){c._colReorder.fnOrder(a,b)}):this.context.length?this.context[0]._colReorder.fnOrder():null});b.fn.dataTable.Api.register("colReorder.transpose()",function(a,b){return this.context.length&&this.context[0]._colReorder?this.context[0]._colReorder.fnTranspose(a,b):a});return n});
