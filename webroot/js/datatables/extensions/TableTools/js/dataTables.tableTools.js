/*
   Copyright 2009-2015 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license/mit

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
*/
var TableTools;
(function(w,q,v){var s=function(p,s){var k={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(b){"string"==typeof b&&(b=q.getElementById(b));b.addClass||(b.hide=function(){this.style.display="none"},b.show=function(){this.style.display=""},b.addClass=function(b){this.removeClass(b);this.className+=" "+b},b.removeClass=function(b){this.className=this.className.replace(new RegExp("\\s*"+b+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},b.hasClass=function(b){return!!this.className.match(new RegExp("\\s*"+b+
"\\s*"))});return b},setMoviePath:function(b){this.moviePath=b},dispatch:function(b,g,h){(b=this.clients[b])&&b.receiveEvent(g,h)},register:function(b,g){this.clients[b]=g},getDOMObjectPosition:function(b){var g={left:0,top:0,width:b.width?b.width:b.offsetWidth,height:b.height?b.height:b.offsetHeight};""!==b.style.width&&(g.width=b.style.width.replace("px",""));""!==b.style.height&&(g.height=b.style.height.replace("px",""));for(;b;)g.left+=b.offsetLeft,g.top+=b.offsetTop,b=b.offsetParent;return g},
Client:function(b){this.handlers={};this.id=k.nextId++;this.movieId="ZeroClipboard_TableToolsMovie_"+this.id;k.register(this.id,this);b&&this.glue(b)}};k.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,glue:function(b,g){this.domElement=k.$(b);var h=99;this.domElement.style.zIndex&&(h=parseInt(this.domElement.style.zIndex,10)+1);var a=k.getDOMObjectPosition(this.domElement);this.div=q.createElement("div");var c=
this.div.style;c.position="absolute";c.left="0px";c.top="0px";c.width=a.width+"px";c.height=a.height+"px";c.zIndex=h;"undefined"!=typeof g&&""!==g&&(this.div.title=g);0!==a.width&&0!==a.height&&(this.sized=!0);this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(a.width,a.height).replace(/&/g,"&amp;"))},positionElement:function(){var b=k.getDOMObjectPosition(this.domElement),g=this.div.style;g.position="absolute";g.width=b.width+"px";g.height=b.height+"px";0!==b.width&&
0!==b.height&&(this.sized=!0,g=this.div.childNodes[0],g.width=b.width,g.height=b.height)},getHTML:function(b,g){var h="",a="id="+this.id+"&width="+b+"&height="+g;if(navigator.userAgent.match(/MSIE/))var c=location.href.match(/^https/i)?"https://":"http://",h=h+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+c+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+b+'" height="'+g+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+
k.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+a+'"/><param name="wmode" value="transparent"/></object>');else h+='<embed id="'+this.movieId+'" src="'+k.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+b+'" height="'+g+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+
a+'" wmode="transparent" />';return h},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var b=q.getElementsByTagName("body")[0];try{b.removeChild(this.div)}catch(g){}this.div=this.domElement=null}},reposition:function(b){b&&((this.domElement=k.$(b))||this.hide());if(this.domElement&&this.div){b=k.getDOMObjectPosition(this.domElement);var g=this.div.style;g.left=""+b.left+
"px";g.top=""+b.top+"px"}},clearText:function(){this.clipText="";this.ready&&this.movie.clearText()},appendText:function(b){this.clipText+=b;this.ready&&this.movie.appendText(b)},setText:function(b){this.clipText=b;this.ready&&this.movie.setText(b)},setCharSet:function(b){this.charSet=b;this.ready&&this.movie.setCharSet(b)},setBomInc:function(b){this.incBom=b;this.ready&&this.movie.setBomInc(b)},setFileName:function(b){this.fileName=b;this.ready&&this.movie.setFileName(b)},setAction:function(b){this.action=
b;this.ready&&this.movie.setAction(b)},addEventListener:function(b,g){b=b.toString().toLowerCase().replace(/^on/,"");this.handlers[b]||(this.handlers[b]=[]);this.handlers[b].push(g)},setHandCursor:function(b){this.handCursorEnabled=b;this.ready&&this.movie.setHandCursor(b)},setCSSEffects:function(b){this.cssEffects=!!b},receiveEvent:function(b,g){var h;b=b.toString().toLowerCase().replace(/^on/,"");switch(b){case "load":this.movie=q.getElementById(this.movieId);if(!this.movie){h=this;setTimeout(function(){h.receiveEvent("load",
null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){h=this;setTimeout(function(){h.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);break;case "mouseover":this.domElement&&this.cssEffects&&
this.recoverActive&&this.domElement.addClass("active");break;case "mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[b])for(var a=0,c=this.handlers[b].length;a<
c;a++){var d=this.handlers[b][a];if("function"==typeof d)d(this,g);else if("object"==typeof d&&2==d.length)d[0][d[1]](this,g);else if("string"==typeof d)w[d](this,g)}}};w.ZeroClipboard_TableTools=k;(function(b,g,h){TableTools=function(a,c){!this instanceof TableTools&&alert("Warning: TableTools must be initialised with the keyword 'new'");this.s={that:this,dt:b.fn.dataTable.Api?(new b.fn.dataTable.Api(a)).settings()[0]:a.fnSettings(),print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},
buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1,tags:{}};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,background:null}};this.classes=b.extend(!0,{},TableTools.classes);this.s.dt.bJUI&&b.extend(!0,this.classes,TableTools.classes_themeroller);this.fnSettings=function(){return this.s};"undefined"==typeof c&&(c={});TableTools._aInstances.push(this);
this._fnConstruct(c);return this};TableTools.prototype={fnGetSelected:function(a){var c=[],d=this.s.dt.aoData,b=this.s.dt.aiDisplay,f;if(a)for(a=0,f=b.length;a<f;a++)d[b[a]]._DTTT_selected&&c.push(d[b[a]].nTr);else for(a=0,f=d.length;a<f;a++)d[a]._DTTT_selected&&c.push(d[a].nTr);return c},fnGetSelectedData:function(){var a=[],c=this.s.dt.aoData,d,b;d=0;for(b=c.length;d<b;d++)c[d]._DTTT_selected&&a.push(this.s.dt.oInstance.fnGetData(d));return a},fnGetSelectedIndexes:function(a){var c=[],d=this.s.dt.aoData,
b=this.s.dt.aiDisplay,f;if(a)for(a=0,f=b.length;a<f;a++)d[b[a]]._DTTT_selected&&c.push(b[a]);else for(a=0,f=d.length;a<f;a++)d[a]._DTTT_selected&&c.push(a);return c},fnIsSelected:function(a){a=this.s.dt.oInstance.fnGetPosition(a);return!0===this.s.dt.aoData[a]._DTTT_selected?!0:!1},fnSelectAll:function(a){this._fnRowSelect(a?this.s.dt.aiDisplay:this.s.dt.aoData)},fnSelectNone:function(a){this._fnRowDeselect(this.fnGetSelectedIndexes(a))},fnSelect:function(a){"single"==this.s.select.type&&this.fnSelectNone();
this._fnRowSelect(a)},fnDeselect:function(a){this._fnRowDeselect(a)},fnGetTitle:function(a){var c="";"undefined"!=typeof a.sTitle&&""!==a.sTitle?c=a.sTitle:(a=h.getElementsByTagName("title"),0<a.length&&(c=a[0].innerHTML));return 4>"\u00a1".toString().length?c.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):c.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(a){var c=this.s.dt.aoColumns;a=this._fnColumnTargets(a.mColumns);var d=[],b=0,f=0,m,g;m=0;for(g=a.length;m<g;m++)a[m]&&
(b=c[m].nTh.offsetWidth,f+=b,d.push(b));m=0;for(g=d.length;m<g;m++)d[m]/=f;return d.join("\t")},fnGetTableData:function(a){if(this.s.dt)return this._fnGetDataTablesData(a)},fnSetText:function(a,c){this._fnFlashSetText(a,c)},fnResizeButtons:function(){for(var a in k.clients)if(a){var c=k.clients[a];"undefined"!=typeof c.domElement&&c.domElement.parentNode&&c.positionElement()}},fnResizeRequired:function(){for(var a in k.clients)if(a){var c=k.clients[a];if("undefined"!=typeof c.domElement&&c.domElement.parentNode==
this.dom.container&&!1===c.sized)return!0}return!1},fnPrint:function(a,c){c===v&&(c={});a===v||a?this._fnPrintStart(c):this._fnPrintEnd()},fnInfo:function(a,c){var d=b("<div/>").addClass(this.classes.print.info).html(a).appendTo("body");setTimeout(function(){d.fadeOut("normal",function(){d.remove()})},c)},fnContainer:function(){return this.dom.container},_fnConstruct:function(a){var c=this;this._fnCustomiseSettings(a);this.dom.container=h.createElement(this.s.tags.container);this.dom.container.className=
this.classes.container;"none"!=this.s.select.type&&this._fnRowSelectConfig();this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){b(c.s.dt.nTBody).off("click.DTTT_Select",c.s.custom.sRowSelector).off("mousedown.DTTT_Select","tr").off("mouseup.DTTT_Select","tr");b(c.dom.container).empty();var a=b.inArray(c,TableTools._aInstances);-1!==a&&TableTools._aInstances.splice(a,1)}})},_fnCustomiseSettings:function(a){"undefined"==
typeof this.s.dt._TableToolsInit&&(this.s.master=!0,this.s.dt._TableToolsInit=!0);this.dom.table=this.s.dt.nTable;this.s.custom=b.extend({},TableTools.DEFAULTS,a);this.s.swfPath=this.s.custom.sSwfPath;"undefined"!=typeof k&&(k.moviePath=this.s.swfPath);this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;this.s.custom.sSelectedClass&&(this.classes.select.row=
this.s.custom.sSelectedClass);this.s.tags=this.s.custom.oTags;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(a,c){for(var d,e=0,f=a.length;e<f;e++){if("string"==typeof a[e]){if("undefined"==typeof TableTools.BUTTONS[a[e]]){alert("TableTools: Warning - unknown button type: "+a[e]);continue}d=b.extend({},TableTools.BUTTONS[a[e]],!0)}else{if("undefined"==typeof TableTools.BUTTONS[a[e].sExtends]){alert("TableTools: Warning - unknown button type: "+a[e].sExtends);continue}d=b.extend({},
TableTools.BUTTONS[a[e].sExtends],!0);d=b.extend(d,a[e],!0)}(d=this._fnCreateButton(d,b(c).hasClass(this.classes.collection.container)))&&c.appendChild(d)}},_fnCreateButton:function(a,c){var d=this._fnButtonBase(a,c);if(a.sAction.match(/flash/)){if(!this._fnHasFlash())return!1;this._fnFlashConfig(d,a)}else"text"==a.sAction?this._fnTextConfig(d,a):"div"==a.sAction?this._fnTextConfig(d,a):"collection"==a.sAction&&(this._fnTextConfig(d,a),this._fnCollectionConfig(d,a));if(-1!==this.s.dt.iTabIndex)b(d).attr("tabindex",
this.s.dt.iTabIndex).attr("aria-controls",this.s.dt.sTableId).on("keyup.DTTT",function(a){13===a.keyCode&&(a.stopPropagation(),b(this).trigger("click"))}).on("mousedown.DTTT",function(c){a.sAction.match(/flash/)||c.preventDefault()});return d},_fnButtonBase:function(a,c){var d,b,f;c?(d=a.sTag&&"default"!==a.sTag?a.sTag:this.s.tags.collection.button,b=a.sLinerTag&&"default"!==a.sLinerTag?a.sLiner:this.s.tags.collection.liner,f=this.classes.collection.buttons.normal):(d=a.sTag&&"default"!==a.sTag?a.sTag:
this.s.tags.button,b=a.sLinerTag&&"default"!==a.sLinerTag?a.sLiner:this.s.tags.liner,f=this.classes.buttons.normal);d=h.createElement(d);b=h.createElement(b);var m=this._fnGetMasterSettings();d.className=f+" "+a.sButtonClass;d.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+m.buttonCounter);d.appendChild(b);b.innerHTML=a.sButtonText;m.buttonCounter++;return d},_fnGetMasterSettings:function(){if(this.s.master)return this.s;for(var a=TableTools._aInstances,c=0,b=a.length;c<b;c++)if(this.dom.table==
a[c].s.dt.nTable)return a[c].s},_fnCollectionConfig:function(a,c){var b=h.createElement(this.s.tags.collection.container);b.style.display="none";b.className=this.classes.collection.container;c._collection=b;h.body.appendChild(b);this._fnButtonDefinations(c.aButtons,b)},_fnCollectionShow:function(a,c){var d=this,e=b(a).offset(),f=c._collection,m=e.left,e=e.top+b(a).outerHeight(),r=b(g).height(),l=b(h).height(),t=b(g).width(),k=b(h).width();f.style.position="absolute";f.style.left=m+"px";f.style.top=
e+"px";f.style.display="block";b(f).css("opacity",0);var n=h.createElement("div");n.style.position="absolute";n.style.left="0px";n.style.top="0px";n.style.height=(r>l?r:l)+"px";n.style.width=(t>k?t:k)+"px";n.className=this.classes.collection.background;b(n).css("opacity",0);h.body.appendChild(n);h.body.appendChild(f);r=b(f).outerWidth();t=b(f).outerHeight();m+r>k&&(f.style.left=k-r+"px");e+t>l&&(f.style.top=e-t-b(a).outerHeight()+"px");this.dom.collection.collection=f;this.dom.collection.background=
n;setTimeout(function(){b(f).animate({opacity:1},500);b(n).animate({opacity:0.25},500)},10);this.fnResizeButtons();b(n).click(function(){d._fnCollectionHide.call(d,null,null)})},_fnCollectionHide:function(a,c){null!==c&&"collection"==c.sExtends||null===this.dom.collection.collection||(b(this.dom.collection.collection).animate({opacity:0},500,function(a){this.style.display="none"}),b(this.dom.collection.background).animate({opacity:0},500,function(a){this.parentNode.removeChild(this)}),this.dom.collection.collection=
null,this.dom.collection.background=null)},_fnRowSelectConfig:function(){if(this.s.master){var a=this,c=this.s.dt;b(c.nTable).addClass(this.classes.select.table);"os"===this.s.select.type&&(b(c.nTBody).on("mousedown.DTTT_Select","tr",function(a){if(a.shiftKey)b(c.nTBody).css("-moz-user-select","none").one("selectstart.DTTT_Select","tr",function(){return!1})}),b(c.nTBody).on("mouseup.DTTT_Select","tr",function(a){b(c.nTBody).css("-moz-user-select","")}));b(c.nTBody).on("click.DTTT_Select",this.s.custom.sRowSelector,
function(d){var e="tr"===this.nodeName.toLowerCase()?this:b(this).parents("tr")[0],f=a.s.select,m=a.s.dt.oInstance.fnGetPosition(e);if(e.parentNode==c.nTBody&&null!==c.oInstance.fnGetData(e)){if("os"==f.type)if(d.ctrlKey||d.metaKey)a.fnIsSelected(e)?a._fnRowDeselect(e,d):a._fnRowSelect(e,d);else if(d.shiftKey){var g=a.s.dt.aiDisplay.slice(),l=b.inArray(f.lastRow,g),h=b.inArray(m,g);if(0===a.fnGetSelected().length||-1===l)g.splice(b.inArray(m,g)+1,g.length);else{if(l>h)var k=h,h=l,l=k;g.splice(h+1,
g.length);g.splice(0,l)}a.fnIsSelected(e)?(g.splice(b.inArray(m,g),1),a._fnRowDeselect(g,d)):a._fnRowSelect(g,d)}else a.fnIsSelected(e)&&1===a.fnGetSelected().length?a._fnRowDeselect(e,d):(a.fnSelectNone(),a._fnRowSelect(e,d));else a.fnIsSelected(e)?a._fnRowDeselect(e,d):"single"==f.type?(a.fnSelectNone(),a._fnRowSelect(e,d)):"multi"==f.type&&a._fnRowSelect(e,d);f.lastRow=m}});c.oApi._fnCallbackReg(c,"aoRowCreatedCallback",function(d,e,f){c.aoData[f]._DTTT_selected&&b(d).addClass(a.classes.select.row)},
"TableTools-SelectAll")}},_fnRowSelect:function(a,c){var d=this._fnSelectData(a),e=[],f,g;f=0;for(g=d.length;f<g;f++)d[f].nTr&&e.push(d[f].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,e,!0)){f=0;for(g=d.length;f<g;f++)d[f]._DTTT_selected=!0,d[f].nTr&&b(d[f].nTr).addClass(this.classes.select.row);null!==this.s.select.postSelected&&this.s.select.postSelected.call(this,e);TableTools._fnEventDispatch(this,"select",e,!0)}},_fnRowDeselect:function(a,c){var d=this._fnSelectData(a),
e=[],f,g;f=0;for(g=d.length;f<g;f++)d[f].nTr&&e.push(d[f].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,e,!1)){f=0;for(g=d.length;f<g;f++)d[f]._DTTT_selected=!1,d[f].nTr&&b(d[f].nTr).removeClass(this.classes.select.row);null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,e);TableTools._fnEventDispatch(this,"select",e,!1)}},_fnSelectData:function(a){var c=[],b,e,f;if(a.nodeName)b=this.s.dt.oInstance.fnGetPosition(a),c.push(this.s.dt.aoData[b]);
else if("undefined"!==typeof a.length)for(e=0,f=a.length;e<f;e++)a[e].nodeName?(b=this.s.dt.oInstance.fnGetPosition(a[e]),c.push(this.s.dt.aoData[b])):"number"===typeof a[e]?c.push(this.s.dt.aoData[a[e]]):c.push(a[e]);else"number"===typeof a?c.push(this.s.dt.aoData[a]):c.push(a);return c},_fnTextConfig:function(a,c){var d=this;null!==c.fnInit&&c.fnInit.call(this,a,c);""!==c.sToolTip&&(a.title=c.sToolTip);b(a).hover(function(){null!==c.fnMouseover&&c.fnMouseover.call(this,a,c,null)},function(){null!==
c.fnMouseout&&c.fnMouseout.call(this,a,c,null)});null!==c.fnSelect&&TableTools._fnEventListen(this,"select",function(b){c.fnSelect.call(d,a,c,b)});b(a).click(function(b){null!==c.fnClick&&c.fnClick.call(d,a,c,null,b);null!==c.fnComplete&&c.fnComplete.call(d,a,c,null,null);d._fnCollectionHide(a,c)})},_fnHasFlash:function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(a){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==v&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},
_fnFlashConfig:function(a,c){var b=this,e=new k.Client;null!==c.fnInit&&c.fnInit.call(this,a,c);e.setHandCursor(!0);"flash_save"==c.sAction?(e.setAction("save"),e.setCharSet("utf16le"==c.sCharSet?"UTF16LE":"UTF8"),e.setBomInc(c.bBomInc),e.setFileName(c.sFileName.replace("*",this.fnGetTitle(c)))):"flash_pdf"==c.sAction?(e.setAction("pdf"),e.setFileName(c.sFileName.replace("*",this.fnGetTitle(c)))):e.setAction("copy");e.addEventListener("mouseOver",function(f){null!==c.fnMouseover&&c.fnMouseover.call(b,
a,c,e)});e.addEventListener("mouseOut",function(f){null!==c.fnMouseout&&c.fnMouseout.call(b,a,c,e)});e.addEventListener("mouseDown",function(f){null!==c.fnClick&&c.fnClick.call(b,a,c,e)});e.addEventListener("complete",function(f,g){null!==c.fnComplete&&c.fnComplete.call(b,a,c,e,g);b._fnCollectionHide(a,c)});null!==c.fnSelect&&TableTools._fnEventListen(this,"select",function(e){c.fnSelect.call(b,a,c,e)});this._fnFlashGlue(e,a,c.sToolTip)},_fnFlashGlue:function(a,c,b){var e=this,f=c.getAttribute("id");
h.getElementById(f)?a.glue(c,b):setTimeout(function(){e._fnFlashGlue(a,c,b)},100)},_fnFlashSetText:function(a,c){var b=this._fnChunkData(c,8192);a.clearText();for(var e=0,f=b.length;e<f;e++)a.appendText(b[e])},_fnColumnTargets:function(a){var c=[],d=this.s.dt,e,f=d.aoColumns;e=f.length;if("function"==typeof a)for(a=a.call(this,d),d=0;d<e;d++)c.push(-1!==b.inArray(d,a)?!0:!1);else if("object"==typeof a){for(d=0;d<e;d++)c.push(!1);d=0;for(e=a.length;d<e;d++)c[a[d]]=!0}else if("visible"==a)for(d=0;d<
e;d++)c.push(f[d].bVisible?!0:!1);else if("hidden"==a)for(d=0;d<e;d++)c.push(f[d].bVisible?!1:!0);else if("sortable"==a)for(d=0;d<e;d++)c.push(f[d].bSortable?!0:!1);else for(d=0;d<e;d++)c.push(!0);return c},_fnNewline:function(a){return"auto"==a.sNewLine?navigator.userAgent.match(/Windows/)?"\r\n":"\n":a.sNewLine},_fnGetDataTablesData:function(a){var c,d,e,f,g,h=[],l="",k=this.s.dt,p,n=new RegExp(a.sFieldBoundary,"g"),q=this._fnColumnTargets(a.mColumns);e="undefined"!=typeof a.bSelectedOnly?a.bSelectedOnly:
!1;if(a.bHeader){g=[];c=0;for(d=k.aoColumns.length;c<d;c++)q[c]&&(l=k.aoColumns[c].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),l=this._fnHtmlDecode(l),g.push(this._fnBoundData(l,a.sFieldBoundary,n)));h.push(g.join(a.sFieldSeperator))}e=!0;var u;f=this.fnGetSelectedIndexes();u=(e="none"!==this.s.select.type&&e&&0!==f.length)?f:s.Api?(new s.Api(k)).rows(a.oSelectorOpts).indexes().flatten().toArray():k.oInstance.$("tr",a.oSelectorOpts).map(function(a,c){return k.oInstance.fnGetPosition(c)}).get();
e=0;for(f=u.length;e<f;e++){p=k.aoData[u[e]].nTr;g=[];c=0;for(d=k.aoColumns.length;c<d;c++)q[c]&&(l=k.oApi._fnGetCellData(k,u[e],c,"display"),a.fnCellRender?l=a.fnCellRender(l,c,p,u[e])+"":"string"==typeof l?(l=l.replace(/\n/g," "),l=l.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,"$1$2$3"),l=l.replace(/<.*?>/g,"")):l+="",l=l.replace(/^\s+/,"").replace(/\s+$/,""),l=this._fnHtmlDecode(l),g.push(this._fnBoundData(l,a.sFieldBoundary,n)));h.push(g.join(a.sFieldSeperator));a.bOpenRows&&
(c=b.grep(k.aoOpenRows,function(a){return a.nParent===p}),1===c.length&&(l=this._fnBoundData(b("td",c[0].nTr).html(),a.sFieldBoundary,n),h.push(l)))}if(a.bFooter&&null!==k.nTFoot){g=[];c=0;for(d=k.aoColumns.length;c<d;c++)q[c]&&null!==k.aoColumns[c].nTf&&(l=k.aoColumns[c].nTf.innerHTML.replace(/\n/g," ").replace(/<.*?>/g,""),l=this._fnHtmlDecode(l),g.push(this._fnBoundData(l,a.sFieldBoundary,n)));h.push(g.join(a.sFieldSeperator))}return h.join(this._fnNewline(a))},_fnBoundData:function(a,c,b){return""===
c?a:c+a.replace(b,c+c)+c},_fnChunkData:function(a,c){for(var b=[],e=a.length,f=0;f<e;f+=c)f+c<e?b.push(a.substring(f,f+c)):b.push(a.substring(f,e));return b},_fnHtmlDecode:function(a){if(-1===a.indexOf("&"))return a;var c=h.createElement("div");return a.replace(/&([^\s]*?);/g,function(a,b){if("#"===a.substr(1,1))return String.fromCharCode(Number(b.substr(1)));c.innerHTML=a;return c.childNodes[0].nodeValue})},_fnPrintStart:function(a){var c=this,d=this.s.dt;this._fnPrintHideNodes(d.nTable);this.s.print.saveStart=
d._iDisplayStart;this.s.print.saveLength=d._iDisplayLength;a.bShowAll&&(d._iDisplayStart=0,d._iDisplayLength=-1,d.oApi._fnCalculateEnd&&d.oApi._fnCalculateEnd(d),d.oApi._fnDraw(d));if(""!==d.oScroll.sX||""!==d.oScroll.sY)this._fnPrintScrollStart(d),b(this.s.dt.nTable).bind("draw.DTTT_Print",function(){c._fnPrintScrollStart(d)});var e=d.aanFeatures,f;for(f in e)if("i"!=f&&"t"!=f&&1==f.length)for(var k=0,r=e[f].length;k<r;k++)this.dom.print.hidden.push({node:e[f][k],display:"block"}),e[f][k].style.display=
"none";b(h.body).addClass(this.classes.print.body);""!==a.sInfo&&this.fnInfo(a.sInfo,3E3);a.sMessage&&b("<div/>").addClass(this.classes.print.message).html(a.sMessage).prependTo("body");this.s.print.saveScroll=b(g).scrollTop();g.scrollTo(0,0);b(h).bind("keydown.DTTT",function(a){27==a.keyCode&&(a.preventDefault(),c._fnPrintEnd.call(c,a))})},_fnPrintEnd:function(a){a=this.s.dt;var c=this.s.print;this._fnPrintShowNodes();if(""!==a.oScroll.sX||""!==a.oScroll.sY)b(this.s.dt.nTable).unbind("draw.DTTT_Print"),
this._fnPrintScrollEnd();g.scrollTo(0,c.saveScroll);b("div."+this.classes.print.message).remove();b(h.body).removeClass("DTTT_Print");a._iDisplayStart=c.saveStart;a._iDisplayLength=c.saveLength;a.oApi._fnCalculateEnd&&a.oApi._fnCalculateEnd(a);a.oApi._fnDraw(a);b(h).unbind("keydown.DTTT")},_fnPrintScrollStart:function(){var a=this.s.dt;a.nScrollHead.getElementsByTagName("div")[0].getElementsByTagName("table");var c=a.nTable.parentNode,d;d=a.nTable.getElementsByTagName("thead");0<d.length&&a.nTable.removeChild(d[0]);
null!==a.nTFoot&&(d=a.nTable.getElementsByTagName("tfoot"),0<d.length&&a.nTable.removeChild(d[0]));d=a.nTHead.cloneNode(!0);a.nTable.insertBefore(d,a.nTable.childNodes[0]);null!==a.nTFoot&&(d=a.nTFoot.cloneNode(!0),a.nTable.insertBefore(d,a.nTable.childNodes[1]));""!==a.oScroll.sX&&(a.nTable.style.width=b(a.nTable).outerWidth()+"px",c.style.width=b(a.nTable).outerWidth()+"px",c.style.overflow="visible");""!==a.oScroll.sY&&(c.style.height=b(a.nTable).outerHeight()+"px",c.style.overflow="visible")},
_fnPrintScrollEnd:function(){var a=this.s.dt,c=a.nTable.parentNode;""!==a.oScroll.sX&&(c.style.width=a.oApi._fnStringToCss(a.oScroll.sX),c.style.overflow="auto");""!==a.oScroll.sY&&(c.style.height=a.oApi._fnStringToCss(a.oScroll.sY),c.style.overflow="auto")},_fnPrintShowNodes:function(){for(var a=this.dom.print.hidden,c=0,b=a.length;c<b;c++)a[c].node.style.display=a[c].display;a.splice(0,a.length)},_fnPrintHideNodes:function(a){for(var c=this.dom.print.hidden,d=a.parentNode,e=d.childNodes,f=0,g=e.length;f<
g;f++)if(e[f]!=a&&1==e[f].nodeType){var h=b(e[f]).css("display");"none"!=h&&(c.push({node:e[f],display:h}),e[f].style.display="none")}"BODY"!=d.nodeName.toUpperCase()&&this._fnPrintHideNodes(d)}};TableTools._aInstances=[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){for(var a=[],c=0,b=TableTools._aInstances.length;c<b;c++)TableTools._aInstances[c].s.master&&a.push(TableTools._aInstances[c]);return a};TableTools.fnGetInstance=function(a){"object"!=typeof a&&(a=h.getElementById(a));
for(var c=0,b=TableTools._aInstances.length;c<b;c++)if(TableTools._aInstances[c].s.master&&TableTools._aInstances[c].dom.table==a)return TableTools._aInstances[c];return null};TableTools._fnEventListen=function(a,c,b){TableTools._aListeners.push({that:a,type:c,fn:b})};TableTools._fnEventDispatch=function(a,c,b,e){for(var f=TableTools._aListeners,g=0,h=f.length;g<h;g++)a.dom.table==f[g].that.dom.table&&f[g].type==c&&f[g].fn(b,e)};TableTools.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",
sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:!1,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",mColumns:"all",bHeader:!0,bFooter:!0,bOpenRows:!1,bSelectedOnly:!1,oSelectorOpts:v,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null};TableTools.BUTTONS={csv:b.extend({},TableTools.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',
sFieldSeperator:",",fnClick:function(a,c,b){this.fnSetText(b,this.fnGetTableData(c))}}),xls:b.extend({},TableTools.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(a,c,b){this.fnSetText(b,this.fnGetTableData(c))}}),copy:b.extend({},TableTools.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(a,b,d){this.fnSetText(d,this.fnGetTableData(b))},fnComplete:function(a,b,d,
e){a=e.split("\n").length;b.bHeader&&a--;null!==this.s.dt.nTFoot&&b.bFooter&&a--;this.fnInfo("<h6>Table copied</h6><p>Copied "+a+" row"+(1==a?"":"s")+" to the clipboard.</p>",1500)}}),pdf:b.extend({},TableTools.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(a,b,d){this.fnSetText(d,"title:"+this.fnGetTitle(b)+"\nmessage:"+b.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(b)+
"\norientation:"+b.sPdfOrientation+"\nsize:"+b.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(b))}}),print:b.extend({},TableTools.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.</p>",sMessage:null,bShowAll:!0,sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(a,b){this.fnPrint(!0,b)}}),text:b.extend({},TableTools.buttonBase),select:b.extend({},TableTools.buttonBase,
{sButtonText:"Select button",fnSelect:function(a,c){0!==this.fnGetSelected().length?b(a).removeClass(this.classes.buttons.disabled):b(a).addClass(this.classes.buttons.disabled)},fnInit:function(a,c){b(a).addClass(this.classes.buttons.disabled)}}),select_single:b.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(a,c){1==this.fnGetSelected().length?b(a).removeClass(this.classes.buttons.disabled):b(a).addClass(this.classes.buttons.disabled)},fnInit:function(a,c){b(a).addClass(this.classes.buttons.disabled)}}),
select_all:b.extend({},TableTools.buttonBase,{sButtonText:"Select all",fnClick:function(a,b){this.fnSelectAll()},fnSelect:function(a,c){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?b(a).addClass(this.classes.buttons.disabled):b(a).removeClass(this.classes.buttons.disabled)}}),select_none:b.extend({},TableTools.buttonBase,{sButtonText:"Deselect all",fnClick:function(a,b){this.fnSelectNone()},fnSelect:function(a,c){0!==this.fnGetSelected().length?b(a).removeClass(this.classes.buttons.disabled):
b(a).addClass(this.classes.buttons.disabled)},fnInit:function(a,c){b(a).addClass(this.classes.buttons.disabled)}}),ajax:b.extend({},TableTools.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(a,c){var d=this.fnGetTableData(c);b.ajax({url:c.sAjaxUrl,data:[{name:"tableData",value:d}],success:c.fnAjaxComplete,dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(a){alert("Ajax complete")}}),
div:b.extend({},TableTools.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:b.extend({},TableTools.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(a,b){this._fnCollectionShow(a,b)}})};TableTools.buttons=TableTools.BUTTONS;TableTools.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",
buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}};TableTools.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}};TableTools.DEFAULTS={sSwfPath:"../swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sRowSelector:"tr",
sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}};TableTools.defaults=TableTools.DEFAULTS;TableTools.prototype.CLASS="TableTools";TableTools.version="2.2.4";b.fn.dataTable.Api&&b.fn.dataTable.Api.register("tabletools()",function(){var a=null;0<this.context.length&&(a=TableTools.fnGetInstance(this.context[0].nTable));return a});
"function"==typeof b.fn.dataTable&&"function"==typeof b.fn.dataTableExt.fnVersionCheck&&b.fn.dataTableExt.fnVersionCheck("1.9.0")?b.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInit;return(new TableTools(a.oInstance,b?b.tableTools||b.oTableTools||{}:{})).dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools requires DataTables 1.9.0 or newer - www.datatables.net/download");b.fn.DataTable.TableTools=TableTools})(jQuery,w,q);"function"==typeof p.fn.dataTable&&
"function"==typeof p.fn.dataTableExt.fnVersionCheck&&p.fn.dataTableExt.fnVersionCheck("1.9.0")?p.fn.dataTableExt.aoFeatures.push({fnInit:function(b){b=new TableTools(b.oInstance,"undefined"!=typeof b.oInit.oTableTools?b.oInit.oTableTools:{});TableTools._aInstances.push(b);return b.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download");p.fn.dataTable.TableTools=TableTools;return p.fn.DataTable.TableTools=TableTools};
"function"===typeof define&&define.amd?define(["jquery","datatables"],s):"object"===typeof exports?s(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.TableTools&&s(jQuery,jQuery.fn.dataTable)})(window,document);
